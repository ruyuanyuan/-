(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{2521:function(e,t,n){window,e.exports=function(n){var o={};function i(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}return i.m=n,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=11)}([function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),l=n(8),s=n(1),c=n(3),a=n(5),u=n(4),p=n(6);e.exports=function(){function r(e,t,n,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.queue=new l(e),this.controller=e,this.game=e.game,this.position=new c(o,i),this.type=t,this.facing=a,this.offset=[-22,-12],this.identifier=n,this.healthPoint=3,this.underTree={state:!1,treeIndex:-1}}return o(r,[{key:"tick",value:function(){this.queue.tick()}},{key:"reset",value:function(){}},{key:"canMoveThrough",value:function(){return!1}},{key:"canPlaceBlock",value:function(){return!1}},{key:"canTriggerPressurePlates",value:function(){return!1}},{key:"shouldUpdateSelectionIndicator",value:function(){return!1}},{key:"setMovePosition",value:function(e){this.position=e}},{key:"getSortOrderOffset",value:function(){return 5}},{key:"addCommand",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.queue.addCommand(e,t),this.queue.begin()}},{key:"addAnimation",value:function(){var e;return(e=this.getAnimationManager()).add.apply(e,arguments)}},{key:"getAnimationManager",value:function(){return this.animationRig?this.animationRig.animations:this.sprite.animations}},{key:"getWalkAnimation",value:function(){return"walk"+this.controller.levelView.getDirectionName(this.facing)}},{key:"getIdleAnimation",value:function(){return"idle"+this.controller.levelView.getDirectionName(this.facing)}},{key:"playMoveForwardAnimation",value:function(e,t,n,o){var i,a=this,r=this.controller.levelView,l=e[1]+(t===s.North?1:0);this.sprite.sortOrder=this.controller.levelView.yToIndex(l)+1,r.playBlockSound(o),r.playScaledSpeed(this.getAnimationManager(),this.getWalkAnimation()),setTimeout(function(){(i=a.controller.levelView.addResettableTween(a.sprite).to({x:a.offset[0]+40*e[0],y:a.offset[1]+40*e[1]},300,Phaser.Easing.Linear.None)).onComplete.add(function(){r.playScaledSpeed(a.getAnimationManager(),a.getIdleAnimation()),n.succeeded()}),i.start()},50/this.controller.tweenTimeScale)}},{key:"walkableCheck",value:function(){}},{key:"updateHidingTree",value:function(){var e=this.controller.levelView;if(this.underTree.state){var t=this.underTree.treeIndex,n=this.controller.levelEntity.entityMap;e.isUnderTree(t,this.position)||(function(e,t,n){var o=!0,i=!1,a=void 0;try{for(var r,l=t[Symbol.iterator]();!(o=(r=l.next()).done);o=!0){var s=r.value[1];if(s!==e&&s.underTree.treeIndex===n)return!0}}catch(e){i=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw a}}return!1}(this,n,t)||e.changeTreeAlpha(t,1),this.underTree={state:!1,treeIndex:-1})}else for(var o=e.trees,i=0;i<o.length;i++)if(e.isUnderTree(i,this.position)){e.changeTreeAlpha(i,.8),this.underTree={state:!0,treeIndex:i};break}}},{key:"updateHidingBlock",value:function(e){var a=this.controller.levelView,r=this.controller.levelModel.actionPlane;this.isOnBlock||function(e,t){var n=c.south(t),o=r.getBlockAt(n);if(o&&!o.isTransparent){var i=a.actionPlaneBlocks[a.coordinatesToIndex(n)];null!==i&&e.controller.levelView.addResettableTween(i).to({alpha:.8},300,Phaser.Easing.Linear.None).start()}}(this,this.position),void 0!==e&&function(e,t){var n=c.south(t);if(n.y<10){var o=a.actionPlaneBlocks[a.coordinatesToIndex(n)];null!==o&&e.controller.levelView.addResettableTween(o).to({alpha:1},300,Phaser.Easing.Linear.None).start()}}(this,e)}},{key:"doMoveForward",value:function(e,t){var n=this.controller.levelModel,o=this.position;this.position=t;var i=n.groundPlane.getBlockAt(this.position).blockType;this.playMoveForwardAnimation(t,this.facing,e,i,function(){}),this.updateHidingTree(),this.updateHidingBlock(o)}},{key:"bump",value:function(e){var t=this,n=this.controller.levelView.getDirectionName(this.facing);this.controller.levelView.playScaledSpeed(this.getAnimationManager(),"bump"+n);var o=this.controller.levelModel.getMoveForwardPosition(this),i=this.controller.levelEntity.getEntityAt(o);null!==i&&(this.queue.startPushHighPriorityCommands(),this.controller.events.forEach(function(e){return e({eventType:a.WhenTouched,targetType:t.type,targetIdentifier:t.identifier,eventSenderIdentifier:i.identifier})}),this.queue.endPushHighPriorityCommands()),this.controller.delayPlayerMoveBy(400,800,function(){e.succeeded()})}},{key:"callBumpEvents",value:function(t){for(var n=this,o=1;o<t.length;o++)"frontEntity"===t[o]&&(this.controller.events.forEach(function(e){return e({eventType:a.WhenTouched,targetType:t[o+1].type,eventSenderIdentifier:n.identifier,targetIdentifier:t[o+1].identifier})}),o++)}},{key:"moveDirection",value:function(e,t){this.controller.levelModel.turnToDirection(this,t),this.moveForward(e,!1)}},{key:"moveForward",value:function(e){1<arguments.length&&void 0!==arguments[1]&&!arguments[1]||this.controller.addCommandRecord("moveForward",this.type,e.repeat);var t=this.controller.levelModel.getMoveForwardPosition(this),n=this.controller.levelModel.canMoveForward(this);if(n[0]){var o=c.directionToOffsetPosition(this.facing),i=c.directionToOffsetPosition(s.opposite(this.facing)),a=this.handleMoveOnPressurePlate(o);this.doMoveForward(e,t),a||this.handleMoveOffPressurePlate(i),this.handleMoveOffIronDoor(i),this.handleMoveAwayFromPiston(i)}else this.bump(e),this.callBumpEvents(n)}},{key:"moveBackward",value:function(e){1<arguments.length&&void 0!==arguments[1]&&!arguments[1]||this.controller.addCommandRecord("moveBackward",this.type,e.repeat);var t=this.controller.levelModel.getMoveDirectionPosition(this,2),n=this.controller.levelModel.canMoveBackward(this);if(n[0]){var o=c.directionToOffsetPosition(s.opposite(this.facing)),i=c.directionToOffsetPosition(this.facing),a=this.handleMoveOnPressurePlate(o);this.doMoveBackward(e,t),a||this.handleMoveOffPressurePlate(i),this.handleMoveOffIronDoor(i),this.handleMoveAwayFromPiston(i)}else this.bump(e),this.callBumpEvents(n)}},{key:"canPlaceBlockOver",value:function(){return{canPlace:!1,plane:""}}},{key:"moveAway",value:function(e,t){this.controller.addCommandRecord("moveAway",this.type,e.repeat);var n=t.position,o=[],i=function(e,t,n){return c.absoluteDistanceSquare(t[1],e)<c.absoluteDistanceSquare(n[1],e)?n:t},a=c.absoluteDistanceSquare(n,this.position);n.x<=this.position.x&&this.controller.levelModel.canMoveDirection(this,s.East)[0]&&(o=[s.East,c.east(this.position)]),n.x>=this.position.x&&this.controller.levelModel.canMoveDirection(this,s.West)[0]&&(o=0<o.length?i(n,o,[s.West,c.west(this.position)]):[s.West,c.west(this.position)]),n.y>=this.position.y&&this.controller.levelModel.canMoveDirection(this,s.North)[0]&&(o=0<o.length?i(n,o,[s.North,c.north(this.position)]):[s.North,c.north(this.position)]),n.y<=this.position.y&&this.controller.levelModel.canMoveDirection(this,s.South)[0]&&(o=0<o.length?i(n,o,[s.South,c.south(this.position)]):[s.South,c.south(this.position)]),0===o.length||a>=c.absoluteDistanceSquare(n,o[1])?e.succeeded():this.moveDirection(e,o[0])}},{key:"moveToward",value:function(e,t){this.controller.addCommandRecord("moveToward",this.type,e.repeat);var n=t.position,o=[],i=function(e,t,n){return c.absoluteDistanceSquare(t[1],e)>c.absoluteDistanceSquare(n[1],e)?n:t};return n.x>=this.position.x&&this.controller.levelModel.canMoveDirection(this,s.East)[0]&&(o=[s.East,c.east(this.position)]),n.x<=this.position.x&&this.controller.levelModel.canMoveDirection(this,s.West)[0]&&(o=0<o.length?i(n,o,[s.West,c.west(this.position)]):[s.West,c.west(this.position)]),n.y<=this.position.y&&this.controller.levelModel.canMoveDirection(this,s.North)[0]&&(o=0<o.length?i(n,o,[s.North,c.north(this.position)]):[s.North,c.north(this.position)]),n.y>=this.position.y&&this.controller.levelModel.canMoveDirection(this,s.South)[0]&&(o=0<o.length?i(n,o,[s.South,c.south(this.position)]):[s.South,c.south(this.position)]),1===c.absoluteDistanceSquare(this.position,n)?(this.position.x<n.x?this.facing=s.East:this.position.x>n.x?this.facing=s.West:this.position.y<n.y?this.facing=s.South:this.position.y>n.y&&(this.facing=s.North),this.updateAnimationDirection(),this.bump(e),!1):0===o.length?(e.succeeded(),!1):(this.moveDirection(e,o[0]),!0)}},{key:"moveTo",value:function(e,t){var n=this;if(1===c.absoluteDistanceSquare(t.position,this.position))t.position.y-this.position.y==-1?this.moveDirection(e,s.North):t.position.y-this.position.y==1?this.moveDirection(e,s.South):t.position.x-this.position.x==1?this.moveDirection(e,s.East):this.moveDirection(e,s.West);else if(this.moveToward(e,t)){var o=new u(this.controller,function(){},function(){n.moveTo(o,t)},this.identifier);this.addCommand(o)}else this.bump(e)}},{key:"turn",value:function(e,t){2<arguments.length&&void 0!==arguments[2]&&!arguments[2]||this.controller.addCommandRecord("turn",this.type,e.repeat),-1===t&&this.controller.levelModel.turnLeft(this),1===t&&this.controller.levelModel.turnRight(this),this.updateAnimationDirection(),this.controller.delayPlayerMoveBy(200,800,function(){e.succeeded()})}},{key:"turnRandom",value:function(e){this.controller.addCommandRecord("turnRandom",this.type,e.repeat);var t=0===Math.floor(2*Math.random())+0?1:-1;this.turn(e,t,!1)}},{key:"use",value:function(e,t){var n=this,o="lookAtCam"+this.controller.levelView.getDirectionName(this.facing);this.controller.levelView.playScaledSpeed(this.getAnimationManager(),o),this.queue.startPushHighPriorityCommands(),this.controller.events.forEach(function(e){return e({eventType:a.WhenUsed,targetType:n.type,eventSenderIdentifier:t.identifier,targetIdentifier:n.identifier})}),this.queue.endPushHighPriorityCommands(),e.succeeded()}},{key:"drop",value:function(t,e){var n=this;this.controller.addCommandRecord("drop",this.type,t.repeat),this.controller.levelView.playItemDropAnimation(this.position,e,function(){if(t.succeeded(),n.controller.levelModel.usePlayer){var e=n.controller.levelModel.player.queue.currentCommand;e&&e.waitForOtherQueue&&e.succeeded()}})}},{key:"attack",value:function(i){var n=this;this.controller.addCommandRecord("attack",this.type,i.repeat);var e=this.controller.levelView.getDirectionName(this.facing);this.controller.levelView.playScaledSpeed(this.getAnimationManager(),"attack"+e),setTimeout(function(e){var o=e.controller.levelEntity.getEntityAt(e.controller.levelModel.getMoveForwardPosition(e));if(o){var t=new u(e.controller,function(){},function(){o.takeDamage(t)},o);o.addCommand(t)}setTimeout(function(e,t,n){null!==t&&(o.queue.startPushHighPriorityCommands(),e.events.forEach(function(e){return e({eventType:a.WhenAttacked,targetType:t.type,eventSenderIdentifier:n.identifier,targetIdentifier:t.identifier})}),o.queue.endPushHighPriorityCommands()),i.succeeded()},300/n.controller.tweenTimeScale,e.controller,o,e)},200/this.controller.tweenTimeScale,this)}},{key:"pushBack",value:function(e,t,n,o){var i=this,a=this.controller.levelModel,r=c.forward(this.position,t);if(a.isPositionEmpty(r)[0]){this.updateHidingBlock(this.position),this.position=r,this.updateHidingTree();var l=this.controller.levelView.addResettableTween(this.sprite).to({x:this.offset[0]+40*this.position[0],y:this.offset[1]+40*this.position[1]},n,Phaser.Easing.Linear.None);l.onComplete.add(function(){setTimeout(function(){e.succeeded(),void 0!==o&&o(i)},n/i.controller.tweenTimeScale)}),l.start()}else e.succeeded(),void 0!==o&&o(this)}},{key:"takeDamage",value:function(e){var t=this,n=this.controller.levelView,o=n.getDirectionName(this.facing);1<this.healthPoint?(n.playScaledSpeed(this.getAnimationManager(),"hurt"+o),setTimeout(function(){t.healthPoint--,e.succeeded()},1500/this.controller.tweenTimeScale)):(this.healthPoint--,this.getAnimationManager().stop(null,!0),this.controller.levelView.playScaledSpeed(this.getAnimationManager(),"die"+o),setTimeout(function(){var e=t.controller.levelView.addResettableTween(t.sprite).to({alpha:0},300,Phaser.Easing.Linear.None);e.onComplete.add(function(){t.controller.levelEntity.destroyEntity(t.identifier)}),e.start()},1500/this.controller.tweenTimeScale))}},{key:"playRandomIdle",value:function(e){var t,n="";switch(t=this.controller.levelView.getDirectionName(e),Math.trunc(5*Math.random())+1){case 1:n+="idle";break;case 2:n+="lookLeft";break;case 3:n+="lookRight";break;case 4:n+="lookAtCam";break;case 5:n+="lookDown"}n+=t,this.controller.levelView.playScaledSpeed(this.getAnimationManager(),n)}},{key:"updateAnimationDirection",value:function(){var e=this.controller.levelView.getDirectionName(this.facing);this.controller.levelView.playScaledSpeed(this.getAnimationManager(),"idle"+e)}},{key:"getDistance",value:function(e){return c.absoluteDistanceSquare(this.position,e.position)}},{key:"blowUp",value:function(n,e){var t=s.South;e[0]>this.position[0]?(t=s.West,this.facing=s.East,this.updateAnimationDirection()):e[0]<this.position[0]?(t=s.East,this.facing=s.West,this.updateAnimationDirection()):e[1]>this.position[1]?(t=s.North,this.facing=s.South,this.updateAnimationDirection()):e[1]<this.position[1]&&(t=s.South,this.facing=s.North,this.updateAnimationDirection()),this.pushBack(n,t,150,function(e){var t=new u(e.controller,function(){},function(){e.controller.destroyEntity(t,e.identifier)},e.identifier);e.queue.startPushHighPriorityCommands(),e.addCommand(t,n.repeat),e.queue.endPushHighPriorityCommands()})}},{key:"hasPermissionToWalk",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return(e.isWalkable||void 0!==t&&t.isOnBlock&&!e.isEmpty)&&(void 0===t||t.canMoveThrough())&&"water"!==n.blockType&&"lava"!==n.blockType}},{key:"handleMoveOffPressurePlate",value:function(e){var t=this,n=c.add(this.position,e),o="pressurePlateDown"===this.controller.levelModel.actionPlane.getBlockAt(n).blockType,i=this.controller.levelModel.actionPlane.getBlockAt(this.position),a=!1;if(void 0!==i&&i.isWalkable||(a=!0),this.controller.levelEntity.entityMap.forEach(function(e){e.identifier!==t.identifier&&e.canTriggerPressurePlates()&&t.controller.positionEquivalence(e.position,n)&&(a=!0)}),o&&!a){this.controller.audioPlayer.play("pressurePlateClick");var r=new p("pressurePlateUp");this.controller.levelModel.actionPlane.setBlockAt(n,r,e[0],e[1])}}},{key:"handleMoveOnPressurePlate",value:function(e){var t=c.add(this.position,e);if("pressurePlateUp"!==this.controller.levelModel.actionPlane.getBlockAt(t).blockType)return!1;this.controller.audioPlayer.play("pressurePlateClick");var n=new p("pressurePlateDown");return this.controller.levelModel.actionPlane.setBlockAt(t,n),!0}},{key:"handleMoveOffIronDoor",value:function(e){var t=c.add(this.position,e);if(this.controller.levelModel.inBounds(t)){var n="doorIron"===this.controller.levelModel.actionPlane.getBlockAt(t).blockType,o="doorIron"===this.controller.levelModel.actionPlane.getBlockAt(this.position).blockType;n&&!o&&this.controller.levelModel.actionPlane.findDoorToAnimate(new c(-1,-1))}}},{key:"handleMoveAwayFromPiston",value:function(e){var n=this,t=c.add(this.position,e);c.getOrthogonalPositions(t).forEach(function(e){if(n.controller.levelModel.actionPlane.inBounds(e)){var t=n.controller.levelModel.actionPlane.getBlockAt(e);t.blockType.startsWith("piston")&&t.isPowered&&n.controller.levelModel.actionPlane.activatePiston(e)}})}},{key:"handleGetOnRails",value:function(e){this.getOffTrack=!1,this.handleMoveOffPressurePlate(new c(0,0)),this.controller.levelView.playTrack(this.position,e,!0,this,null)}}]),r}()},function(e,t,n){"use strict";var o=Object.freeze({North:0,East:1,South:2,West:3,opposite:function(e){switch(e){case o.North:return o.South;case o.South:return o.North;case o.East:return o.West;case o.West:return o.East}},left:function(e){return this.turn(e,"left")},right:function(e){return this.turn(e,"right")},turnDirection:function(e,t){switch(e){case o.North:return t===o.East?"right":"left";case o.South:return t===o.West?"right":"left";case o.East:return t===o.South?"right":"left";case o.West:return t===o.North?"right":"left"}},turn:function(e,t){return(e+4+("right"===t?1:-1))%4},directionToOffset:function(e){switch(e){case o.North:return[0,-1];case o.South:return[0,1];case o.East:return[1,0];case o.West:return[-1,0]}},directionToRelative:function(e){switch(e){case o.North:return"Up";case o.South:return"Down";case o.East:return"Right";case o.West:return"Left"}}});e.exports=o},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),a=n(9);e.exports=function(){function i(e,t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.GameController=e,this.Game=e.game,this.HighlightCallback=t,this.state=a.NOT_STARTED,this.target=n,this.onFinish=o,this.repeat=!1}return o(i,[{key:"tick",value:function(){}},{key:"begin",value:function(){this.HighlightCallback&&this.HighlightCallback(),this.state=a.WORKING}},{key:"isStarted",value:function(){return this.state!==a.NOT_STARTED}},{key:"isFinished",value:function(){return this.isSucceeded()||this.isFailed()}},{key:"isSucceeded",value:function(){return this.state===a.SUCCESS}},{key:"isFailed",value:function(){return this.state===a.FAILURE}},{key:"succeeded",value:function(){this.state=a.SUCCESS}},{key:"failed",value:function(){this.state=a.FAILURE}}]),i}()},function(e,t,n){"use strict";var i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),a=n(1),r=[a.North,a.East,a.South,a.West];e.exports=function(){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.x=e,this.y=t,this[0]=e,this[1]=t}return i(o,null,[{key:"add",value:function(e,t){return new o(e[0]+t[0],e[1]+t[1])}},{key:"subtract",value:function(e,t){return new o(e[0]-t[0],e[1]-t[1])}},{key:"equals",value:function(e,t){return e[0]===t[0]&&e[1]===t[1]}},{key:"directionToOffsetPosition",value:function(e){var t=a.directionToOffset(e);if(t)return o.fromArray(t)}},{key:"isAdjacent",value:function(t,n){return r.map(o.directionToOffsetPosition).some(function(e){return o.equals(o.add(t,e),n)})}},{key:"forward",value:function(e,t){return o.add(e,o.directionToOffsetPosition(t))}},{key:"north",value:function(e){return o.forward(e,a.North)}},{key:"east",value:function(e){return o.forward(e,a.East)}},{key:"south",value:function(e){return o.forward(e,a.South)}},{key:"west",value:function(e){return o.forward(e,a.West)}},{key:"getOrthogonalPositions",value:function(t){return r.map(function(e){return o.forward(t,e)})}},{key:"manhattanDistance",value:function(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}},{key:"absoluteDistanceSquare",value:function(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}},{key:"getSurroundingPositions",value:function(e){return o.getOrthogonalPositions(e).concat([o.north(o.east(e)),o.north(o.west(e)),o.south(o.east(e)),o.south(o.west(e))])}},{key:"fromArray",value:function(e){return new o(e[0],e[1])}}]),o}()},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=n(2);e.exports=function(){function r(e,t,n,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t,o,i));return a.actionCallback=n,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i),o(r,[{key:"tick",value:function(){}},{key:"begin",value:function(){(function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,o)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(o):void 0})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"begin",this).call(this),this.actionCallback()}}]),r}()},function(e,t,n){"use strict";e.exports=Object.freeze({WhenTouched:0,WhenUsed:1,WhenSpawned:2,WhenAttacked:3,WhenNight:4,WhenDay:5,WhenNightGlobal:6,WhenDayGlobal:7,WhenRun:8})},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=n(1),a=i.North,r=i.South,l=i.East,s=i.West;e.exports=function(){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.blockType=e,this.isEntity=!1,this.isWalkable=!1,this.isPlacable=!1,this.isDestroyable=!0,this.isUsable=!0,this.isEmpty=!1,this.isEmissive=!1,this.isTransparent=!1,this.isRedstone=!1,this.isPowered=!1,this.isConnectedToRedstone=!1,this.isRedstoneBattery=!1,this.isOpen=!1,this.isRail=!1,this.isSolid=!0,this.isWeaklyPowerable=!0,this.isStickable=!0,this.isActivatedConduit=!1,""===e&&(this.isWalkable=!0,this.isDestroyable=!1,this.isEmpty=!0,this.isPlacable=!0,this.isUsable=!1,this.isWeaklyPowerable=!1),this.getIsMiniblock()&&(this.isEntity=!0,this.isWalkable=!0,this.isDestroyable=!1,this.isPlacable=!0,this.isUsable=!1,this.isTransparent=!0),e.match("torch")&&(this.isWalkable=!0,this.isPlacable=!0,this.isStickable=!1),"rails"===e.substring(0,5)&&(this.isWeaklyPowerable="railsRedstoneTorch"===e,this.isStickable="railsRedstoneTorch"!==e,this.isEntity=!0,this.isWalkable=!0,this.isUsable=!0,this.isDestroyable=!0,this.isTransparent=!0,this.isRail="railsRedstoneTorch"!==e,this.isConnectedToRedstone=/^rails(RedstoneTorch|Unpowered|Powered)/.test(e),this.isRedstoneBattery="railsRedstoneTorch"===e,this.connectionA=void 0,this.connectionB=void 0),"sheep"===e&&(this.isEntity=!0,this.isDestroyable=!1,this.isUsable=!0),"invisible"===e&&(this.isDestroyable=!1,this.isUsable=!1,this.isWeaklyPowerable=!1,this.isEmissive=!0),e.startsWith("glass")&&(this.isSolid=!1),e.startsWith("ice")&&(this.isSolid=!1),"creeper"===e&&(this.isEntity=!0),"bedrock"===e&&(this.isDestroyable=!1),"lava"===e&&(this.isEmissive=!0,this.isWalkable=!0,this.isPlacable=!0),"magmaUnderwater"!==e&&"magmaDeep"!==e||(this.isEmissive=!0),"bubbleColumn"===e&&(this.isSolid=!1,this.isTransparent=!0,this.isEntity=!0),"conduit"===e&&(this.isSolid=!1,this.isEntity=!0),"water"===e&&(this.isPlacable=!0),"torch"===e&&(this.isEmissive=!0,this.isEntity=!0,this.isWalkable=!0,this.isUsable=!0,this.isDestroyable=!1,this.isTransparent=!0),"cropWheat"===e&&(this.isEntity=!0,this.isWalkable=!0,this.isUsable=!0,this.isDestroyable=!1,this.isTransparent=!0),"tnt"===e&&(this.isUsable=!0,this.isDestroyable=!0),"door"===e&&(this.isWeaklyPowerable=!1,this.isSolid=!1,this.isEntity=!0,this.isWalkable=!1,this.isUsable=!0,this.isDestroyable=!1,this.isTransparent=!0,this.isStickable=!1),"doorIron"===e&&(this.isWeaklyPowerable=!1,this.isSolid=!1,this.isEntity=!0,this.isWalkable=!1,this.isDestroyable=!1,this.isTransparent=!0,this.isConnectedToRedstone=!0,this.isStickable=!1),e.startsWith("redstoneWire")&&(this.isEntity=!0,this.isWalkable=!0,this.isUsable=!0,this.isDestroyable=!0,this.isTransparent=!0,this.isRedstone=!0,this.isStickable=!1),e.startsWith("pressurePlate")&&(this.isWeaklyPowerable="pressurePlateUp"!==e,this.isEntity=!0,this.isWalkable=!0,this.isDestroyable=!1,this.isTransparent=!0,this.isConnectedToRedstone=!0,this.isRedstoneBattery="pressurePlateUp"!==e,this.isStickable=!1),"glowstone"===e&&(this.isEntity=!0),"bedFoot"!==e&&"bedHead"!==e||(this.isEntity=!0),e.startsWith("piston")&&(this.isWeaklyPowerable=!1,this.isSolid=!1,this.isDestroyable=!1,this.isConnectedToRedstone=!e.startsWith("pistonArm"),"On"!==e.substring(e.length-2,e.length)&&!e.startsWith("pistonArm")&&"OnSticky"!==e.substring(e.length-8,e.length)||(this.isEntity=!0)),(e.startsWith("flower")||/coral/i.test(e)&&!/Block/.test(e)||"seaGrass"===e||"kelp"===e||"seaPickles"===e)&&(this.isWalkable=!0,this.isEntity=!0),"seaPickles"!==e&&"seaLantern"!==e&&"magmaBlock"!==e||(this.isEmissive=!0)}return o(n,[{key:"isFlat",value:function(){return this.isRail||this.isRedstone||this.blockType.startsWith("pressurePlate")}},{key:"notValidOnGroundPlane",value:function(){return this.blockType.startsWith("rails")||this.blockType.startsWith("redstone")}},{key:"skipsDestructionOverlay",value:function(){return this.isRedstone||"torch"===this.blockType||"railsRedstoneTorch"===this.blockType}},{key:"shouldRenderOnGroundPlane",value:function(){return this.isFlat()}},{key:"getIsPowerableRail",value:function(){return this.isRail&&this.isConnectedToRedstone}},{key:"getIsHorizontal",value:function(){return this.blockType.match("East|West")}},{key:"getIsVertical",value:function(){return this.blockType.match("North|South")}},{key:"getIsStickyPiston",value:function(){return"Sticky"===this.blockType.substring(this.blockType.length-6,this.blockType.length)}},{key:"canHoldCharge",value:function(){return this.isSolid}},{key:"getIsMiniblock",value:function(){return n.isMiniblock(this.blockType)}},{key:"getIsChestblock",value:function(){return n.isChestblock(this.blockType)}},{key:"getIsTree",value:function(){return!!this.blockType.match(/^tree/)}},{key:"getIsDoor",value:function(){return this.blockType.startsWith("door")}},{key:"getIsConduit",value:function(){return this.blockType.startsWith("conduit")}},{key:"getIsLiquid",value:function(){return"water"===this.blockType||"magmaUnderwater"===this.blockType||"lava"===this.blockType}},{key:"getCanFall",value:function(){return"sand"===this.blockType||"gravel"===this.blockType}},{key:"getIsPlaceableInLiquid",value:function(){return!(this.isRedstone||this.getIsPiston()||this.isRail||"torch"===this.blockType||"railsRedstoneTorch"===this.blockType||"pressurePlateUp"===this.blockType)}},{key:"getIsPiston",value:function(){return this.blockType.startsWith("piston")}},{key:"getIsPistonArm",value:function(){return this.blockType.startsWith("pistonArm")}},{key:"getIsPushable",value:function(){return""!==this.blockType&&!this.isDestroyableUponPush()}},{key:"isDestroyableUponPush",value:function(){return this.blockType.startsWith("redstone")||this.blockType.startsWith("door")||this.blockType.startsWith("railsRedstone")||this.blockType.startsWith("pressure")}},{key:"needToRefreshRedstone",value:function(){return!!(this.isRedstone||""===this.blockType||this.isConnectedToRedstone&&!this.blockType.startsWith("piston"))}},{key:"getPistonDirection",value:function(){if(this.blockType.startsWith("piston"))switch(this.blockType.substring(6,7)){case"D":return r;case"U":return a;case"L":return s;case"R":return l}}},{key:"getIsEmptyOrEntity",value:function(){return this.isEmpty||this.isEntity}}],[{key:"getCanFall",value:function(e){return new n(e).getCanFall()}},{key:"getIsPlaceableInLiquid",value:function(e){return new n(e).getIsPlaceableInLiquid()}},{key:"isWalkable",value:function(e){return new n(e).isWalkable}},{key:"isMiniblock",value:function(e){return e.endsWith("Miniblock")}},{key:"isChestblock",value:function(e){return e.endsWith("Chest")}},{key:"isFlat",value:function(e){return new n(e).isFlat()}},{key:"skipsDestructionOverlay",value:function(e){return new n(e).skipsDestructionOverlay()}},{key:"notValidOnGroundPlane",value:function(e){return new n(e).notValidOnGroundPlane()}},{key:"getMiniblockFrame",value:function(e){if("railsRedstoneTorch"===e)return"redstoneTorch";if(e.startsWith("rails"))return"railNormal";if(e.endsWith("Chest"))return"chest";if(!e.startsWith("glass")&&!e.startsWith("ice")){if("redstoneWire"===e.substring(0,12))return"redstoneDust";if(n.isMiniblock(e))return e.replace("Miniblock","");var t=e;switch(t){case"treeAcacia":case"treeBirch":case"treeJungle":case"treeOak":case"treeSpruce":case"treeSpruceSnowy":t="log"+t.substring(4);break;case"stone":t="cobblestone";break;case"oreCoal":t="coal";break;case"oreDiamond":t="diamond";break;case"oreIron":t="ingotIron";break;case"oreLapis":t="lapisLazuli";break;case"oreGold":t="ingotGold";break;case"oreEmerald":t="emerald";break;case"oreRedstone":t="redstoneDust";break;case"grass":t="dirt";break;case"tnt":t="gunPowder"}return t}}}]),n}()},function(s,e,t){"use strict";var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,i=!1,a=void 0;try{for(var r,l=e[Symbol.iterator]();!(o=(r=l.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=t(1);s.exports.convertActionPlaneEntitiesToConfig=function(a){var e=a.gridWidth&&a.gridHeight?[a.gridWidth,a.gridHeight]:[10,10],t=n(e,2),r=t[0],l=t[1];[a.actionPlane].forEach(function(e){for(var t=0;t<e.length;t++){var n=t%r,o=Math.floor(t/l),i=s.exports.convertNameToEntity(e[t],n,o);i&&(a.entities=a.entities||[],a.entities.push(i),e[t]="")}})},s.exports.randomInt=function(e,t){return Math.floor(Math.random()*(t-e))+e};var r={Up:a.North,Down:a.South,Left:a.West,Right:a.East};s.exports.convertNameToEntity=function(e,t,n){if(e.match(/^(sheep|zombie|ironGolem|creeper|cod|cow|chicken|dolphin|ghast|boat|salmon|squid|tropicalFish|seaTurtle)(Right|Left|Up|Down|$)/)){var o=e.match(/(.*)(Right|Left|Up|Down)/),i=o?r[o[2]]:a.East;return[o?o[1]:e,t,n,i]}}},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=n(9);e.exports=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameController=e,this.game=e.game,this.reset(),this.repeatCommands=[],this.setUnshiftState=!1,this.highPriorityCommands=[]}return o(t,[{key:"addCommand",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];e.repeat=t,this.whileCommandQueue?this.whileCommandQueue.addCommand(e):this.setUnshiftState?this.highPriorityCommands.push(e):this.commandList_.push(e)}},{key:"setWhileCommandInsertState",value:function(e){this.whileCommandQueue=e}},{key:"begin",value:function(){this.state=i.WORKING}},{key:"reset",value:function(){this.state=i.NOT_STARTED,this.currentCommand=null,this.commandList_=[],this.highPriorityCommands=[],this.whileCommandQueue&&this.whileCommandQueue.reset(),this.repeatCommands=[],this.whileCommandQueue=null}},{key:"startPushHighPriorityCommands",value:function(){this.setUnshiftState=!0,this.highPriorityCommands=[]}},{key:"endPushHighPriorityCommands",value:function(){for(var e=this.highPriorityCommands.length-1;0<=e;e--)this.commandList_.unshift(this.highPriorityCommands[e]);this.setUnshiftState=!1}},{key:"tick",value:function(){if(this.state===i.WORKING){if(!this.currentCommand){if(0===this.commandList_.length){0===this.repeatCommands.length&&(this.state=i.SUCCESS),this.gameController.startPushRepeatCommand();for(var e=0;e<this.repeatCommands.length;e++)0<this.repeatCommands[e][1]?(this.repeatCommands[e][0](),this.repeatCommands[e][1]--):-1===this.repeatCommands[e][1]?this.repeatCommands[e][0]():this.repeatCommands.splice(e,1);return void this.gameController.endPushRepeatCommand()}this.currentCommand=this.commandList_.shift()}this.currentCommand.isStarted()?this.currentCommand.tick():this.currentCommand.begin(),this.currentCommand.isSucceeded()?(this.currentCommand.onFinish&&this.currentCommand.onFinish(),this.currentCommand=null):this.currentCommand.isFailed()&&(this.state=i.FAILURE)}}},{key:"getLength",value:function(){return this.commandList_?this.commandList_.length:0}},{key:"isStarted",value:function(){return this.state!==i.NOT_STARTED}},{key:"isFinished",value:function(){return this.isSucceeded()||this.isFailed()}},{key:"isSucceeded",value:function(){return this.state===i.SUCCESS}},{key:"isFailed",value:function(){return this.state===i.FAILURE}},{key:"addRepeatCommands",value:function(e,t){if(-1===t)for(var n=0;n<this.repeatCommands.length;n++)if(-1===this.repeatCommands[n][1]){this.repeatCommands.splice(n,1);break}this.repeatCommands.push([e,t]),this.begin()}}]),t}()},function(e,t,n){"use strict";e.exports=Object.freeze({NOT_STARTED:0,WORKING:1,SUCCESS:2,FAILURE:3})},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=n(0),a=n(1);e.exports=function(){function l(e,t,n,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,t,n,o,i,a));return r.offset=[-22,-28],r.prepareSprite(),r.sprite.sortOrder=r.controller.levelView.yToIndex(r.position.y),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,i),o(l,[{key:"getFrameForDirection",value:function(){switch(this.facing){case a.North:return"Boat_05";case a.South:return"Boat_01";case a.East:return"Boat_07";case a.West:return"Boat_03"}}},{key:"prepareSprite",value:function(){var e=this.controller.levelView.actionGroup,t=this.getFrameForDirection();this.sprite=e.create(0,0,"player"+this.controller.player.name,t),this.sprite.x=this.offset[0]+40*this.position.x,this.sprite.y=this.offset[1]+40*this.position.y,l.addBobTween(this.game,this.sprite)}}],[{key:"addBobTween",value:function(e,t){return e.add.tween(t).to({y:"3"},1e3,Phaser.Easing.Sinusoidal.InOut,!0,0,-1,!0)}}]),l}()},function(e,t,n){"use strict";var o=n(12),i=n(1),a=n(5),r=n(7);e.exports={GameController:o,FacingDirection:i,EventType:a,utils:r}},function(e,t,n){"use strict";var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,i=!1,a=void 0;try{for(var r,l=e[Symbol.iterator]();!(o=(r=l.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n(8),T=n(4),p=n(5),s=n(1),c=n(3),u=n(13),d=n(18),h=n(20),f=n(34),g=n(7).convertNameToEntity,m=n(35),o=function(){function o(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.DEBUG=e.debug,window.PhaserGlobal={disableAudio:!0,disableWebAudio:!0,hideBanner:!this.DEBUG},this.codeOrgAPI=m.get(this);var n=e.Phaser;this.game=new n.Game({forceSetTimeOut:e.forceSetTimeOut,width:400,height:400,renderer:n.AUTO,parent:e.containerId,state:"earlyLoad",preserveDrawingBuffer:!0}),this.specialLevelType=null,this.queue=new l(this),this.OnCompleteCallback=null,this.assetRoot=e.assetRoot,this.audioPlayer=e.audioPlayer,this.afterAssetsLoaded=e.afterAssetsLoaded,this.assetLoader=new f(this),this.earlyLoadAssetPacks=e.earlyLoadAssetPacks||[],this.earlyLoadNiceToHaveAssetPacks=e.earlyLoadNiceToHaveAssetPacks||[],this.resettableTimers=[],this.timeouts=[],this.timeout=0,this.initializeCommandRecord(),this.score=0,this.useScore=!1,this.scoreText=null,this.onScoreUpdate=e.onScoreUpdate,this.events=[],this.assumedSlowMotion=1.5,this.initialSlowMotion=e.customSlowMotion||this.assumedSlowMotion,this.tweenTimeScale=1.5/this.initialSlowMotion,this.playerDelayFactor=1,this.dayNightCycle=!1,this.player=null,this.agent=null,this.timerSprite=null,this.game.state.add("earlyLoad",{preload:function(){t.game.load.resetLocked=!0,t.assetLoader.loadPacks(t.earlyLoadAssetPacks)},create:function(){t.assetLoader.loadPacks(t.earlyLoadNiceToHaveAssetPacks),t.game.load.start()}}),this.game.state.add("levelRunner",{preload:this.preload.bind(this),create:this.create.bind(this),update:this.update.bind(this),render:this.render.bind(this)})}return a(o,[{key:"getIsDirectPlayerControl",value:function(){return this.levelData.isEventLevel||this.levelData.isAgentLevel}},{key:"loadLevel",value:function(e){this.levelData=Object.freeze(e),this.levelEntity=new h(this),this.levelModel=new u(this.levelData,this),this.levelView=new d(this),this.specialLevelType=e.specialLevelType,this.timeout=e.levelVerificationTimeout,void 0!==e.useScore&&(this.useScore=e.useScore),this.timeoutResult=e.timeoutResult,this.onDayCallback=e.onDayCallback,this.onNightCallback=e.onNightCallback,this.game.state.start("levelRunner")}},{key:"reset",value:function(){var t=this;this.dayNightCycle=!1,this.queue.reset(),this.levelEntity.reset(),this.levelModel.reset(),this.levelView.reset(this.levelModel),this.levelEntity.loadData(this.levelData),this.player=this.levelModel.player,this.agent=this.levelModel.agent,this.resettableTimers.forEach(function(e){e.stop(!0)}),this.timeouts.forEach(function(e){clearTimeout(e)}),this.timerSprite&&this.timerSprite.kill(),this.timerSprite=null,this.timeouts=[],this.resettableTimers.length=0,this.events.length=0,this.score=0,this.useScore&&this.updateScore(),this.getIsDirectPlayerControl()||this.events.push(function(e){e.eventType===p.WhenUsed&&"sheep"===e.targetType&&t.codeOrgAPI.drop(null,"wool",e.targetIdentifier),e.eventType===p.WhenTouched&&"creeper"===e.targetType&&(t.codeOrgAPI.flashEntity(null,e.targetIdentifier),t.codeOrgAPI.explodeEntity(null,e.targetIdentifier))}),this.initializeCommandRecord()}},{key:"preload",value:function(){this.game.load.resetLocked=!0,this.game.time.advancedTiming=this.DEBUG,this.game.stage.disableVisibilityChange=!0,this.assetLoader.loadPacks(this.levelData.assetPacks.beforeLoad)}},{key:"create",value:function(){var e=this;this.levelView.create(this.levelModel),this.game.time.slowMotion=this.initialSlowMotion,this.addCheatKeys(),this.assetLoader.loadPacks(this.levelData.assetPacks.afterLoad),this.game.load.image("timer",this.assetRoot+"images/placeholderTimer.png"),this.game.load.onLoadComplete.addOnce(function(){e.afterAssetsLoaded&&e.afterAssetsLoaded()}),this.levelEntity.loadData(this.levelData),this.game.load.start()}},{key:"run",value:function(){var e=this;this.events.forEach(function(e){return e({eventType:p.WhenRun,targetIdentifier:void 0})});var t=!0,n=!1,o=void 0;try{for(var i,a=this.levelEntity.entityMap[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var r=i.value[1];this.events.forEach(function(e){return e({eventType:p.WhenSpawned,targetType:r.type,targetIdentifier:r.identifier})}),r.queue.begin()}}catch(e){n=!0,o=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw o}}if(!isNaN(this.timeout)&&0<this.timeout){this.timerSprite=this.game.add.sprite(-50,390,"timer");var l=this.levelView.addResettableTween(this.timerSprite).to({x:-450,alpha:.5},this.timeout,Phaser.Easing.Linear.None);l.onComplete.add(function(){e.endLevel(e.timeoutResult(e.levelModel))}),l.start()}}},{key:"followingPlayer",value:function(){return!!this.levelData.gridDimensions&&!this.checkMinecartLevelEndAnimation()}},{key:"update",value:function(){this.queue.tick(),this.levelEntity.tick(),this.levelModel.usePlayer&&this.player.updateMovement(),this.levelModel.usingAgent&&this.agent.updateMovement(),this.levelView.update(),(this.getIsDirectPlayerControl()||1<this.player.queue.state)&&this.checkSolution()}},{key:"addCheatKeys",value:function(){var e,n=this;if(this.levelModel.usePlayer){var o=(r(e={},Phaser.Keyboard.UP,s.North),r(e,Phaser.Keyboard.W,s.North),r(e,Phaser.Keyboard.RIGHT,s.East),r(e,Phaser.Keyboard.D,s.East),r(e,Phaser.Keyboard.DOWN,s.South),r(e,Phaser.Keyboard.S,s.South),r(e,Phaser.Keyboard.LEFT,s.West),r(e,Phaser.Keyboard.A,s.West),r(e,Phaser.Keyboard.SPACEBAR,-2),e),i=function(){return null!==document.activeElement&&["INPUT","TEXTAREA"].includes(document.activeElement.tagName)};Object.keys(o).forEach(function(e){var t=o[e];n.game.input.keyboard.addKey(e).onDown.add(function(){i()||(n.player.movementState=t,n.player.updateMovement())}),n.game.input.keyboard.addKey(e).onUp.add(function(){i()||(n.player.movementState===t&&(n.player.movementState=-1),n.player.updateMovement())}),n.game.input.keyboard.removeKeyCapture(e)})}}},{key:"handleEndState",value:function(e){this.OnCompleteCallback&&(this.OnCompleteCallback(e,this.levelModel),this.OnCompleteCallback=null)}},{key:"render",value:function(){this.DEBUG&&this.game.debug.text(this.game.time.fps||"--",2,14,"#00ff00"),this.levelView.render()}},{key:"scaleFromOriginal",value:function(){var e=this.levelData.gridDimensions||[10,10],t=i(e,2);return[t[0]/10,t[1]/10]}},{key:"getScreenshot",value:function(){return this.game.canvas.toDataURL("image/png")}},{key:"initializeCommandRecord",value:function(){var e=["moveAway","moveToward","moveForward","turn","turnRandom","explode","wait","flash","drop","spawn","destroy","playSound","attack","addScore"];this.commandRecord=new Map,this.repeatCommandRecord=new Map,this.isRepeat=!1;for(var t=0;t<e.length;t++)this.commandRecord.set(e[t],new Map),this.commandRecord.get(e[t]).set("count",0),this.repeatCommandRecord.set(e[t],new Map),this.repeatCommandRecord.get(e[t]).set("count",0)}},{key:"startPushRepeatCommand",value:function(){this.isRepeat=!0}},{key:"endPushRepeatCommand",value:function(){this.isRepeat=!1}},{key:"addCommandRecord",value:function(e,t,n){var o=n?this.repeatCommandRecord:this.commandRecord;if(o.has(e)){var i=o.get(e);if(i.set("count",i.get("count")+1),i.has(t)?i.set(t,i.get(t)+1):i.set(t,1),this.DEBUG){var a=n?"Repeat ":"Command :";console.log(a+e+" executed in mob type : "+t+" updated count : "+i.get(t))}}}},{key:"getCommandCount",value:function(e,t,n){var o=n?this.repeatCommandRecord:this.commandRecord;if(o.has(e)){var i=o.get(e);return void 0===t?i.get("count"):i.has(t)?i.get(t):0}return 0}},{key:"getEntity",value:function(e){void 0===e&&(e="Player");var t=this.levelEntity.entityMap.get(e);return void 0===t&&console.log("Debug GetEntity: there is no entity : "+e+"\n"),t}},{key:"getEntities",value:function(e){return this.levelEntity.getEntitiesOfType(e)}},{key:"isType",value:function(e){return"string"==typeof e&&"Player"!==e&&"PlayerAgent"!==e}},{key:"printErrorMsg",value:function(e){this.DEBUG&&this.game.debug.text(e)}},{key:"moveAway",value:function(s,n){var c=this,o=s.target;if(void 0===o){var e=this.levelEntity.entityMap,t=function(){var e=p[1],t=new T(c,function(){},function(){c.moveAway(t,n)},e.identifier);e.addCommand(t,s.repeat)},i=!0,a=!1,r=void 0;try{for(var l,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var p=l.value;t()}}catch(s){a=!0,r=s}finally{try{!i&&u.return&&u.return()}finally{if(a)throw r}}s.succeeded()}else{var d=this.isType(o),h=this.isType(n);if(o===n)return this.printErrorMsg("Debug MoveAway: Can't move away entity from itself\n"),void s.succeeded();if(d||h)if(d&&!h){var f=this.getEntities(o),g=this.getEntity(n);if(void 0!==g)for(var m=function(){if(f[v].identifier===g.identifier)return"continue";var e=new T(c,function(){},function(){c.moveAway(e,n)},f[v].identifier);f[v].addCommand(e,s.repeat)},v=0;v<f.length;v++)m();s.succeeded()}else if(!d&&h){var _=this.getEntity(o),y=this.getEntities(n);if(0<y.length){for(var k=[Number.MAX_VALUE,-1],b=0;b<y.length;b++)if(_.identifier!==y[b].identifier){var w=_.getDistance(y[b]);w<k[0]&&(k=[w,b])}-1!==k[1]&&_.moveAway(s,y[k[1]])}else s.succeeded()}else!function(){var r=c.getEntities(o),l=c.getEntities(n);if(0<l.length&&0<r.length){for(var e=function(e){for(var t=r[e],n=[Number.MAX_VALUE,-1],o=0;o<l.length;o++)if(l[e].identifier!==t.identifier){var i=t.getDistance(l[o]);i<n[0]&&(n=[i,o])}if(-1!==n){var a=new T(c,function(){},function(){c.moveAway(a,l[n[1]].identifier)},t.identifier);t.addCommand(a,s.repeat)}else s.succeeded()},t=0;t<r.length;t++)e(t);s.succeeded()}}();else{var S=this.getEntity(o),C=this.getEntity(n);if(S===C)return void s.succeeded();S.moveAway(s,C)}}}},{key:"moveToward",value:function(s,n){var c=this,o=s.target;if(void 0===o){var e=this.levelEntity.entityMap,t=function(){var e=p[1],t=new T(c,function(){},function(){c.moveToward(t,n)},e.identifier);e.addCommand(t,s.repeat)},i=!0,a=!1,r=void 0;try{for(var l,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var p=l.value;t()}}catch(s){a=!0,r=s}finally{try{!i&&u.return&&u.return()}finally{if(a)throw r}}s.succeeded()}else{var d=this.isType(o),h=this.isType(n);if(o===n)return void s.succeeded();if(d||h)if(d&&!h){var f=this.getEntities(o),g=this.getEntity(n);if(void 0!==g){for(var m=function(e){if(f[e].identifier===g.identifier)return"continue";var t=new T(c,function(){},function(){c.moveToward(t,n)},f[e].identifier);f[e].addCommand(t,s.repeat)},v=0;v<f.length;v++)m(v);s.succeeded()}}else if(!d&&h){var _=this.getEntity(o),y=this.getEntities(n);if(0<y.length){var k=[Number.MAX_VALUE,-1];for(v=0;v<y.length;v++)if(y[v].identifier!==_.identifier){var b=_.getDistance(y[v]);b<k[0]&&(k=[b,v])}-1!==k[1]?_.moveToward(s,y[k[1]]):s.succeeded()}else s.succeeded()}else!function(){var r=c.getEntities(o),l=c.getEntities(n);if(0<l.length&&0<r.length){for(var e=function(e){for(var t=r[e],n=[Number.MAX_VALUE,-1],o=0;o<l.length;o++)if(l[e].identifier!==t.identifier){var i=t.getDistance(l[o]);i<n[0]&&(n=[i,o])}if(-1!==n[1]){var a=new T(c,function(){},function(){c.moveToward(a,l[n[1]].identifier)},t.identifier);t.addCommand(a,s.repeat)}},t=0;t<r.length;t++)e(t);s.succeeded()}}();else{var w=this.getEntity(o),S=this.getEntity(n);w.moveToward(s,S)}}}},{key:"positionEquivalence",value:function(e,t){return e[0]===t[0]&&e[1]===t[1]}},{key:"execute",value:function(o,i){for(var e=arguments.length,a=Array(2<e?e-2:0),t=2;t<e;t++)a[t-2]=arguments[t];var r=this,n=o.target;if(this.isType(n)){for(var l=this.getEntities(n),s=function(e){var t=new T(r,function(){},function(){r.execute.apply(r,[t,i].concat(a))},l[e].identifier);l[e].addCommand(t,o.repeat)},c=0;c<l.length;c++)s(c);o.succeeded()}else if(void 0===n){var u=this.levelEntity.entityMap,p=function(e){var t=e[1],n=new T(r,function(){},function(){r.execute.apply(r,[n,i].concat(a))},t.identifier);t.addCommand(n,o.repeat)},d=!0,h=!1,f=void 0;try{for(var g,m=u[Symbol.iterator]();!(d=(g=m.next()).done);d=!0)p(g.value)}catch(o){h=!0,f=o}finally{try{!d&&m.return&&m.return()}finally{if(h)throw f}}o.succeeded()}else{var v=this.getEntity(n);v[i].apply(v,[o].concat(a))}}},{key:"moveForward",value:function(e){this.execute(e,"moveForward")}},{key:"moveBackward",value:function(e){this.execute(e,"moveBackward")}},{key:"moveDirection",value:function(e,t){var n=this.levelModel.player;this.levelModel.shouldRide(t)?(n.handleGetOnRails(t),e.succeeded()):this.execute(e,"moveDirection",t)}},{key:"turn",value:function(e,t){this.execute(e,"turn",t)}},{key:"turnRandom",value:function(e){this.execute(e,"turnRandom")}},{key:"flashEntity",value:function(o){var i=this,e=o.target;if(this.isType(e)){for(var n=this.getEntities(e),t=function(e){var t=new T(i,function(){},function(){i.flashEntity(t)},n[e].identifier);n[e].addCommand(t,o.repeat)},a=0;a<n.length;a++)t(a);o.succeeded()}else if(void 0===e){var r=this.levelEntity.entityMap,l=function(e){var t=e[1],n=new T(i,function(){},function(){i.flashEntity(n)},t.identifier);t.addCommand(n,o.repeat)},s=!0,c=!1,u=void 0;try{for(var p,d=r[Symbol.iterator]();!(s=(p=d.next()).done);s=!0)l(p.value)}catch(o){c=!0,u=o}finally{try{!s&&d.return&&d.return()}finally{if(c)throw u}}o.succeeded()}else{var h=this.getEntity(e),f=this.levelView.flashSpriteToWhite(h.sprite);this.addCommandRecord("flash",h.type,o.repeat),this.delayBy(f,function(){o.succeeded()})}}},{key:"explodeEntity",value:function(o){var i=this,e=o.target;if(this.isType(e)){for(var n=this.getEntities(e),t=function(e){var t=new T(i,function(){},function(){i.explodeEntity(t)},n[e].identifier);n[e].addCommand(t,o.repeat)},a=0;a<n.length;a++)t(a);o.succeeded()}else{if(void 0===e){var r=this.levelEntity.entityMap,l=function(e){var t=e[1],n=new T(i,function(){},function(){i.explodeEntity(n)},t.identifier);t.addCommand(n,o.repeat)},s=!0,c=!1,u=void 0;try{for(var p,d=r[Symbol.iterator]();!(s=(p=d.next()).done);s=!0)l(p.value)}catch(o){c=!0,u=o}finally{try{!s&&d.return&&d.return()}finally{if(c)throw u}}o.succeeded()}else{var h=this.getEntity(e);this.levelView.playExplosionCloudAnimation(h.position),this.addCommandRecord("explode",h.type,o.repeat),this.levelView.audioPlayer.play("explode");var f=this.levelEntity.entityMap,g=!0,m=!1,v=void 0;try{for(var _,y=f[Symbol.iterator]();!(g=(_=y.next()).done);g=!0)for(var k=_.value[1],b=-1;b<=1;b++)for(var w=-1;w<=1;w++)if(0!==b||0!==w){var S=[h.position[0]+b,h.position[1]+w];this.destroyBlockWithoutPlayerInteraction(S),k.position[0]===h.position[0]+b&&k.position[1]===h.position[1]+w&&k.blowUp(o,h.position)}}catch(o){m=!0,v=o}finally{try{!g&&y.return&&y.return()}finally{if(m)throw v}}var C=new T(this,function(){},function(){i.destroyEntity(C,h.identifier)},h.identifier);h.queue.startPushHighPriorityCommands(),h.addCommand(C,o.repeat),h.queue.endPushHighPriorityCommands()}o.succeeded(),this.updateFowPlane(),this.updateShadingPlane()}}},{key:"wait",value:function(n,o){var i=this,e=n.target;if(this.isType(e)){for(var a=this.getEntities(e),t=function(e){var t=new T(i,function(){},function(){i.wait(t,o)},a[e].identifier);a[e].addCommand(t,n.repeat)},r=0;r<a.length;r++)t(r);n.succeeded()}else{var l=this.getEntity(e);this.addCommandRecord("wait",l.type,n.repeat),setTimeout(function(){n.succeeded()},1e3*o/this.tweenTimeScale)}}},{key:"spawnEntity",value:function(e,t,n){this.addCommandRecord("spawn",t,e.repeat);var o=this.levelEntity.spawnEntity(t,n);null!==o&&this.events.forEach(function(e){return e({eventType:p.WhenSpawned,targetType:t,targetIdentifier:o.identifier})}),e.succeeded()}},{key:"spawnEntityAt",value:function(e,t,n,o,i){var a=this.levelEntity.spawnEntityAt(t,n,o,i);null!==a&&this.events.forEach(function(e){return e({eventType:p.WhenSpawned,targetType:t,targetIdentifier:a.identifier})}),e.succeeded()}},{key:"destroyEntity",value:function(o,e){var i=this;if(this.isType(e)){for(var a=this.getEntities(e),t=function(e){var t=a[e],n=new T(i,function(){},function(){i.destroyEntity(n,t.identifier)},t.identifier);t.addCommand(n,o.repeat)},n=0;n<a.length;n++)t(n);o.succeeded()}else if(void 0===e){var r=this.levelEntity.entityMap,l=function(e){var t=e[1],n=new T(i,function(){},function(){i.destroyEntity(n,t.identifier)},t.identifier);t.addCommand(n,o.repeat)},s=!0,c=!1,u=void 0;try{for(var p,d=r[Symbol.iterator]();!(s=(p=d.next()).done);s=!0)l(p.value)}catch(o){c=!0,u=o}finally{try{!s&&d.return&&d.return()}finally{if(c)throw u}}o.succeeded()}else{this.addCommandRecord("destroy",this.type,o.repeat);var h=this.getEntity(e);void 0!==h?(h.healthPoint=1,h.takeDamage(o)):o.succeeded()}}},{key:"drop",value:function(o,i){var a=this,e=o.target;if(this.isType(e)){for(var n=this.getEntities(e),t=function(e){var t=new T(a,function(){},function(){a.drop(t,i)},n[e].identifier);n[e].addCommand(t,o.repeat)},r=0;r<n.length;r++)t(r);o.succeeded()}else if(void 0===e){var l=this.levelEntity.entityMap,s=function(e){var t=e[1],n=new T(a,function(){},function(){a.drop(n,i)},t.identifier);t.addCommand(n,o.repeat)},c=!0,u=!1,p=void 0;try{for(var d,h=l[Symbol.iterator]();!(c=(d=h.next()).done);c=!0)s(d.value)}catch(o){u=!0,p=o}finally{try{!c&&h.return&&h.return()}finally{if(u)throw p}}o.succeeded()}else this.getEntity(e).drop(o,i)}},{key:"attack",value:function(o){var i=this,e=o.target;if(this.isType(e)){for(var n=this.getEntities(e),t=function(e){var t=new T(i,function(){},function(){i.attack(t)},n[e].identifier);n[e].addCommand(t,o.repeat)},a=0;a<n.length;a++)t(a);o.succeeded()}else if(void 0===e){var r=this.levelEntity.entityMap,l=function(e){var t=e[1],n=new T(i,function(){},function(){i.attack(n)},t.identifier);t.addCommand(n,o.repeat)},s=!0,c=!1,u=void 0;try{for(var p,d=r[Symbol.iterator]();!(s=(p=d.next()).done);s=!0)l(p.value)}catch(o){c=!0,u=o}finally{try{!s&&d.return&&d.return()}finally{if(c)throw u}}o.succeeded()}else{var h=this.getEntity(e);"Player"===h.identifier?(this.codeOrgAPI.destroyBlock(function(){},h.identifier),o.succeeded()):h.attack(o)}}},{key:"playSound",value:function(e,t){this.addCommandRecord("playSound",void 0,e.repeat),this.levelView.audioPlayer.play(t),e.succeeded()}},{key:"use",value:function(o){var i=this,a=this.levelModel.player,t=this.levelModel.getMoveForwardPosition(a),r=this.levelEntity.getEntityAt(t),n=this.levelModel.actionPlane.getBlockAt(t),e=void 0!==n&&"door"===n.blockType;null!==r&&r!==this.agent?(this.levelView.setSelectionIndicatorPosition(t[0],t[1]),this.levelView.onAnimationEnd(this.levelView.playPlayerAnimation("punch",a.position,a.facing,!1),function(){r.queue.startPushHighPriorityCommands();var e=new T(i,function(){},function(){r.use(e,a)},r.identifier);if(!i.levelEntity.isFriendlyEntity(r.type)){var t=a.facing,n=new T(i,function(){},function(){r.pushBack(n,t,150)},r.identifier);r.addCommand(n)}r.addCommand(e),r.queue.endPushHighPriorityCommands(),i.levelView.playPlayerAnimation("idle",a.position,a.facing,!1),i.getIsDirectPlayerControl()?i.delayPlayerMoveBy(0,0,function(){o.succeeded()}):o.waitForOtherQueue=!0,setTimeout(function(){i.levelView.setSelectionIndicatorPosition(a.position[0],a.position[1])},0)})):e?(this.levelView.setSelectionIndicatorPosition(t[0],t[1]),this.levelView.onAnimationEnd(this.levelView.playPlayerAnimation("punch",a.position,a.facing,!1),function(){i.audioPlayer.play("doorOpen");var e=!n.isWalkable;i.levelView.playDoorAnimation(t,e,function(){n.isWalkable=!n.isWalkable,i.levelView.playIdleAnimation(a.position,a.facing,a.isOnBlock),i.levelView.setSelectionIndicatorPosition(a.position[0],a.position[1]),o.succeeded()})})):n&&n.isRail?(this.levelView.playTrack(t,a.facing,!0,a,null),o.succeeded()):this.levelView.playPunchDestroyAirAnimation(a.position,a.facing,this.levelModel.getMoveForwardPosition(),function(){i.levelView.setSelectionIndicatorPosition(a.position[0],a.position[1]),i.levelView.playIdleAnimation(a.position,a.facing,a.isOnBlock),i.delayPlayerMoveBy(0,0,function(){o.succeeded()})})}},{key:"destroyBlock",value:function(e){var t=this,n=this.getEntity(e.target);if(this.levelModel.canDestroyBlockForward(n)){var o=this.levelModel.actionPlane.getBlockAt(this.levelModel.getMoveForwardPosition(n));if(null!==o){var i=this.levelModel.getMoveForwardPosition(n),a=o.blockType;if(o.isDestroyable){switch(a){case"logAcacia":case"treeAcacia":a="planksAcacia";break;case"logBirch":case"treeBirch":a="planksBirch";break;case"logJungle":case"treeJungle":a="planksJungle";break;case"logOak":case"treeOak":a="planksOak";break;case"logSpruce":case"treeSpruce":a="planksSpruce"}this.levelView.playDestroyBlockAnimation(n.position,n.facing,i,a,n,function(){e.succeeded()})}else if(o.isUsable)switch(a){case"sheep":this.levelView.playShearSheepAnimation(n.position,n.facing,i,a,function(){e.succeeded()});break;default:e.succeeded()}else e.succeeded()}}else this.levelView.playPunchDestroyAirAnimation(n.position,n.facing,this.levelModel.getMoveForwardPosition(n),function(){t.levelView.setSelectionIndicatorPosition(n.position[0],n.position[1]),t.levelView.playIdleAnimation(n.position,n.facing,n.isOnBlock,n),t.delayPlayerMoveBy(0,0,function(){e.succeeded()})},n)}},{key:"destroyBlockWithoutPlayerInteraction",value:function(e){if(this.levelModel.inBounds(e)){var t=this.levelModel.actionPlane.getBlockAt(e);if(null!=t){var n=e,o=t.blockType;if(t.isDestroyable){switch(o){case"logAcacia":case"treeAcacia":o="planksAcacia";break;case"logBirch":case"treeBirch":o="planksBirch";break;case"logJungle":case"treeJungle":o="planksJungle";break;case"logOak":case"treeOak":o="planksOak";break;case"logSpruce":case"treeSpruce":case"logSpruceSnowy":case"treeSpruceSnowy":o="planksSpruce"}this.levelView.destroyBlockWithoutPlayerInteraction(n),this.levelView.playExplosionAnimation(this.levelModel.player.position,this.levelModel.player.facing,e,o,function(){},!1),this.levelView.createMiniBlock(n[0],n[1],o),this.updateFowPlane(),this.updateShadingPlane()}else if(t.isUsable)switch(o){case"sheep":this.levelView.playShearAnimation(this.levelModel.player.position,this.levelModel.player.facing,e,o,function(){})}}this.levelModel.destroyBlock(e)}}},{key:"checkTntAnimation",value:function(){return"freeplay"===this.specialLevelType}},{key:"checkMinecartLevelEndAnimation",value:function(){return"minecart"===this.specialLevelType}},{key:"checkHouseBuiltEndAnimation",value:function(){return"houseBuild"===this.specialLevelType}},{key:"checkAgentSpawn",value:function(){return"agentSpawn"===this.specialLevelType}},{key:"placeBlock",value:function(n,o){var i=this,a=this.getEntity(n.target),r=a.position,e=this.levelModel.actionPlane.getBlockAt(r),t=e.blockType;if(this.levelModel.canPlaceBlock(a,e))if(""!==t&&this.levelModel.destroyBlock(r),"cropWheat"!==o||"farmlandWet"===this.levelModel.groundPlane.getBlockAt(a.position).blockType)this.levelModel.player.updateHidingBlock(a.position),this.checkMinecartLevelEndAnimation()&&"rail"===o&&(o=a.position[1]<7?"railsUnpoweredVertical":"rails"),this.levelView.playPlaceBlockAnimation(a.position,a.facing,o,t,a,function(){var e,t=g(o,r.x,r.y);t?(e=i.levelEntity).spawnEntityAt.apply(e,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t)):(i.levelModel.placeBlock(o,a),i.updateFowPlane(),i.updateShadingPlane()),i.delayBy(200,function(){i.levelView.playIdleAnimation(a.position,a.facing,!1,a)}),i.delayPlayerMoveBy(200,400,function(){n.succeeded()})});else var l=this.levelView.playPlayerAnimation("jumpUp",a.position,a.facing,!1,a).onLoop.add(function(){i.levelView.playIdleAnimation(a.position,a.facing,!1,a),l.detach(),i.delayBy(800,function(){return n.succeeded()})},this);else n.succeeded()}},{key:"setPlayerActionDelayByQueueLength",value:function(){if(this.levelModel.usePlayer){var e=this.levelModel.player.queue.getLength(),t=Math.min(Math.max(e-10,0),10);this.playerDelayFactor=1-t/10}}},{key:"delayBy",value:function(e,t){var n=this.game.time.create(!0);n.add(this.originalMsToScaled(e),t,this),n.start(),this.resettableTimers.push(n)}},{key:"delayPlayerMoveBy",value:function(e,t,n){this.delayBy(Math.max(e,t*this.playerDelayFactor),n)}},{key:"originalMsToScaled",value:function(e){return e/this.assumedSlowMotion*this.game.time.slowMotion}},{key:"originalFpsToScaled",value:function(e){return e*this.assumedSlowMotion/this.game.time.slowMotion}},{key:"placeBlockForward",value:function(e,t){this.placeBlockDirection(e,t,0)}},{key:"placeBlockDirection",value:function(e,t,n){var o,i,a=this,r=this.getEntity(e.target),l=function(){};this.levelModel.canPlaceBlockDirection(t,r,n)?(o=this.levelModel.getMoveDirectionPosition(r,n),i=this.levelModel.getPlaneToPlaceOn(o,r,t),this.levelModel.isBlockOfTypeOnPlane(o,"lava",i)&&(l=function(){return a.levelView.audioPlayer.play("fizz")}),this.levelView.playPlaceBlockInFrontAnimation(r,r.position,r.facing,o,function(){a.levelModel.placeBlockDirection(t,i,r,n),a.levelView.refreshGroundGroup(),a.updateFowPlane(),a.updateShadingPlane(),l(),a.delayBy(200,function(){a.levelView.playIdleAnimation(r.position,r.facing,!1,r)}),a.delayPlayerMoveBy(200,400,function(){e.succeeded()})})):this.levelView.playPunchAirAnimation(r.position,r.facing,r.position,function(){a.levelView.playIdleAnimation(r.position,r.facing,!1,r),e.succeeded()},r)}},{key:"checkSolution",value:function(){var o=this;if(this.attemptRunning&&!this.resultReported)if(this.levelModel.isSolved()){var i=this.levelModel.player;if(this.checkHouseBuiltEndAnimation()){this.resultReported=!0;var e=this.levelModel.getHouseBottomRight(),t=new c(e.x-1,e.y+2),n=new c(e.x,e.y),a=new c(e.x-1,e.y+1);this.levelModel.moveTo(t),this.levelView.playSuccessHouseBuiltAnimation(i.position,i.facing,i.isOnBlock,this.levelModel.houseGroundToFloorBlocks(e),[n,a],function(){o.endLevel(!0)},function(){o.levelModel.destroyBlock(n),o.levelModel.destroyBlock(a),o.updateFowPlane(),o.updateShadingPlane()})}else if(this.checkMinecartLevelEndAnimation())this.resultReported=!0,this.levelView.playMinecartAnimation(i.isOnBlock,function(){o.handleEndState(!0)});else if(this.checkAgentSpawn())this.resultReported=!0,this.levelView.playLevelEndAnimation(i.position,i.facing,i.isOnBlock).onComplete.add(function(){o.levelModel.spawnAgent(null,new c(3,4),2),o.levelView.agent=o.agent,o.levelView.resetEntity(o.agent),o.updateFowPlane(),o.updateShadingPlane(),o.delayBy(200,function(){o.endLevel(!0)})});else if(this.checkTntAnimation()){this.resultReported=!0,this.levelView.scaleShowWholeWorld(function(){});var r=this.levelModel.getTnt(),l=i.isOnBlock;this.levelView.playDestroyTntAnimation(i.position,i.facing,i.isOnBlock,this.levelModel.getTnt(),this.levelModel.shadingPlane,function(){for(var e in r){r[e].x===o.levelModel.player.position.x&&r[e].y===o.levelModel.player.position.y&&(o.levelModel.player.isOnBlock=!1);var t=o.levelModel.getAllBorderingPositionNotOfType(r[e],"tnt");o.levelModel.destroyBlock(r[e]);for(var n=1;n<t.length;++n)t[n][0]&&o.destroyBlockWithoutPlayerInteraction(t[n][1])}!i.isOnBlock&&l&&o.levelView.playPlayerJumpDownVerticalAnimation(i.facing,i.position),o.updateFowPlane(),o.updateShadingPlane(),o.delayBy(200,function(){o.levelView.playSuccessAnimation(i.position,i.facing,i.isOnBlock,function(){o.endLevel(!0)})})})}else this.endLevel(!0)}else!this.levelModel.isFailed()&&(this.getIsDirectPlayerControl()||this.levelData.isAquaticLevel)||this.endLevel(!1)}},{key:"endLevel",value:function(e){var t=this;if(!this.levelModel.usePlayer)return e?this.levelView.audioPlayer.play("success"):this.levelView.audioPlayer.play("failure"),this.resultReported=!0,void this.handleEndState(e);if(e){var n=this.levelModel.player,o=new T(this,function(){},function(){t.levelView.playSuccessAnimation(n.position,n.facing,n.isOnBlock,function(){t.handleEndState(!0)})},n.identifier);n.queue.startPushHighPriorityCommands(),n.addCommand(o,this.isRepeat),n.queue.endPushHighPriorityCommands()}else{var i=this.levelModel.player,a=new T(this,function(){},function(){t.destroyEntity(a,i.identifier)},i.identifier);i.queue.startPushHighPriorityCommands(),i.addCommand(a,this.isRepeat),i.queue.endPushHighPriorityCommands()}}},{key:"addScore",value:function(e,t){this.addCommandRecord("addScore",void 0,e.repeat),this.useScore&&(this.score+=t,this.updateScore()),e.succeeded()}},{key:"updateScore",value:function(){this.onScoreUpdate&&this.onScoreUpdate(this.score)}},{key:"isPathAhead",value:function(e){return!!this.player.isOnBlock||this.levelModel.isForwardBlockOfType(e)}},{key:"addCommand",value:function(e){void 0!==e.target?this.getEntity(e.target).addCommand(e,this.isRepeat):(this.queue.addCommand(e,this.isRepeat),this.queue.begin())}},{key:"addGlobalCommand",value:function(e){var t=this.levelEntity.entityMap.get(e.target);void 0!==t?t.addCommand(e,this.isRepeat):(this.queue.addCommand(e,this.isRepeat),this.queue.begin())}},{key:"startDay",value:function(e){var n=this;if(this.levelModel.isDaytime)null!=e&&e.succeeded(),this.DEBUG&&this.game.debug.text("Impossible to start day since it's already day time\n");else{void 0!==this.onDayCallback&&this.onDayCallback(),this.levelModel.isDaytime=!0,this.levelModel.clearFow(),this.levelView.updateFowGroup(this.levelModel.fowPlane),this.events.forEach(function(e){return e({eventType:p.WhenDayGlobal})});var t=this.levelEntity.entityMap,o=function(e){var t=e[1];n.events.forEach(function(e){return e({eventType:p.WhenDay,targetIdentifier:t.identifier,targetType:t.type})})},i=!0,a=!1,r=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)o(l.value)}catch(e){a=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}for(var c=this.levelEntity.getEntitiesOfType("zombie"),u=0;u<c.length;u++)c[u].setBurn(!0);null!=e&&e.succeeded()}}},{key:"startNight",value:function(e){var n=this;if(this.levelModel.isDaytime){void 0!==this.onNightCallback&&this.onNightCallback(),this.levelModel.isDaytime=!1,this.levelModel.computeFowPlane(),this.levelView.updateFowGroup(this.levelModel.fowPlane),this.events.forEach(function(e){return e({eventType:p.WhenNightGlobal})});var t=this.levelEntity.entityMap,o=function(e){var t=e[1];n.events.forEach(function(e){return e({eventType:p.WhenNight,targetIdentifier:t.identifier,targetType:t.type})})},i=!0,a=!1,r=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)o(l.value)}catch(e){a=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}for(var c=this.levelEntity.getEntitiesOfType("zombie"),u=0;u<c.length;u++)c[u].setBurn(!1);null!=e&&e.succeeded()}else null!=e&&e.succeeded(),this.DEBUG&&this.game.debug.text("Impossible to start night since it's already night time\n")}},{key:"initiateDayNightCycle",value:function(e,t,n){var o=this;"day"===n||"Day"===n?this.timeouts.push(setTimeout(function(){o.startDay(null),o.setDayNightCycle(t,"night")},1e3*e)):"night"!==n&&"Night"!==n||this.timeouts.push(setTimeout(function(){o.startNight(null),o.setDayNightCycle(t,"day")},1e3*e))}},{key:"setDayNightCycle",value:function(e,t){var n=this;this.dayNightCycle&&("day"===t||"Day"===t?this.timeouts.push(setTimeout(function(){n.dayNightCycle&&(n.startDay(null),n.setDayNightCycle(e,"night"))},1e3*e)):"night"!==t&&"Night"!==t||this.timeouts.push(setTimeout(function(){n.dayNightCycle&&(n.startNight(null),n.setDayNightCycle(e,"day"))},1e3*e)))}},{key:"arrowDown",value:function(e){this.levelModel.usePlayer&&(this.player.movementState=e,this.player.updateMovement())}},{key:"arrowUp",value:function(e){this.levelModel.usePlayer&&(this.player.movementState===e&&(this.player.movementState=-1),this.player.updateMovement())}},{key:"clickDown",value:function(){this.levelModel.usePlayer&&(this.player.movementState=-2,this.player.updateMovement())}},{key:"clickUp",value:function(){this.levelModel.usePlayer&&(-2===this.player.movementState&&(this.player.movementState=-1),this.player.updateMovement())}},{key:"updateFowPlane",value:function(){this.levelModel.computeFowPlane(),this.levelView.updateFowGroup(this.levelModel.fowPlane)}},{key:"updateShadingPlane",value:function(){this.levelModel.computeShadingPlane(),this.levelView.updateShadingGroup(this.levelModel.shadingPlane)}}]),o}();window.GameController=o,e.exports=o},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=n(14),s=n(6),a=n(1),u=n(3),r=n(16),l=n(17);e.exports=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.planeWidth=e.gridDimensions?e.gridDimensions[0]:10,this.planeHeight=e.gridDimensions?e.gridDimensions[1]:10,this.controller=t,this.player={},this.agent={},this.usingAgent=!1,this.initialLevelData=Object.create(e),this.reset(),this.initialPlayerState=Object.create(this.player),this.initialAgentState=Object.create(this.agent)}return o(n,[{key:"isUnderwater",value:function(){return!!this.getOceanType()}},{key:"getOceanType",value:function(){return this.initialLevelData.ocean}},{key:"isInBoat",value:function(){return this.initialLevelData.boat}},{key:"planeArea",value:function(){return this.planeWidth*this.planeHeight}},{key:"inBounds",value:function(e){var t=e[0],n=e[1];return 0<=t&&t<this.planeWidth&&0<=n&&n<this.planeHeight}},{key:"reset",value:function(){var t=this;this.groundPlane=new i(this.initialLevelData.groundPlane,this.planeWidth,this.planeHeight,this,"groundPlane"),this.groundDecorationPlane=new i(this.initialLevelData.groundDecorationPlane,this.planeWidth,this.planeHeight,this,"decorationPlane"),this.shadingPlane=[],this.actionPlane=new i(this.initialLevelData.actionPlane,this.planeWidth,this.planeHeight,this,"actionPlane"),this.actionPlane.powerRedstone(),this.actionPlane.getAllPositions().forEach(function(e){t.actionPlane.getBlockAt(e).isRedstone&&t.actionPlane.determineRedstoneSprite(e),t.actionPlane.getBlockAt(e).isRail&&t.actionPlane.determineRailType(e)}),this.fluffPlane=new i(this.initialLevelData.fluffPlane,this.planeWidth,this.planeHeight),this.fowPlane=[],this.isDaytime=void 0===this.initialLevelData.isDaytime||this.initialLevelData.isDaytime;var e=Object.create(this.initialLevelData);if(void 0!==this.initialLevelData.usePlayer?this.usePlayer=this.initialLevelData.usePlayer:this.usePlayer=!0,this.usePlayer){var n=u.fromArray(e.playerStartPosition);this.player=new r(this.controller,"Player",n.x,n.y,this.initialLevelData.playerName||"Steve",!this.actionPlane.getBlockAt(n).getIsEmptyOrEntity(),e.playerStartDirection),this.controller.levelEntity.pushEntity(this.player),this.controller.player=this.player,e.useAgent&&this.spawnAgent(e)}!e.useAgent&&this.usingAgent&&this.destroyAgent(),this.computeShadingPlane(),this.computeFowPlane()}},{key:"spawnAgent",value:function(e,t,n){this.usingAgent=!0;var o=void 0!==t?t:u.fromArray(e.agentStartPosition),i=void 0!==n?n:e.agentStartDirection,a=this.actionPlane.getBlockAt(o);this.agent=new l(this.controller,"PlayerAgent",o.x,o.y,"Agent",!a.getIsEmptyOrEntity(),i),this.controller.levelEntity.pushEntity(this.agent),this.controller.agent=this.agent}},{key:"destroyAgent",value:function(){this.controller.agent=void 0,this.controller.levelEntity.destroyEntity(this.agent.identifier),this.agent=void 0,this.usingAgent=!1}},{key:"yToIndex",value:function(e){return e*this.planeWidth}},{key:"isSolved",value:function(){return this.initialLevelData.verificationFunction(this)}},{key:"isFailed",value:function(){return void 0!==this.initialLevelData.failureCheckFunction&&this.initialLevelData.failureCheckFunction(this)}},{key:"getHouseBottomRight",value:function(){return u.fromArray(this.initialLevelData.houseBottomRight)}},{key:"isPlayerNextTo",value:function(t){var n=this;return!!this.usePlayer&&u.getOrthogonalPositions(this.player.position).some(function(e){return n.inBounds(e)&&(n.isBlockOfType(e,t)||n.isEntityOfType(e,t)||n.groundPlane.getBlockAt(e).blockType===t)})}},{key:"isEntityNextTo",value:function(e,t){var n=this;return this.controller.levelEntity.getEntitiesOfType(e).some(function(e){return u.getOrthogonalPositions(e.position).some(function(e){return n.inBounds(e)&&(n.isBlockOfType(e,t)||n.isEntityOfType(e,t)||n.groundPlane.getBlockAt(e).blockType===t)})})}},{key:"isEntityOnBlocktype",value:function(e,t){for(var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,o=this.controller.levelEntity.getEntitiesOfType(e),i=0,a=0;a<o.length;a++){var r=o[a];!this.isBlockOfType(r.position,t)&&this.groundPlane.getBlockAt(r.position).blockType!==t||i++}return n<=i}},{key:"isEntityAt",value:function(e,t){Array.isArray(t)&&(t=u.fromArray(t));for(var n=this.controller.levelEntity.getEntitiesOfType(e),o=0;o<n.length;o++){var i=n[o];if(u.equals(i.position,t))return!0}return!1}},{key:"isEntityTypeRunning",value:function(e){for(var t=this.controller.levelEntity.getEntitiesOfType(e),n=0;n<t.length;n++){var o=t[n],i=!o.queue.isStarted(),a=!o.queue.isFinished();if(i&&0<o.queue.commandList_.length||a)return!0}return!1}},{key:"isEntityDied",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=this.controller.levelEntity.entityDeathCount;return!!(n.has(e)&&n.get(e)>=t)}},{key:"getScore",value:function(){return this.controller.score}},{key:"shouldRide",value:function(e){var t=this.player,n=this.getNextRailPosition(t,e),o=this.actionPlane.getBlockAt(n);return this.isNextRailValid(o,e)}},{key:"isNextRailValid",value:function(e,t){if(e)return a.opposite(e.connectionA)===t||a.opposite(e.connectionB)===t||e.connectionA===t||e.connectionB===t}},{key:"getNextRailPosition",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.player,t=arguments[1],n=u.directionToOffsetPosition(t)||new u(0,0);return u.add(e.position,n)}},{key:"getEntityCount",value:function(e){return this.controller.levelEntity.getEntitiesOfType(e).length}},{key:"getCommandExecutedCount",value:function(e,t){return this.controller.getCommandCount(e,t,!1)}},{key:"getRepeatCommandExecutedCount",value:function(e,t){return this.controller.getCommandCount(e,t,!0)}},{key:"getTurnRandomCount",value:function(){return this.controller.turnRandomCount}},{key:"getInventoryAmount",value:function(e){if(!this.usePlayer)return 0;if("all"!==e&&"All"!==e)return this.player.inventory[e];var t=this.player.inventory,n=0;for(var o in t)n+=t[o];return n}},{key:"getInventoryTypes",value:function(){return this.usePlayer?Object.keys(this.player.inventory):[]}},{key:"countOfTypeOnMap",value:function(t){var n=this;return this.actionPlane.getAllPositions().filter(function(e){return n.actionPlane.getBlockAt(e).blockType===t}).length}},{key:"isPlayerAt",value:function(e){return!!this.usePlayer&&(Array.isArray(e)&&(e=u.fromArray(e)),u.equals(this.player.position,e))}},{key:"spritePositionToIndex",value:function(e,t){var n=u.subtract(t,e);return new u(n.x/40,n.y/40)}},{key:"solutionMapMatchesResultMap",value:function(e){for(var t=0;t<this.planeArea();t++){var n=e[t],o=this.actionPlane.indexToCoordinates(t);if(""!==n)if("empty"===n){if(!this.actionPlane.getBlockAt(o).isEmpty)return!1}else if("any"===n){if(this.actionPlane.getBlockAt(o).isEmpty)return!1}else if(this.actionPlane.getBlockAt(o).blockType!==n)return!1}return!0}},{key:"getTnt",value:function(){var n=this;return this.actionPlane.getAllPositions().filter(function(e){var t=n.actionPlane.getBlockAt(e);return t&&"tnt"===t.blockType})}},{key:"getMoveForwardPosition",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.player;return u.forward(e.position,e.facing)}},{key:"getMoveDirectionPosition",value:function(e,t){for(var n=e.facing,o=0;o<t;++o)n=a.turn(n,"right");return u.forward(e.position,n)}},{key:"isForwardBlockOfType",value:function(e){var t=this.getMoveForwardPosition(),n=this.isBlockOfTypeOnPlane(t,"empty",this.actionPlane);return!(""!==e||!n)||(n?this.isBlockOfTypeOnPlane(t,e,this.groundPlane):this.isBlockOfTypeOnPlane(t,e,this.actionPlane))}},{key:"getForwardBlockType",value:function(){var e=this.getForwardBlock();return e?e.blockType:""}},{key:"getForwardBlock",value:function(){var e=this.getMoveForwardPosition();return this.actionPlane.getBlockAt(e)}},{key:"isBlockOfType",value:function(e,t){return this.isBlockOfTypeOnPlane(e,t,this.actionPlane)}},{key:"isEntityOfType",value:function(t,e){return this.controller.levelEntity.getEntitiesOfType(e).some(function(e){return u.equals(t,e.position)})}},{key:"isBlockOfTypeOnPlane",value:function(e,t,n){var o=!1;return this.inBounds(e)&&(o="empty"===t?n.getBlockAt(e).isEmpty:"tree"===t?n.getBlockAt(e).getIsTree():t===n.getBlockAt(e).blockType),o}},{key:"isPlayerStandingInWater",value:function(){return"water"===this.groundPlane.getBlockAt(this.player.position).blockType}},{key:"isPlayerStandingInLava",value:function(){return"lava"===this.groundPlane.getBlockAt(this.player.position).blockType}},{key:"coordinatesToIndex",value:function(e){return this.yToIndex(e[1])+e[0]}},{key:"checkPositionForTypeAndPush",value:function(e,t,n){return!e&&""!==this.actionPlane.getBlockAt(t).blockType||this.isBlockOfType(t,e)?(n.push([!0,t]),!0):(n.push([!1,null]),!1)}},{key:"houseGroundToFloorHelper",value:function(e,t,n){var o,i,a,r,l,s=0,c=n,u=this.yToIndex(e[2])+e[1];44===u&&(u=44),(i=[0,e[1],e[2]+1])[0]=this.yToIndex(i[2])+i[1],(a=[0,e[1],e[2]-1])[0]=this.yToIndex(a[2])+a[1],(r=[0,e[1]+1,e[2]])[0]=this.yToIndex(r[2])+r[1],l=[0,e[1]-1,e[2]],r[0]=this.yToIndex(r[2])+r[1],o=this.actionPlane.getBlockAt(this.actionPlane.indexToCoordinates(u));for(var p=0;p<c.length;++p)if(c[p][0]===u){s=-1;break}return""!==o.blockType?{}:0<c.length&&-1===s?{}:(c.push(e),c.concat(this.houseGroundToFloorHelper(i,t,c)),c.concat(this.houseGroundToFloorHelper(a,t,c)),c.concat(this.houseGroundToFloorHelper(r,t,c)),c.concat(this.houseGroundToFloorHelper(l,t,c)),c)}},{key:"houseGroundToFloorBlocks",value:function(e){var t=[0,e[0],e[1]];return this.houseGroundToFloorHelper(t,"wool_orange",[])}},{key:"getEntityAt",value:function(e){var t=!0,n=!1,o=void 0;try{for(var i,a=this.controller.levelEntity.entityMap[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var r=i.value;if(u.equals(r[1].position,e))return r[1]}}catch(e){n=!0,o=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw o}}}},{key:"getAllBorderingPositionNotOfType",value:function(e,t){for(var n=this.getAllBorderingPosition(e,null),o=1;o<n.length;++o)n[o][0]&&this.actionPlane.getBlockAt(n[o][1]).blockType===t&&(n[o][0]=!1);return n}},{key:"getAllBorderingPosition",value:function(e,t){var n=this,o=[!1];return u.getSurroundingPositions(e).forEach(function(e){n.checkPositionForTypeAndPush(t,e,o)&&(o[0]=!0)}),o}},{key:"canMoveForward",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.player,t=this.getMoveForwardPosition(e);return!(!this.controller.followingPlayer()&&(9<t.x||9<t.y))&&this.isPositionEmpty(t,e)}},{key:"canMoveBackward",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.player,t=this.getMoveDirectionPosition(e,2);return this.isPositionEmpty(t,e)}},{key:"isPositionEmpty",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.player,n=[!1];if(this.inBounds(e)){if(this.actionPlane.getBlockAt(e).isWalkable||n.push("notWalkable"),!this.actionPlane.getBlockAt(e).isEmpty){if(this.player.isOnBlock)return[!0];n.push("notEmpty")}var o=this.groundPlane.getBlockAt(e).blockType,i=this.getEntityAt(e);if(["water","lava"].includes(o))if(this.controller.getIsDirectPlayerControl())n.push(o);else if(void 0===i||i.canMoveThrough())return[!0];if("water"!==this.groundPlane.getBlockAt(e).blockType&&this.isInBoat())return n.push("notWater"),n;void 0!==i&&(n.push("frontEntity"),n.push(i));var a=this.groundPlane.getBlockAt(e),r=this.actionPlane.getBlockAt(e);n[0]=t.hasPermissionToWalk(r,i,a)}else n.push("outBound");return n}},{key:"canMoveDirection",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.player,t=arguments[1],n=e.facing;this.turnToDirection(e,t);var o=this.canMoveForward(e);return this.turnToDirection(e,n),o}},{key:"canPlaceBlock",value:function(e,t){return e.canPlaceBlock(t)}},{key:"canPlaceBlockDirection",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],n=arguments[2];return!(t.isOnBlock||this.getPlaneToPlaceOn(this.getMoveDirectionPosition(t,n),t,e)===this.groundPlane&&s.notValidOnGroundPlane(e)&&this.groundPlane.getBlockAt(this.getMoveDirectionPosition(t,n))||this.checkEntityConflict(this.getMoveDirectionPosition(t,n))||null===this.getPlaneToPlaceOn(this.getMoveDirectionPosition(t,n),t,e))}},{key:"checkEntityConflict",value:function(t){var n=!1;return this.controller.levelEntity.entityMap.forEach(function(e){u.equals(e.position,t)&&(n=!0)}),n}},{key:"canPlaceBlockForward",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.player;return this.canPlaceBlockDirection(e,t,0)}},{key:"getPlaneToPlaceOn",value:function(e,t,n){if(this.inBounds(e)){var o=this.actionPlane.getBlockAt(e);if(t===this.agent&&o.isEmpty){if(this.groundPlane.getBlockAt(e).getIsLiquid()){if(s.getCanFall(n))return this.groundPlane;if(!s.getIsPlaceableInLiquid(n))return null}return this.actionPlane}if(o.isPlacable)return this.groundPlane.getBlockAt(e).isPlacable?this.groundPlane:this.actionPlane}return null}},{key:"canDestroyBlockForward",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.player,t=!1;if(!e.isOnBlock){var n=this.getMoveForwardPosition(e);if(this.inBounds(n)){var o=this.actionPlane.getBlockAt(n);t=!o.isEmpty&&(o.isDestroyable||o.isUsable)}}return t}},{key:"moveForward",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.player,t=this.getMoveForwardPosition(e);this.moveTo(t,e)}},{key:"moveBackward",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.player,t=this.getMoveDirectionPosition(e,2);this.moveTo(t,e)}},{key:"moveTo",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.player;t.setMovePosition(e),this.actionPlane.getBlockAt(e).isEmpty&&(t.isOnBlock=!1)}},{key:"turnLeft",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.player;e.facing=a.turn(e.facing,"left")}},{key:"turnRight",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.player;e.facing=a.turn(e.facing,"right")}},{key:"turnToDirection",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.player,t=arguments[1];e.facing=t}},{key:"moveDirection",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.player,t=arguments[1];this.turnToDirection(e,t),this.moveForward()}},{key:"placeBlock",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.player,n=t.position,o=null,i=this.groundPlane.getBlockAt(n),a=this.actionPlane.getBlockAt(n),r=new s(e),l=t.canPlaceBlockOver(r,i);if(l.canPlace&&!a.getIsMiniblock())switch(l.plane){case"actionPlane":o=this.actionPlane.setBlockAt(n,r),t.walkableCheck(r);break;case"groundPlane":this.groundPlane.setBlockAt(n,r)}return o}},{key:"placeBlockForward",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.player;return this.placeBlockDirection(e,t,n,0)}},{key:"placeBlockDirection",value:function(e,t,n,o){var i=this.getMoveDirectionPosition(n,o);return"watering"===e&&(e="farmlandWet",t=this.groundPlane),t.setBlockAt(i,new s(e))}},{key:"destroyBlock",value:function(e){var t=null;return this.inBounds(e)&&null!==(t=this.actionPlane.getBlockAt(e))&&(t.position=e,t.isDestroyable&&this.actionPlane.setBlockAt(e,new s(""))),t}},{key:"destroyBlockForward",value:function(e){var t=null,n=this.getMoveForwardPosition(e);return this.inBounds(n)&&null!==(t=this.actionPlane.getBlockAt(n))&&t.isDestroyable&&this.actionPlane.setBlockAt(n,new s("")),t}},{key:"solveFOWTypeForMap",value:function(){var e,t;for(var n in e=this.getAllEmissives(),t=this.findBlocksAffectedByEmissives(e))t.hasOwnProperty(n)&&this.solveFOWTypeFor(t[n],e)}},{key:"solveFOWTypeFor",value:function(e,t){var n,o,i,a=!1,r=!1,l=!1,s=!1,c=!1,u=!1,p=!1,d=!1,h=0,f=this.coordinatesToIndex(e);for(var g in n=this.findEmissivesThatTouch(e,t)){var m=n[g];i=e[1],o=e[0],(h=-(h=Math.atan2(m[1]-e[1],m[0]-e[0])))<0&&(h+=2*Math.PI),h*=360/(2*Math.PI),!u&&32.5<h&&h<=57.5&&(s=!0,this.pushIfHigherPrecedence(f,{x:o,y:i,type:"FogOfWar_InCorner_TopRight",precedence:0})),!l&&122.5<h&&h<=147.5&&(a=!0,this.pushIfHigherPrecedence(f,{x:o,y:i,type:"FogOfWar_InCorner_TopLeft",precedence:0})),!l&&212.5<h&&h<=237.5&&(r=!0,this.pushIfHigherPrecedence(f,{x:o,y:i,type:"FogOfWar_InCorner_BottomLeft",precedence:0})),!u&&302.5<h&&h<=317.5&&(c=!0,this.pushIfHigherPrecedence(f,{x:o,y:i,type:"FogOfWar_InCorner_BottomRight",precedence:0})),(327.5<=h||h<=32.5)&&(u=!0,this.pushIfHigherPrecedence(f,{x:o,y:i,type:"FogOfWar_Right",precedence:1})),237.5<h&&h<=302.5&&(d=!0,this.pushIfHigherPrecedence(f,{x:o,y:i,type:"FogOfWar_Bottom",precedence:1})),147.5<h&&h<=212.5&&(l=!0,this.pushIfHigherPrecedence(f,{x:o,y:i,type:"FogOfWar_Left",precedence:1})),57.5<h&&h<=122.5&&(p=!0,this.pushIfHigherPrecedence(f,{x:o,y:i,type:"FogOfWar_Top",precedence:1}))}a&&r&&this.pushIfHigherPrecedence(f,{x:o,y:i,type:"FogOfWar_Left",precedence:1}),s&&c&&this.pushIfHigherPrecedence(f,{x:o,y:i,type:"FogOfWar_Right",precedence:1}),a&&s&&this.pushIfHigherPrecedence(f,{x:o,y:i,type:"FogOfWar_Top",precedence:1}),c&&r&&this.pushIfHigherPrecedence(f,{x:o,y:i,type:"FogOfWar_Bottom",precedence:1}),l&&u||p&&d||u&&d&&a||d&&s&&a||p&&c&&r||l&&s&&c||l&&d&&s?this.fowPlane[f]="":a&&c?this.pushIfHigherPrecedence(f,{x:o,y:i,type:"FogOfWar_TopLeftBottomRight",precedence:2}):r&&s?this.pushIfHigherPrecedence(f,{x:o,y:i,type:"FogOfWar_BottomLeftTopRight",precedence:2}):d&&l||d&&a||l&&c?this.pushIfHigherPrecedence(f,{x:o,y:i,type:"FogOfWar_Bottom_Left",precedence:2}):d&&u||d&&s||u&&r?this.pushIfHigherPrecedence(f,{x:o,y:i,type:"FogOfWar_Bottom_Right",precedence:2}):p&&u||p&&c||u&&a?this.pushIfHigherPrecedence(f,{x:o,y:i,type:"FogOfWar_Top_Right",precedence:2}):(p&&l||p&&r||l&&s)&&this.pushIfHigherPrecedence(f,{x:o,y:i,type:"FogOfWar_Top_Left",precedence:2})}},{key:"pushIfHigherPrecedence",value:function(e,t){if(""!==t){var n=this.fowPlane[e];n&&n.precedence>t.precedence||(this.fowPlane[e]=t)}else this.fowPlane[e]=""}},{key:"getAllEmissives",value:function(){for(var e=[],t=0;t<this.planeHeight;++t)for(var n=0;n<this.planeWidth;++n){var o=new u(n,t);(!this.actionPlane.getBlockAt(o).isEmpty&&this.actionPlane.getBlockAt(o).isEmissive||this.groundPlane.getBlockAt(o).isEmissive&&(this.actionPlane.getBlockAt(o).isEmpty||this.actionPlane.getBlockAt(o).isTransparent)||this.actionPlane.getBlockAt(o).isEmpty&&this.groundDecorationPlane.getBlockAt(o).isEmissive)&&e.push(o)}return e}},{key:"findBlocksAffectedByEmissives",value:function(e){var t={};for(var n in e)for(var o=e[n],i=o.x,a=o.y,r=o.y-2;r<=a+2;++r)for(var l=o.x-2;l<=i+2;++l){var s=new u(l,r);this.inBounds(s)&&(a-1<=r&&r<=a+1&&i-1<=l&&l<=i+1||(t[r+"_"+l]=s))}return t}},{key:"findEmissivesThatTouch",value:function(e,t){for(var n=[],o=e.y,i=e.x,a=o-2;a<=o+2;++a)for(var r=i-2;r<=i+2;++r){var l=new u(r,a);if(this.inBounds(l)&&!(o-1<=a&&a<=o+1&&i-1<=r&&r<=i+1))for(var s in t)u.equals(t[s],l)&&n.push(t[s])}return n}},{key:"computeFowPlane",value:function(){var e,t;if(this.fowPlane=[],!this.isDaytime){for(t=0;t<this.planeHeight;++t)for(e=0;e<this.planeWidth;++e)this.fowPlane.push({x:e,y:t,type:"FogOfWar_Center"});for(this.solveFOWTypeForMap(),t=0;t<this.planeHeight;++t)for(e=0;e<this.planeWidth;++e){var n=new u(e,t),o=this.groundPlane.getBlockAt(n),i=this.actionPlane.getBlockAt(n),a=this.groundDecorationPlane.getBlockAt(n);(o.isEmissive&&(i.isEmpty||i.isTransparent)||!i.isEmpty&&i.isEmissive||i.isEmpty&&a.isEmissive)&&this.clearFowAround(e,t)}}}},{key:"clearFowAround",value:function(e,t){var n,o;for(o=-1;o<=1;++o)for(n=-1;n<=1;++n)this.clearFowAt(e+n,t+o)}},{key:"clearFowAt",value:function(e,t){if(0<=e&&e<this.planeWidth&&0<=t&&t<this.planeHeight){var n=this.yToIndex(t)+e;this.fowPlane[n]=""}}},{key:"clearFow",value:function(){for(var e=0;e<this.planeWidth;e++)for(var t=0;t<this.planeHeight;t++){var n=this.yToIndex(t)+e;this.fowPlane[n]=""}}},{key:"computeShadingPlane",value:function(){this.shadingPlane=[],this.computeShading(this.actionPlane),this.computeShading(this.groundPlane)}},{key:"occludedBy",value:function(e){return e&&!e.getIsEmptyOrEntity()&&!e.getIsLiquid()}},{key:"computeShading",value:function(e){var t,n,o,i;for(o=0;o<this.planeArea();++o){t=o%this.planeWidth,n=Math.floor(o/this.planeWidth);var a=new u(t,n);i=!1;var r=e.getBlockAt(a),l=this.groundPlane.getBlockAt(a);if(r.isEmpty||r.isTransparent||r.getIsLiquid()){var s="AO";"lava"===r.blockType?s="LavaGlow":"water"!==r.blockType&&"magmaUnderwater"!==r.blockType||(s="WaterAO"),r!==l&&l.getIsLiquid()||(0===n&&this.shadingPlane.push({x:t,y:n,atlas:s,type:"AOeffect_Bottom"}),n===this.planeHeight-1&&this.shadingPlane.push({x:t,y:n,atlas:s,type:"AOeffect_Top"}),0==t&&this.shadingPlane.push({x:t,y:n,atlas:s,type:"AOeffect_Right"}),t==this.planeWidth-1&&this.shadingPlane.push({x:t,y:n,atlas:s,type:"AOeffect_Left"}));var c=e.getSurroundingBlocks(a);t<this.planeWidth-1&&this.occludedBy(c.east)&&this.shadingPlane.push({x:t,y:n,atlas:s,type:"AOeffect_Left"}),0<t&&this.occludedBy(c.west)&&(this.shadingPlane.push({x:t,y:n,atlas:s,type:"AOeffect_Right"}),r.getIsLiquid()||(this.shadingPlane.push({x:t,y:n,atlas:"blockShadows",type:"Shadow_Parts_Fade_base.png"}),0<n&&0<t&&e.getBlockAt(u.north(u.west(a))).getIsEmptyOrEntity()&&this.shadingPlane.push({x:t,y:n,atlas:"blockShadows",type:"Shadow_Parts_Fade_top.png"})),i=!0),0<n&&this.occludedBy(c.north)?this.shadingPlane.push({x:t,y:n,atlas:s,type:"AOeffect_Bottom"}):0<n&&(t<this.planeWidth-1&&this.occludedBy(c.northEast)&&!this.occludedBy(c.east)&&this.shadingPlane.push({x:t,y:n,atlas:s,type:"AOeffect_BottomLeft"}),!i&&0<t&&this.occludedBy(c.northWest)&&this.shadingPlane.push({x:t,y:n,atlas:s,type:"AOeffect_BottomRight"})),n<this.planeHeight-1&&this.occludedBy(c.south)?this.shadingPlane.push({x:t,y:n,atlas:s,type:"AOeffect_Top"}):n<this.planeHeight-1&&(t<this.planeWidth-1&&this.occludedBy(c.southEast)&&!this.occludedBy(c.east)&&this.shadingPlane.push({x:t,y:n,atlas:s,type:"AOeffect_TopLeft"}),!i&&0<t&&this.occludedBy(c.southWest)&&this.shadingPlane.push({x:t,y:n,atlas:s,type:"AOeffect_TopRight"}))}}}}]),n}()},function(e,t,n){"use strict";var c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,i=!1,a=void 0;try{for(var r,l=e[Symbol.iterator]();!(o=(r=l.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),f=n(6),i=n(1),s=i.North,u=i.South,p=i.East,d=i.West,h=i.opposite,r=i.turnDirection,g=i.turn,m=i.directionToRelative,v=n(3),a=n(15),_=function(e){switch(e){case s:return"North";case u:return"South";case p:return"East";case d:return"West";default:return""}},y=["","Vertical","Vertical","Vertical","Horizontal","UpRight","DownRight","TRight","Horizontal","UpLeft","DownLeft","TLeft","Horizontal","TUp","TDown","Cross"],k=[[],[s],[u],[s,u],[p],[s,p],[u,p],[u,p],[d],[s,d],[u,d],[u,d],[p,d],[s,p],[u,p],[s,p]],b=[[],[s],[u],[s,u],[p],[p,d],[p,d],[p,d],[d],[p,d],[p,d],[p,d],[p,d],[p,d],[p,d],[p,d]];e.exports=function(){function l(e,t,n,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),this._data=[],this.width=t,this.height=n,this.levelModel=o,this.planeType=i,this.playPistonOn=!1,this.playPistonOff=!1;for(var a=0;a<e.length;++a){var r=new f(e[a]);this._data.push(r)}this.isActionPlane()&&(this.redstoneAdjacencySet=this.createRedstoneAdjacencySet())}return o(l,[{key:"inBounds",value:function(e){return 0<=e.x&&e.x<this.width&&0<=e.y&&e.y<this.height}},{key:"coordinatesToIndex",value:function(e){return e.y*this.width+e.x}},{key:"indexToCoordinates",value:function(e){var t=Math.floor(e/this.width),n=e-t*this.width;return new v(n,t)}},{key:"getAllPositions",value:function(){var n=this;return this._data.map(function(e,t){return n.indexToCoordinates(t)})}},{key:"getBlockAt",value:function(e){if(e=v.fromArray(e),this.inBounds(e))return this._data[this.coordinatesToIndex(e)]}},{key:"isActionPlane",value:function(){return"actionPlane"===this.planeType}},{key:"isDecorationPlane",value:function(){return"decorationPlane"===this.planeType}},{key:"isGroundPlane",value:function(){return"groundPlane"===this.planeType}},{key:"setBlockAt",value:function(o,e){var i=this;if(o=v.fromArray(o),this.inBounds(o)){if(this._data[this.coordinatesToIndex(o)]=e,this.isActionPlane()){e.isRedstone||e.isRedstoneBattery?this.redstoneAdjacencySet.add(o):this.redstoneAdjacencySet.remove(o);var t=[];if(e.needToRefreshRedstone()&&(t=this.refreshRedstone()),this.updateWeakCharge(o,e),e.isEmpty&&[s,u,p,d].forEach(function(e){var t=v.directionToOffsetPosition(e),n=i.getBlockAt(v.add(o,t));n&&n.isRail&&(n.connectionA===h(e)&&(n.connectionA=void 0),n.connectionB===h(e)&&(n.connectionB=void 0))}),this.determineRailType(o,!0),this.levelModel&&this.levelModel.controller.levelView){var n=v.north(v.east(o)),a=v.south(v.west(o)),r=v.getOrthogonalPositions(o).concat([o,n,a]);this.levelModel.controller.levelView.refreshActionGroup(r),this.levelModel.controller.levelView.refreshActionGroup(t)}}else this.isGroundPlane()&&this.levelModel.controller.levelView.refreshGroundGroup();return this.resolveConduitState(),e}}},{key:"getOrthogonalBlocks",value:function(e){return{north:{block:this.getBlockAt(v.north(e)),relative:u},south:{block:this.getBlockAt(v.south(e)),relative:s},east:{block:this.getBlockAt(v.east(e)),relative:d},west:{block:this.getBlockAt(v.west(e)),relative:p}}}},{key:"getSurroundingBlocks",value:function(e){return{north:this.getBlockAt(v.north(e)),northEast:this.getBlockAt(v.north(v.east(e))),east:this.getBlockAt(v.east(e)),southEast:this.getBlockAt(v.south(v.east(e))),south:this.getBlockAt(v.south(e)),southWest:this.getBlockAt(v.south(v.west(e))),west:this.getBlockAt(v.west(e)),northWest:this.getBlockAt(v.north(v.west(e)))}}},{key:"getOrthogonalMask",value:function(e,t){var n=this.getOrthogonalBlocks(e);return(t(n.north)<<0)+(t(n.south)<<1)+(t(n.east)<<2)+(t(n.west)<<3)}},{key:"getMinecartTrack",value:function(e,t){var n=this.getBlockAt(e);if(n.isRail){if(n.connectionA===t||n.connectionB===t)return["",v.forward(e,t),t,300];var o=h(t);if(n.connectionA===o&&void 0!==n.connectionB){var i=r(t,n.connectionB);return["turn_"+i,e,g(t,i),300]}if(n.connectionB===o&&void 0!==n.connectionA){var a=r(t,n.connectionA);return["turn_"+a,e,g(t,a),300]}}}},{key:"getPoweredRailsConnected",value:function(e,t){if(!v.isAdjacent(e,t))return!1;var n=this.getBlockAt(e),o=this.getBlockAt(t);return!(!n.getIsPowerableRail()||!o.getIsPowerableRail())&&(n.getIsHorizontal()&&o.getIsHorizontal()?v.equals(v.forward(e,p),t)||v.equals(v.forward(e,d),t):!(!n.getIsVertical()||!o.getIsVertical())&&(v.equals(v.forward(e,s),t)||v.equals(v.forward(e,u),t)))}},{key:"powerRedstone",value:function(){var n=this;return this.redstoneAdjacencySet.sets.forEach(function(e){var t=e.some(function(e){return n.getBlockAt(e).isRedstoneBattery});e.forEach(function(e){n.getBlockAt(e).isPowered=t,n.determineRedstoneSprite(e)})}),this.redstoneAdjacencySet.flattenSets()}},{key:"createRedstoneAdjacencySet",value:function(){var n=this,e=this.getAllPositions().filter(function(e){var t=n.getBlockAt(e);return t.isRedstone||t.isRedstoneBattery});return new a(e)}},{key:"powerRails",value:function(){var t=this,e=this.getAllPositions().filter(function(e){return t.getBlockAt(e).getIsPowerableRail()});return e.forEach(function(e){t.determineRailType(e)}),new a(e,this.getPoweredRailsConnected.bind(this)).sets.forEach(function(e){e.some(function(e){return t.getBlockAt(e).isPowered})&&e.forEach(function(e){t.getBlockAt(e).isPowered=!0})}),e.forEach(function(e){t.determineRailType(e)}),e}},{key:"determineRailType",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=this.getBlockAt(e);if(o&&o.isRail){var i="",a=k;if(o.getIsPowerableRail()&&(i=o.isPowered?"Powered":"Unpowered",a=b),void 0===o.connectionA||void 0===o.connectionB){var r=this.getOrthogonalMask(e,function(e){var t=e.block,n=e.relative;if(!t||!t.isRail)return!1;var o=void 0===t.connectionA||t.connectionA===n,i=void 0===t.connectionB||t.connectionB===n;return o||i}),l=c(a[r],2);o.connectionA=l[0],o.connectionB=l[1]}var s=_(o.connectionA)+_(o.connectionB);o.blockType="rails"+i+s,n&&v.getOrthogonalPositions(e).forEach(function(e){t.determineRailType(e)})}}},{key:"determineRedstoneSprite",value:function(e){var t=this.getBlockAt(e);if(t&&t.isRedstone){var n=this.getOrthogonalMask(e,function(e){var t=e.block;return t&&(t.isRedstone||t.isConnectedToRedstone)}),o=y[n],i=t.isPowered?"On":"";return t.blockType="redstoneWire"+o+i,"redstoneWire"+o}}},{key:"refreshRedstone",value:function(){var t=this,e=this.powerRedstone();this.powerAllBlocks();var n=this.powerRails(),o=e.concat(n);return this.getAllPositions().forEach(function(e){t.getIronDoors(e),t.getPistonState(e)}),this.playPistonSound(),o}},{key:"playPistonSound",value:function(){this.levelModel&&(this.playPistonOn?this.levelModel.controller.audioPlayer.play("pistonOut"):this.playPistonOff&&this.levelModel.controller.audioPlayer.play("pistonIn"),this.playPistonOn=!1,this.playPistonOff=!1)}},{key:"checkEntityConflict",value:function(t){var n=this;if(this.levelModel){var o=!1;return this.levelModel.controller.levelEntity.entityMap.forEach(function(e){n.levelModel.controller.positionEquivalence(t,e.position)&&(o=!0)}),o}}},{key:"getIronDoors",value:function(e){e=v.fromArray(e);var t=this.getBlockAt(e),n=this.coordinatesToIndex(e);"doorIron"===t.blockType&&(t.isPowered=this.powerCheck(e,!0),t.isPowered&&!t.isOpen?(t.isOpen=!0,this.levelModel&&this.levelModel.controller.levelView.animateDoor(n,!0)):!t.isPowered&&t.isOpen&&this.levelModel&&(this.checkEntityConflict(e)||(t.isOpen=!1,this.levelModel.controller.levelView.animateDoor(n,!1))))}},{key:"getPistonState",value:function(e){var t=this.getBlockAt(e);t.getIsPiston()&&!t.getIsPistonArm()&&(t.isPowered=this.powerCheck(e,!0),t.isPowered?this.activatePiston(e):t.isPowered||this.deactivatePiston(e),this.levelModel&&(this.levelModel.controller.updateFowPlane(),this.levelModel.controller.updateShadingPlane()))}},{key:"findDoorToAnimate",value:function(o){var i=this;this.getAllPositions().forEach(function(e){var t=i.getBlockAt(e),n=i.coordinatesToIndex(e);"doorIron"===t.blockType&&e!==o&&(t.isPowered=i.powerCheck(e,!0),t.isPowered&&!t.isOpen?(t.isOpen=!0,i.levelModel&&i.levelModel.controller.levelView.animateDoor(n,!0)):t.isPowered||!t.isOpen||i.checkEntityConflict(e)||(t.isOpen=!1,i.levelModel&&i.levelModel.controller.levelView.animateDoor(n,!1)))})}},{key:"activatePiston",value:function(e){var t=this.getBlockAt(e),n=t.blockType;t.getIsStickyPiston()&&(n=n.substring(0,n.length-6)),"On"===n.substring(n.length-2,n.length)&&(n=n.substring(0,n.length-2));var o=t.getPistonDirection(),i="pistonArm"+m(o),a=v.directionToOffsetPosition(o),r=v.forward(e,o),l=this.getBlockAt(r);if(!this.pistonArmBlocked(e,a))if(l.isDestroyableUponPush())this.setBlockAt(r,new f("")),this.playPistonOn=!0,this.levelModel&&this.levelModel.controller.levelView.playExplosionAnimation(r,2,r,l.blockType,null,null,this.player);else if(""===l.blockType||l.getIsPistonArm()){if(""===l.blockType){var s="On";t.getIsStickyPiston()&&(s+="Sticky",i+="Sticky");var c=new f(i),u=new f(n+=s);this.setBlockAt(r,c),this.setBlockAt(e,u),this.playPistonOn=!0}}else{var p=this.getBlocksToPush(r,a),d="On";t.getIsStickyPiston()&&(d+="Sticky");var h=new f(n+=d);this.setBlockAt(e,h),this.pushBlocks(p,a),this.playPistonOn=!0}}},{key:"pistonArmBlocked",value:function(e,t){var n=v.add(e,t);return this.checkEntityConflict(n)}},{key:"deactivatePiston",value:function(e){var t=this.getBlockAt(e);if(t.getIsPiston()&&t.blockType.match("On")){var n=t.getPistonDirection();void 0!==n&&this.retractArm(v.forward(e,n),e)}}},{key:"retractArm",value:function(e,t){var n=new f(""),o=this.getBlockAt(t),i="",a="";a=this.getBlockAt(t).getIsStickyPiston()?(i="Sticky",o.blockType.substring(0,o.blockType.length-8)):o.blockType.substring(0,o.blockType.length-2);var r=new f(a+i);if(this.getBlockAt(e).getIsPistonArm())if(this.getBlockAt(t).getIsStickyPiston()){var l=v.directionToOffsetPosition(o.getPistonDirection()),s=v.add(e,l);this.inBounds(s)&&this.getBlockAt(s).isStickable?(this.setBlockAt(e,this.getBlockAt(s)),this.setBlockAt(s,n)):(this.setBlockAt(e,n),this.playPistonOff=!0)}else this.setBlockAt(e,n),this.playPistonOff=!0;this.setBlockAt(t,r)}},{key:"pushBlocks",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0],n="",o=!1;1===t[0]?n="pistonArmRight":-1===t[0]?n="pistonArmLeft":1===t[1]?n="pistonArmDown":-1===t[1]&&(n="pistonArmUp");for(var i=new f(n),a=e.length-1;0<=a;--a){var r=v.add(e[a],v.fromArray(t)),l=this.getBlockAt(e[a]);this.inBounds(r)&&this.getBlockAt(r).isDestroyableUponPush()&&(this.levelModel&&this.levelModel.controller.levelView.playExplosionAnimation(r,2,r,l.blockType,null,null,this.player),o=!0),this.setBlockAt(r,this.getBlockAt(e[a])),0===a&&this.setBlockAt(e[a],i)}o&&this.refreshRedstone()}},{key:"getBlocksToPush",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0],n=[],o=e;this.inBounds(o)&&this.getBlockAt(o).getIsPushable();)n.push(o),o=v.add(o,v.fromArray(t));return n}},{key:"powerCheck",value:function(a){var r=this,l=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return v.getOrthogonalPositions(a).some(function(e){var t=r.getBlockAt(e);if(t){if(!t.isWeaklyPowerable)return!1;if(r.getBlockAt(a).getIsPiston()){var n=r.getBlockAt(a),o=v.directionToOffsetPosition(n.getPistonDirection())||new v(0,0),i=v.add(a,o);if(v.equals(e,i))return!1}return l?t.isPowered||t.isRedstoneBattery:t.isRedstone&&t.isPowered||t.isRedstoneBattery}})}},{key:"powerAllBlocks",value:function(){var n=this;this.getAllPositions().forEach(function(e){var t=n.getBlockAt(e);""!==t.blockType&&t.canHoldCharge()&&(t.isPowered=n.powerCheck(e))})}},{key:"updateWeakCharge",value:function(e,t){var n=this;t.isWeaklyPowerable&&(t.isPowered=this.powerCheck(e)),t.isPowered&&v.getOrthogonalPositions(e).forEach(function(e){n.inBounds(e)&&(n.getIronDoors(e),n.getPistonState(e))})}},{key:"getConduitRingPositions",value:function(e,t){var n=new v(e.x-t,e.y-t),o=new v(e.x+t,e.y+t),i=[];if(!this.inBounds(n)||!this.inBounds(o))return i;for(var a=2*t+1,r=0;r<a;++r)for(var l=0;l<a;++l)if(0===r||r===a-1||0===l||l===a-1){var s=new v(n.x+r,n.y+l);i.push(s)}return i}},{key:"resolveConduitState",value:function(){var i=this;this.getAllPositions().forEach(function(e){var t=i.getBlockAt(e);if("conduit"===t.blockType){var n=0,o=0;i.getConduitRingPositions(e,2).forEach(function(e){"prismarine"===i.getBlockAt(e).blockType&&++n}),i.getConduitRingPositions(e,1).forEach(function(e){i.getBlockAt(e).isEmpty&&++o}),n!==i.getRingRequirement(2)||o!==i.getRingRequirement(1)||t.isActivatedConduit?(n<i.getRingRequirement(2)||o<i.getRingRequirement(1))&&t.isActivatedConduit&&(i.getBlockAt(e).isActivatedConduit=!1,i.levelModel&&i.levelModel.controller.levelView.playCloseConduitAnimation(e)):(i.getBlockAt(e).isActivatedConduit=!0,i.levelModel&&i.levelModel.controller.levelView.playOpenConduitAnimation(e))}})}},{key:"getRingRequirement",value:function(e){return 8*e}}]),l}()},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var l=n(3);e.exports=function(){function a(e,t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.comparisonFunction=t||l.isAdjacent,this.sets=[],e&&e.forEach(function(e){n.add(e)})}return o(a,[{key:"flattenSets",value:function(){return this.sets.reduce(function(e,t){return e.concat(t)},[])}},{key:"add",value:function(t){var n=this;if(this.find(t))return!1;var e=this.sets.filter(function(e){return e.some(function(e){return n.comparisonFunction(t,e)})});if(1===e.length)e[0].push(t);else if(1<e.length){var o=[];e.forEach(function(e){n.sets.splice(n.sets.indexOf(e),1),o.push.apply(o,r(e))}),o.push(t),this.sets.push(o)}else this.sets.push([t]);return!0}},{key:"find",value:function(t){return this.sets.find(function(e){return e.some(function(e){return l.equals(t,e)})})}},{key:"remove",value:function(t){var e=this.find(t);if(!e)return!1;this.sets.splice(this.sets.indexOf(e),1);var n=e.filter(function(e){return!l.equals(t,e)});if(n.length){var o,i=new a(n,this.comparisonFunction).sets;(o=this.sets).push.apply(o,r(i))}return!0}}]),a}()},function(e,t,n){"use strict";var c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,i=!1,a=void 0;try{for(var r,l=e[Symbol.iterator]();!(o=(r=l.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=n(0),r=n(4),u=n(3);e.exports=function(){function s(e,t,n,o,i,a,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e,t,"Player",n,o,r));return l.offset=[-18,-32],l.name=i,l.isOnBlock=a,l.inventory={},l.movementState=-1,l.onTracks=!1,l.getOffTrack=!1,e.getIsDirectPlayerControl()?(l.moveDelayMin=0,l.moveDelayMax=0):(l.moveDelayMin=30,l.moveDelayMax=200),e.levelData.ocean&&(l.offset=[-26,-26]),e.levelData.boat&&(l.offset=[-27,-30]),l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,i),o(s,[{key:"canPlaceBlockOver",value:function(e,t){var n={canPlace:!1,plane:""};return t.getIsLiquid()?(n.canPlace=!0,n.plane="groundPlane"):(n.canPlace=!0,n.plane="actionPlane"),"cropWheat"===e.blockType&&(n.canPlace="farmlandWet"===t.blockType),n}},{key:"canPlaceBlock",value:function(e){return e.isEmpty}},{key:"shouldUpdateSelectionIndicator",value:function(){return!0}},{key:"setMovePosition",value:function(e){(function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,o)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(o):void 0})(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"setMovePosition",this).call(this,e),this.collectItems(this.position)}},{key:"walkableCheck",value:function(e){this.isOnBlock=!e.isWalkable}},{key:"updateMovement",value:function(){var e=this;if(this.controller.attemptRunning&&this.controller.getIsDirectPlayerControl()&&(this.onTracks&&this.collectItems(this.position),this.canUpdateMovement()))if(0<=this.movementState){var t=this.movementState,n=new r(this,function(){},function(){e.lastMovement=+new Date,e.controller.moveDirection(n,t)},this.identifier);this.addCommand(n)}else{var o=new r(this,function(){},function(){e.lastMovement=+new Date,e.controller.use(o)},this.identifier);this.addCommand(o)}}},{key:"canUpdateMovement",value:function(){var e=this.queue.isFinished()||!this.queue.isStarted(),t=-1!==this.movementState,n=this.queue.currentCommand&&0===this.queue.getLength(),o=+new Date-this.lastMovement,i=300<o;return t&&800<o&&(this.getOffTrack=!0),!this.onTracks&&(e||n&&i)&&t}},{key:"doMoveForward",value:function(e){var t,n,o=this,i=this.controller.levelModel,a=this.controller.levelView,r=this.isOnBlock,l=this.position;i.moveForward(),n=r&&r!==this.isOnBlock,t=this.isOnBlock||n?i.actionPlane.getBlockAt(this.position).blockType:i.groundPlane.getBlockAt(this.position).blockType,a.playMoveForwardAnimation(this,l,this.facing,n,this.isOnBlock,t,function(){return o.afterMove(e)}),this.updateHidingTree(),this.updateHidingBlock(l)}},{key:"doMoveBackward",value:function(e){var t,n,o=this,i=this.controller.levelModel,a=this.controller.levelView,r=this.isOnBlock,l=this.position;i.moveBackward(this),n=r&&r!==this.isOnBlock,this.isOnBlock,t=i.actionPlane.getBlockAt(this.position).blockType,a.playMoveBackwardAnimation(this,l,this.facing,n,this.isOnBlock,t,function(){return o.afterMove(e)}),this.updateHidingTree(),this.updateHidingBlock(l)}},{key:"afterMove",value:function(e){var t=this,n=this.controller.levelModel,o=this.controller.levelView;o.playIdleAnimation(this.position,this.facing,this.isOnBlock),n.isPlayerStandingInWater()&&!n.isInBoat()?o.playDrownFailureAnimation(this.position,this.facing,this.isOnBlock,function(){t.controller.handleEndState(!1)}):n.isPlayerStandingInLava()?o.playBurnInLavaAnimation(this.position,this.facing,this.isOnBlock,function(){t.controller.handleEndState(!1)}):(u.getOrthogonalPositions(this.position).forEach(function(e){var t=n.actionPlane.getBlockAt(e);t&&t.blockType.endsWith("Chest")&&!t.isOpen&&(t.isOpen=!0,o.playOpenChestAnimation(e))}),this.controller.delayPlayerMoveBy(this.moveDelayMin,this.moveDelayMax,function(){e.succeeded()}))}},{key:"bump",value:function(e){var t=this.controller.levelView,n=this.controller.levelModel;t.playBumpAnimation(this.position,this.facing,!1);var o=this.controller.levelEntity.getEntityAt(n.getMoveForwardPosition(this));if(null!==o&&this.controller.levelEntity.isFriendlyEntity(o.type)){var i=this.facing,a=new r(this,function(){},function(){o.pushBack(a,i,250)},o.identifier);o.queue.startPushHighPriorityCommands(),o.addCommand(a),o.queue.endPushHighPriorityCommands()}this.controller.delayPlayerMoveBy(200,400,function(){e.succeeded()})}},{key:"collectItems",value:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.position,t=this.controller.levelView.collectibleItems,n=0;n<t.length;n++){var o=c(t[n],4),i=o[0],a=o[1],r=o[2],l=o[3];if(null===i)t.splice(n,1);else{var s=this.controller.levelModel.spritePositionToIndex(a,new u(i.x,i.y));u.absoluteDistanceSquare(e,s)<l&&(this.controller.levelView.playItemAcquireAnimation(this.position,this.facing,i,function(){},r),t.splice(n,1))}}}},{key:"takeDamage",value:function(e){var t=this,n=this.controller.levelView.getDirectionName(this.facing);this.healthPoint--,0<this.healthPoint?(this.controller.levelView.playScaledSpeed(this.getAnimationManager(),"hurt"+n),e.succeeded()):(this.getAnimationManager().stop(null,!0),this.controller.levelView.playFailureAnimation(this.position,this.facing,this.isOnBlock,function(){e.failed(),t.controller.handleEndState(!1)}))}},{key:"canTriggerPressurePlates",value:function(){return!0}}]),s}()},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=n(0),c=n(4);e.exports=function(){function s(e,t,n,o,i,a,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e,t,"PlayerAgent",n,o,r));return l.offset=[-16,-15],l.name=i,l.isOnBlock=a,l.inventory={},l.movementState=-1,l.moveDelayMin=20,l.moveDelayMax=150,l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,i),o(s,[{key:"canPlaceBlockOver",value:function(e,t){var n={canPlace:!1,plane:""};return t.getIsLiquid()?e.getIsPlaceableInLiquid()&&(n.canPlace=!0,n.plane="groundPlane"):e.isWalkable&&(n.canPlace=!0,n.plane="actionPlane"),n}},{key:"canPlaceBlock",value:function(e){return e.isEmpty}},{key:"canMoveThrough",value:function(){return!0}},{key:"getSortOrderOffset",value:function(){return function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,o)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(o):void 0}(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"getSortOrderOffset",this).call(this)-1}},{key:"updateMovement",value:function(){var e=this;if(this.controller.attemptRunning&&this.controller.getIsDirectPlayerControl()){var t=this.queue.isFinished()||!this.queue.isStarted(),n=-1!==this.movementState,o=this.queue.currentCommand&&0===this.queue.getLength(),i=+new Date-this.lastMovement;if((t||o&&300<i)&&n)if(0<=this.movementState){var a=this.movementState,r=new c(this,function(){},function(){e.lastMovement=+new Date,e.controller.moveDirection(r,a)},this.identifier);this.addCommand(r)}else{var l=new c(this,function(){},function(){e.lastMovement=+new Date,e.controller.use(l)},this.identifier);this.addCommand(l)}}}},{key:"doMove",value:function(e,t){var n=this,o=void 0,i=this.controller.levelModel,a=this.controller.levelView,r=this.isOnBlock,l=this.position;i["move"+t](this);var s=r&&r!==this.isOnBlock;o=this.isOnBlock||s?i.actionPlane.getBlockAt(this.position).blockType:i.groundPlane.getBlockAt(this.position).blockType,a["playMove"+t+"Animation"](this,l,this.facing,s,this.isOnBlock,o,function(){a.playIdleAnimation(n.position,n.facing,n.isOnBlock,n),n.controller.delayPlayerMoveBy(n.moveDelayMin,n.moveDelayMax,function(){e.succeeded()})}),this.updateHidingTree(),this.updateHidingBlock(l)}},{key:"doMoveForward",value:function(e){this.doMove(e,"Forward")}},{key:"doMoveBackward",value:function(e){this.doMove(e,"Backward")}},{key:"bump",value:function(e){var t=this.controller.levelView,n=this.controller.levelModel;t.playBumpAnimation(this.position,this.facing,!1,this);var o=this.controller.levelEntity.getEntityAt(n.getMoveForwardPosition(this));if(null!==o&&this.controller.levelEntity.isFriendlyEntity(o.type)){var i=this.facing,a=new c(this,function(){},function(){o.pushBack(a,i,250)},o.identifier);o.queue.startPushHighPriorityCommands(),o.addCommand(a),o.queue.endPushHighPriorityCommands()}this.controller.delayPlayerMoveBy(200,400,function(){e.succeeded()})}},{key:"takeDamage",value:function(e){var t=this,n=this.controller.levelView.getDirectionName(this.facing);this.healthPoint--,0<this.healthPoint?(this.controller.levelView.playScaledSpeed(this.sprite.animations,"hurt"+n),e.succeeded()):(this.sprite.animations.stop(null,!0),this.controller.levelView.playFailureAnimation(this.position,this.facing,this.isOnBlock,function(){e.failed(),t.controller.handleEndState(!1)}))}},{key:"hasPermissionToWalk",value:function(e){return e.isWalkable}},{key:"canTriggerPressurePlates",value:function(){return!0}}]),s}()},function(e,t,n){"use strict";var O=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,i=!1,a=void 0;try{for(var r,l=e[Symbol.iterator]();!(o=(r=l.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),_=n(6),D=n(1),y=n(3),s=n(19).createEvent,r=n(7).randomInt,R=n(10).addBobTween;window.PIXI&&(PIXI.canUseNewCanvasBlendModes=function(){return!0}),e.exports=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.controller=e,this.audioPlayer=e.audioPlayer,this.game=e.game,this.baseShading=null,this.prismarinePhase=0,this.uniforms={time:{type:"1f",value:0},surface:{type:"sampler2D",value:null},tint:{type:"4fv",value:[67/255,213/255,238/255,1]},x:{type:"1f",value:0},y:{type:"1f",value:0}},this.waveShader=new Phaser.Filter(this.game,this.uniforms,["\n      precision lowp float;\n      varying vec2 vTextureCoord;\n      uniform sampler2D uSampler;\n      uniform sampler2D surface;\n      uniform float time;\n      uniform float x;\n      uniform float y;\n      uniform vec4 tint;\n\n      float overlay(float source, float dest) {\n        return dest > 0.5 ? (2.0 * dest * source) : (1.0 - 2.0 * (1.0 - dest) * (1.0 - source));\n      }\n\n      vec4 overlay(vec4 source, vec4 dest) {\n        return vec4(overlay(source.r, dest.r), overlay(source.g, dest.g), overlay(source.b, dest.b), 1.0);\n      }\n\n      void main(void) {\n        vec2 relativeCoord = vTextureCoord + vec2(x * 0.9, -y * 0.9);\n        float offsetA = sin(relativeCoord.y * 31.0 + time / 18.0) * 0.0014;\n        float offsetB = sin(relativeCoord.y * 57.0 + time / 18.0) * 0.0007;\n        vec4 base = texture2D(uSampler, vTextureCoord + vec2(0.0, offsetA + offsetB));\n        float frame = mod(floor(time / 5.0), 31.0);\n        float surfaceOffset = 0.0; //sin(time / 57.0) * 0.01 + sin(time / 31.0) * 0.005;\n        vec4 surface = texture2D(\n          surface,\n          vec2(mod(relativeCoord.x * 2.0, 1.0),\n          mod((-relativeCoord.y * 2.0 + frame + surfaceOffset) / 32.0, 1.0))\n        );\n        gl_FragColor = mix(mix(overlay(base, surface), base, 0.5), tint, 0.3);\n      }\n    "]),this.player=null,this.agent=null,this.selectionIndicator=null,this.groundGroup=null,this.shadingGroup=null,this.actionGroup=null,this.fluffGroup=null,this.fowGroup=null,this.collectibleItems=[],this.trees=[],this.miniBlocks={bed:"bed",boat:"boat",bookEnchanted:"book_enchanted",bricks:"bricks",bucketEmpty:"bucket_empty",bucketLava:"bucket_lava",milk:"bucket_milk",bucketWater:"bucket_water",cactus:"cactus",carrots:"carrot",chest:"chest",clay:"clay_ball",coal:"coal",dirtCoarse:"coarse_dirt",cobblestone:"cobblestone",compass:"compass",blackConcrete:"concrete_black",blueConcrete:"concrete_blue",brownConcrete:"concrete_brown",blackConcretePowder:"concrete_powder_black",blueConcretePowder:"concrete_powder_blue",brownConcretePowder:"concrete_powder_brown",deadbush:"deadbush",diamond:"diamond",axeDiamond:"diamond_axe",pickaxeDiamond:"diamond_pickaxe",shovelDiamond:"diamond_shovel",dirt:"dirt",door:"door",doorIron:"door_iron",egg:"egg",emerald:"emerald",flint:"flint",flintAndSteel:"flint_and_steel",daisy:"flower_daisy",dandelion:"flower_dandelion",poppy:"flower_rose",glowstoneDust:"glowstone_dust",ingotGold:"gold_ingot",gravel:"gravel",gunPowder:"gunpowder",hardenedClay:"hardend_clay",hardenedClayBlack:"hardened_clay_stained_black",hardenedClayBlue:"hardened_clay_stained_blue",hardenedClayBrown:"hardened_clay_stained_brown",hardenedClayCyan:"hardened_clay_stained_cyan",hardenedClayGray:"hardened_clay_stained_gray",hardenedClayGreen:"hardened_clay_stained_green",hardenedClayLightBlue:"hardened_clay_stained_light_blue",hardenedClayLime:"hardened_clay_stained_lime",hardenedClayMagenta:"hardened_clay_stained_magenta",hardenedClayOrange:"hardened_clay_stained_orange",hardenedClayPink:"hardened_clay_stained_pink",hardenedClayPurple:"hardened_clay_stained_purple",hardenedClayRed:"hardened_clay_stained_red",hardenedClaySilver:"hardened_clay_stained_silver",hardenedClayWhite:"hardened_clay_stained_white",hardenedClayYellow:"hardened_clay_stained_yellow",heartofthesea:"heartofthesea_closed",ingotIron:"iron_ingot",lapisLazuli:"lapis_lazuli",logAcacia:"log_acacia",logBirch:"log_birch",logJungle:"log_jungle",logOak:"log_oak",logSpruce:"log_spruce",mapEmpty:"map_empty",minecart:"minecart_normal",nautilus:"nautilus",netherbrick:"netherbrick",netherrack:"netherrack",obsidian:"obsidian",piston:"piston",planksAcacia:"planks_acacia",planksBirch:"planks_birch",planksJungle:"planks_jungle",planksOak:"planks_oak",planksSpruce:"planks_spruce",potato:"potato",potion:"potion_bottle_drinkable",pressurePlateOak:"pressure_plate_oak",prismarine:"prismarine",quartzOre:"quartz",railGolden:"rail_golden",railNormal:"rail_normal",redstoneDust:"redstone_dust",redstoneTorch:"redstone_torch",reeds:"reeds",sand:"sand",sandstone:"sandstone",seaPickles:"sea_pickle",seedsWheat:"seeds_wheat",snow:"snow",snowBall:"snowball",tnt:"tnt",torch:"torch",turtle:"turtle",cropWheat:"wheat",wool_black:"wool_colored_black",wool_blue:"wool_colored_blue",wool_brown:"wool_colored_brown",wool_cyan:"wool_colored_cyan",wool_gray:"wool_colored_gray",wool_green:"wool_colored_green",wool_light_blue:"wool_colored_light_blue",wool_lime:"wool_colored_lime",wool_magenta:"wool_colored_magenta",wool_orange:"wool_colored_orange",wool_pink:"wool_colored_pink",wool_purple:"wool_colored_purple",wool_red:"wool_colored_red",wool_silver:"wool_colored_silver",wool:"wool_colored_white",wool_yellow:"wool_colored_yellow"},this.blocks={bedrock:["blocks","Bedrock",-13,0],bricks:["blocks","Bricks",-13,0],oreCoal:["blocks","Coal_Ore",-13,0],dirtCoarse:["blocks","Coarse_Dirt",-13,0],cobblestone:["blocks","Cobblestone",-13,0],oreDiamond:["blocks","Diamond_Ore",-13,0],dirt:["blocks","Dirt",-13,0],oreEmerald:["blocks","Emerald_Ore",-13,0],farmlandWet:["blocks","Farmland_Wet",-13,0],flowerDandelion:["blocks","Flower_Dandelion",-13,0],flowerOxeeye:["blocks","Flower_Oxeeye",-13,0],flowerRose:["blocks","Flower_Rose",-13,0],glass:["blocks","Glass",-13,0],oreGold:["blocks","Gold_Ore",-13,0],grass:["blocks","Grass",-13,0],gravel:["blocks","Gravel",-13,0],oreIron:["blocks","Iron_Ore",-13,0],oreLapis:["blocks","Lapis_Ore",-13,0],lava:["blocks","Lava_0",-13,0],logAcacia:["blocks","Log_Acacia",-13,0],logBirch:["blocks","Log_Birch",-13,0],logJungle:["blocks","Log_Jungle",-13,0],logOak:["blocks","Log_Oak",-13,0],logSpruce:["blocks","Log_Spruce",-13,0],logSpruceSnowy:["blocks","Log_Spruce",-13,0],obsidian:["blocks","Obsidian",-13,0],planksAcacia:["blocks","Planks_Acacia",-13,0],planksBirch:["blocks","Planks_Birch",-13,0],planksJungle:["blocks","Planks_Jungle",-13,0],planksOak:["blocks","Planks_Oak",-13,0],planksSpruce:["blocks","Planks_Spruce",-13,0],oreRedstone:["blocks","Redstone_Ore",-13,0],sand:["blocks","Sand",-13,0],sandstone:["blocks","Sandstone",-13,0],stone:["blocks","Stone",-13,0],tnt:["tnt","TNTexplosion0",-80,-58],water:["blocks","Water_0",-13,0],wool:["blocks","Wool_White",-13,0],wool_orange:["blocks","Wool_Orange",-13,0],wool_black:["blocks","Wool_Black",-13,0],wool_blue:["blocks","Wool_Blue",-13,0],wool_brown:["blocks","Wool_Brown",-13,0],wool_cyan:["blocks","Wool_Cyan",-13,0],wool_gray:["blocks","Wool_Gray",-13,0],wool_green:["blocks","Wool_Green",-13,0],wool_light_blue:["blocks","Wool_LightBlue",-13,0],wool_lime:["blocks","Wool_Lime",-13,0],wool_magenta:["blocks","Wool_Magenta",-13,0],wool_pink:["blocks","Wool_Pink",-13,0],wool_purple:["blocks","Wool_Purple",-13,0],wool_red:["blocks","Wool_Red",-13,0],wool_silver:["blocks","Wool_Silver",-13,0],wool_yellow:["blocks","Wool_Yellow",-13,0],leavesAcacia:["leavesAcacia","Leaves_Acacia0.png",-100,0],leavesBirch:["leavesBirch","Leaves_Birch0.png",-100,0],leavesJungle:["leavesJungle","Leaves_Jungle0.png",-100,0],leavesOak:["leavesOak","Leaves_Oak0.png",-100,0],leavesSpruce:["leavesSpruce","Leaves_Spruce0.png",-100,0],leavesSpruceSnowy:["leavesSpruceSnowy","Leaves_SpruceSnowy0.png",-100,36],watering:["blocks","Water_0",-13,0],cropWheat:["blocks","Wheat0",-13,0],torch:["torch","Torch0",-13,0],tallGrass:["blocks","TallGrass",-13,0],lavaPop:["lavaPop","LavaPop01",-13,0],redstoneSparkle:["redstoneSparkle","redstone_sparkle1.png",7,23],fire:["fire","",-11,135],bubbles:["bubbles","",-11,135],explosion:["explosion","",-70,60],door:["door","",-12,-15],doorIron:["doorIron","",-12,-15],rails:["blocks","Rails_Vertical",-13,-0],railsNorthEast:["blocks","Rails_BottomLeft",-13,0],railsNorthWest:["blocks","Rails_BottomRight",-13,0],railsEast:["blocks","Rails_Horizontal",-13,0],railsWest:["blocks","Rails_Horizontal",-13,0],railsEastWest:["blocks","Rails_Horizontal",-13,0],railsSouthEast:["blocks","Rails_TopLeft",-13,0],railsSouthWest:["blocks","Rails_TopRight",-13,0],railsNorth:["blocks","Rails_Vertical",-13,-0],railsSouth:["blocks","Rails_Vertical",-13,-0],railsNorthSouth:["blocks","Rails_Vertical",-13,-0],railsUnpowered:["blocks","Rails_UnpoweredVertical",-13,0],railsUnpoweredNorth:["blocks","Rails_UnpoweredVertical",-13,0],railsUnpoweredSouth:["blocks","Rails_UnpoweredVertical",-13,0],railsUnpoweredNorthSouth:["blocks","Rails_UnpoweredVertical",-13,0],railsUnpoweredEast:["blocks","Rails_UnpoweredHorizontal",-13,0],railsUnpoweredWest:["blocks","Rails_UnpoweredHorizontal",-13,0],railsUnpoweredEastWest:["blocks","Rails_UnpoweredHorizontal",-13,0],railsPowered:["blocks","Rails_PoweredVertical",-13,0],railsPoweredNorth:["blocks","Rails_PoweredVertical",-13,0],railsPoweredSouth:["blocks","Rails_PoweredVertical",-13,0],railsPoweredNorthSouth:["blocks","Rails_PoweredVertical",-13,0],railsPoweredEast:["blocks","Rails_PoweredHorizontal",-13,0],railsPoweredWest:["blocks","Rails_PoweredHorizontal",-13,0],railsPoweredEastWest:["blocks","Rails_PoweredHorizontal",-13,0],railsRedstoneTorch:["blocks","Rails_RedstoneTorch",-12,9],redstoneWire:["blocks","redstone_dust_dot_off",-13,0],redstoneWireHorizontal:["blocks","redstone_dust_line_h_off",-13,0],redstoneWireVertical:["blocks","redstone_dust_line_v_off",-13,0],redstoneWireUpRight:["blocks","redstone_dust_corner_BottomLeft_off",-13,0],redstoneWireUpLeft:["blocks","redstone_dust_corner_BottomRight_off",-13,0],redstoneWireDownRight:["blocks","redstone_dust_corner_TopLeft_off",-13,0],redstoneWireDownLeft:["blocks","redstone_dust_corner_TopRight_off",-13,0],redstoneWireTUp:["blocks","redstone_dust_cross_up_off",-13,0],redstoneWireTDown:["blocks","redstone_dust_cross_down_off",-13,0],redstoneWireTLeft:["blocks","redstone_dust_cross_left_off",-13,0],redstoneWireTRight:["blocks","redstone_dust_cross_right_off",-13,0],redstoneWireCross:["blocks","redstone_dust_cross_off",-13,0],redstoneWireOn:["blocks","redstone_dust_dot",-13,0],redstoneWireHorizontalOn:["blocks","redstone_dust_line_h",-13,0],redstoneWireVerticalOn:["blocks","redstone_dust_line_v",-13,0],redstoneWireUpRightOn:["blocks","redstone_dust_corner_BottomLeft",-13,0],redstoneWireUpLeftOn:["blocks","redstone_dust_corner_BottomRight",-13,0],redstoneWireDownRightOn:["blocks","redstone_dust_corner_TopLeft",-13,0],redstoneWireDownLeftOn:["blocks","redstone_dust_corner_TopRight",-13,0],redstoneWireTUpOn:["blocks","redstone_dust_cross_up",-13,0],redstoneWireTDownOn:["blocks","redstone_dust_cross_down",-13,0],redstoneWireTLeftOn:["blocks","redstone_dust_cross_left",-13,0],redstoneWireTRightOn:["blocks","redstone_dust_cross_right",-13,0],redstoneWireCrossOn:["blocks","redstone_dust_cross",-13,0],pressurePlateUp:["blocks","PressurePlate_Up",-13,0],pressurePlateDown:["blocks","PressurePlate_Down",-13,0],pistonUp:["blocks","piston_up",-13,0],pistonDown:["blocks","piston_down",-13,0],pistonLeft:["blocks","piston_left",-13,0],pistonRight:["blocks","piston_right",-13,0],pistonUpOn:["blocks","piston_base_up",-26,-13],pistonDownOn:["blocks","piston_base_down",-26,-13],pistonLeftOn:["blocks","piston_base_left",-26,-13],pistonRightOn:["blocks","piston_base_right",-26,-13],pistonArmLeft:["blocks","piston_arm_left",-26,-13],pistonArmRight:["blocks","piston_arm_right",-26,-13],pistonArmUp:["blocks","piston_arm_up",-26,-13],pistonArmDown:["blocks","piston_arm_down",-26,-13],pistonUpSticky:["blocks","piston_up",-13,0],pistonDownSticky:["blocks","piston_down_sticky",-13,0],pistonLeftSticky:["blocks","piston_left",-13,0],pistonRightSticky:["blocks","piston_right",-13,0],pistonUpOnSticky:["blocks","piston_base_up",-26,-13],pistonDownOnSticky:["blocks","piston_base_down_sticky",-26,-13],pistonLeftOnSticky:["blocks","piston_base_left",-26,-13],pistonRightOnSticky:["blocks","piston_base_right",-26,-13],pistonArmLeftSticky:["blocks","piston_arm_left",-26,-13],pistonArmRightSticky:["blocks","piston_arm_right",-26,-13],pistonArmUpSticky:["blocks","piston_arm_up",-26,-13],pistonArmDownSticky:["blocks","piston_arm_down_sticky",-26,-13],cactus:["blocks","cactus",-13,0],deadBush:["blocks","dead_bush",-13,0],glowstone:["blocks","glowstone",-13,0],grassPath:["blocks","grass_path",-13,0],ice:["blocks","ice",-13,0],netherrack:["blocks","netherrack",-13,0],netherBrick:["blocks","nether_brick",-13,0],quartzOre:["blocks","quartz_ore",-13,0],snow:["blocks","snow",-13,0],snowyGrass:["blocks","snowy_grass",-13,0],topSnow:["blocks","top_snow",-13,0],sandDeep:["blocks","Sand_Deep",-13,0],gravelDeep:["blocks","Gravel_Deep",-13,0],reeds:["blocks","Reeds",-13,-18],Nether_Portal:["blocks","NetherPortal1",0,-58],bedFoot:["blocks","Bed_Foot",-13,0],bedHead:["blocks","Bed_Head",-13,10],clay:["blocks","Clay",-13,0],glassBlack:["blocks","Glass_Black",-13,0],glassBlue:["blocks","Glass_Blue",-13,0],glassBrown:["blocks","Glass_Brown",-13,0],glassCyan:["blocks","Glass_Cyan",-13,0],glassGray:["blocks","Glass_Gray",-13,0],glassGreen:["blocks","Glass_Green",-13,0],glassLightBlue:["blocks","Glass_LightBlue",-13,0],glassLime:["blocks","Glass_Lime",-13,0],glassMagenta:["blocks","Glass_Magenta",-13,0],glassOrange:["blocks","Glass_Orange",-13,0],glassPink:["blocks","Glass_Pink",-13,0],glassPurple:["blocks","Glass_Purple",-13,0],glassRed:["blocks","Glass_Red",-13,0],glassSilver:["blocks","Glass_Silver",-13,0],glassWhite:["blocks","Glass_White",-13,0],glassYellow:["blocks","Glass_Yellow",-13,0],terracotta:["blocks","Terracotta",-13,0],terracottaBlack:["blocks","Terracotta_Black",-13,0],terracottaBlue:["blocks","Terracotta_Blue",-13,0],terracottaBrown:["blocks","Terracotta_Brown",-13,0],terracottaCyan:["blocks","Terracotta_Cyan",-13,0],terracottaGray:["blocks","Terracotta_Gray",-13,0],terracottaGreen:["blocks","Terracotta_Green",-13,0],terracottaLightBlue:["blocks","Terracotta_LightBlue",-13,0],terracottaLime:["blocks","Terracotta_Lime",-13,0],terracottaMagenta:["blocks","Terracotta_Magenta",-13,0],terracottaOrange:["blocks","Terracotta_Orange",-13,0],terracottaPink:["blocks","Terracotta_Pink",-13,0],terracottaPurple:["blocks","Terracotta_Purple",-13,0],terracottaRed:["blocks","Terracotta_Red",-13,0],terracottaSilver:["blocks","Terracotta_Silver",-13,0],terracottaWhite:["blocks","Terracotta_White",-13,0],terracottaYellow:["blocks","Terracotta_Yellow",-13,0],strippedOak:["blocks","Stripped_Oak",-12,0],strippedDarkOak:["blocks","Stripped_Dark_Oak",-12,0],stoneBricks:["blocks","Stone_Bricks",-12,0],chiseledStoneBricks:["blocks","Stone_Bricks_Chisled",-12,0],mossyStoneBricks:["blocks","Stone_Bricks_Mossy",-12,0],crackedStoneBricks:["blocks","Stone_Bricks_Cracked",-12,0],magmaBlock:["blocks","Magma_Block0",-12,0],blueCoralBlock:["blocks","Coral_Block_Blue",-12,0],pinkCoralBlock:["blocks","Coral_Block_Pink",-12,0],magentaCoralBlock:["blocks","Coral_Block_Magenta",-12,0],redCoralBlock:["blocks","Coral_Block_Red",-12,0],yellowCoralBlock:["blocks","Coral_Block_Yellow",-12,0],deadCoralBlock:["blocks","Coral_Block_Dead_Blue",-12,0],blueDeadCoralBlock:["blocks","Coral_Block_Dead_Blue",-12,0],pinkDeadCoralBlock:["blocks","Coral_Block_Dead_Pink",-12,0],magentaDeadCoralBlock:["blocks","Coral_Block_Dead_Magenta",-12,0],readDeadCoralBlock:["blocks","Coral_Block_Dead_Red",-12,0],yellowDeadCoralBlock:["blocks","Coral_Block_Dead_Yellow",-12,0],prismarine:["blocks","Prismarine0",-12,0],prismarineBricks:["blocks","Prismarine_Bricks",-12,0],darkPrismarine:["blocks","Prismarine_Dark",-12,0],seaLantern:["blocks","Sea_Lantern0",-12,0],packedIce:["blocks","Ice_Packed",-12,0],blueIce:["blocks","Ice_Blue",-12,0],blackConcrete:["blocks","Concrete_Black",-12,0],seaGrass:["blocks","Seagrass0",-12,0],kelp:["blocks","KelpSingle_0",-12,0],polishedGranite:["blocks","Granite_Polished",-12,0],coralFanBlueBottom:["blocks","Coral_Fan_Blue_Bottom",-12,0],coralFanPinkBottom:["blocks","Coral_Fan_Pink_Bottom",-12,0],coralFanMagentaBottom:["blocks","Coral_Fan_Magenta_Bottom",-12,0],coralFanRedBottom:["blocks","Coral_Fan_Red_Bottom",-12,0],coralFanYellowFanBottom:["blocks","Coral_Fan_Yellow_Bottom",-12,0],coralFanBlueTop:["blocks","Coral_Fan_Blue_Top",-12,0],coralFanPinkTop:["blocks","Coral_Fan_Pink_Top",-12,0],coralFanMagentaTop:["blocks","Coral_Fan_Magenta_Top",-12,0],coralFanRedTop:["blocks","Coral_Fan_Red_Top",-12,0],coralFanYellowFanTop:["blocks","Coral_Fan_Yellow_Top",-12,0],coralFanBlueLeft:["blocks","Coral_Fan_Blue_Left",-12,0],coralFanPinkLeft:["blocks","Coral_Fan_Pink_Left",-12,0],coralFanMagentaLeft:["blocks","Coral_Fan_Magenta_Left",-12,0],coralFanRedLeft:["blocks","Coral_Fan_Red_Left",-12,0],coralFanYellowFanLeft:["blocks","Coral_Fan_Yellow_Left",-12,0],coralFanBlueRight:["blocks","Coral_Fan_Blue_Right",-12,0],coralFanPinkRight:["blocks","Coral_Fan_Pink_Right",-12,0],coralFanMagentaRight:["blocks","Coral_Fan_Magenta_Right",-12,0],coralFanRedRight:["blocks","Coral_Fan_Red_Right",-12,0],coralFanYellowFanRight:["blocks","Coral_Fan_Yellow_Right",-12,0],coralPlantBlue:["blocks","Coral_Plant_Blue",-12,0],coralPlantBlueDeep:["blocks","Coral_Plant_Blue_Sand",-12,0],coralPlantPink:["blocks","Coral_Plant_Pink",-12,0],coralPlantPinkDeep:["blocks","Coral_Plant_Pink_Sand",-12,0],coralPlantMagenta:["blocks","Coral_Plant_Magenta",-12,0],coralPlantMagentaDeep:["blocks","Coral_Plant_Magenta_Sand",-12,0],coralPlantRed:["blocks","Coral_Plant_Red",-12,0],coralPlantRedDeep:["blocks","Coral_Plant_Red_Sand",-12,0],coralPlantYellow:["blocks","Coral_Plant_Yellow",-12,0],coralPlantYellowDeep:["blocks","Coral_Plant_Yellow_Sand",-12,0],magmaUnderwater:["blocks","Magma_Bubble_Boat0",-12,4],magmaDeep:["blocks","Magma_Bubble_Deep0",-12,0],bubbleColumn:["blocks","Bubble_Column0",-12,0],conduit:["blocks","Conduit00",-13,-10],seaPickles:["blocks","SeaPickle",-10,-30],Chest:["blocks","Chest0",-12,-20],chest:["blocks","Chest0",-12,-20],invisible:["blocks","Invisible",0,0]},this.actionPlaneBlocks=[],this.toDestroy=[],this.resettableTweens=[],this.treeFluffTypes={treeAcacia:[[0,0],[-1,0],[1,0],[-1,-1],[0,-1],[1,-1],[-1,-2],[0,-2],[1,-2]],treeBirch:[[0,0],[-1,0],[1,0],[-1,-1],[0,-1],[1,-1],[-1,-2],[0,-2],[1,-2],[0,-3]],treeJungle:[[0,0],[-1,0],[1,0],[-1,-1],[0,-1],[1,-1],[-1,-2],[0,-2],[1,-2],[0,-3],[1,-3]],treeOak:[[0,0],[-1,0],[1,0],[-1,-1],[0,-1],[1,-1],[-1,-2],[0,-2],[0,-3]],treeSpruce:[[0,0],[-1,0],[1,0],[-1,-1],[0,-1],[1,-1],[-1,-2],[0,-2],[1,-2],[0,-3]],treeSpruceSnowy:[[0,0],[-1,0],[1,0],[-1,-1],[0,-1],[1,-1],[-1,-2],[0,-2],[1,-2],[0,-3]]}}return o(t,[{key:"initPrismarine",value:function(){if(!this.prismarine){this.prismarine=this.controller.game.make.bitmapData(64,64,"prismarine"),this.prismarineFrames=[];for(var e=0;e<6;e++)this.prismarineFrames[e]=this.controller.game.make.sprite(0,0,"blocks","Prismarine"+e);this.prismarine.copy(this.prismarineFrames[0])}}},{key:"updatePrismarine",value:function(){var e=Math.floor(this.prismarinePhase),t=Math.ceil(this.prismarinePhase)%6,n=this.prismarinePhase-e;this.prismarine.copy(this.prismarineFrames[e]),0<n&&this.prismarine.copy(this.prismarineFrames[t],null,null,null,null,null,null,null,null,null,null,null,null,null,n)}},{key:"yToIndex",value:function(e){return this.controller.levelModel.yToIndex(e)}},{key:"create",value:function(e){if(this.createGroups(),this.reset(e),e.isUnderwater()){var t=this.game.add.sprite(0,0,"underwaterOverlay");t.visible=!1,t.smoothed=!1,this.uniforms.surface.value=t.texture}}},{key:"resetEntity",value:function(e){this.preparePlayerSprite(e.name,e),e.getAnimationManager().stop(),this.setPlayerPosition(e.position,e.isOnBlock,e),e.shouldUpdateSelectionIndicator()&&(this.setSelectionIndicatorPosition(e.position[0],e.position[1]),this.selectionIndicator.visible=!0),this.initWithIdleAnimation(e.position,e.facing,e.isOnBlock,e)}},{key:"reset",value:function(e){this.player=e.player,this.agent=e.agent,this.resettableTweens.forEach(function(e){e.stop(!1)}),this.resettableTweens.length=0,this.collectibleItems=[],this.trees=[],this.resetGroups(e),e.usePlayer&&(this.resetEntity(this.player),e.usingAgent&&this.resetEntity(this.agent)),e.isUnderwater()&&("cold"===e.getOceanType()&&(this.uniforms.tint.value=[57/255,56/255,201/255,1]),this.game.world.filters=[this.waveShader]),this.updateShadingGroup(e.shadingPlane),this.updateFowGroup(e.fowPlane),this.controller.followingPlayer()?(this.game.world.setBounds(0,0,40*e.planeWidth,40*e.planeHeight),this.game.camera.follow(this.player.sprite),this.game.world.scale.x=1,this.game.world.scale.y=1):this.game.world.setBounds(0,0,400,400)}},{key:"update",value:function(){for(var e=0;e<this.toDestroy.length;++e)this.toDestroy[e].destroy();this.toDestroy=[],this.prismarine&&(this.prismarinePhase=(this.prismarinePhase+this.controller.originalFpsToScaled(.015))%6,this.updatePrismarine())}},{key:"render",value:function(){this.actionGroup.sort("sortOrder"),this.fluffGroup.sort("z");var e=this.game.camera.view;this.uniforms.x.value=e.x/e.width,this.uniforms.y.value=e.y/e.height,this.uniforms.time.value++}},{key:"scaleShowWholeWorld",value:function(e){var t=this.controller.scaleFromOriginal(),n=O(t,2),o=n[0],i=n[1],a=this.addResettableTween(this.game.world.scale).to({x:1/o,y:1/i},1e3,Phaser.Easing.Exponential.Out);this.game.camera.unfollow();var r=this.addResettableTween(this.game.camera).to({x:0,y:0},1e3,Phaser.Easing.Exponential.Out);a.onComplete.addOnce(function(){e()}),r.start(),a.start()}},{key:"getDirectionName",value:function(e){return"_"+D.directionToRelative(e).toLowerCase()}},{key:"playDoorAnimation",value:function(e,t,n){var o=this.yToIndex(e[1])+e[0],i=this.actionPlaneBlocks[o],a=t?"open":"close",r=this.playScaledSpeed(i.animations,a);this.onAnimationEnd(r,function(){r.updateCurrentFrame(),n()})}},{key:"playOpenConduitAnimation",value:function(e){var t=this,n=this.yToIndex(e[1])+e[0],o=this.actionPlaneBlocks[n],i=this.playScaledSpeed(o.animations,"activation");this.onAnimationEnd(i,function(){t.controller.levelModel.actionPlane.getBlockAt(e).isEmissive=!0,t.controller.updateShadingPlane(),t.controller.updateFowPlane(),t.playScaledSpeed(o.animations,"open")})}},{key:"playCloseConduitAnimation",value:function(e){var t=this,n=this.yToIndex(e[1])+e[0],o=this.actionPlaneBlocks[n],i=this.playScaledSpeed(o.animations,"deactivation");this.onAnimationEnd(i,function(){t.controller.levelModel.actionPlane.getBlockAt(e).isEmissive=!1,t.controller.updateShadingPlane(),t.controller.updateFowPlane()})}},{key:"playOpenChestAnimation",value:function(t){var n=this,e=this.yToIndex(t[1])+t[0],o=this.actionPlaneBlocks[e],i=this.playScaledSpeed(o.animations,"open");this.onAnimationEnd(i,function(){var e=n.getTreasureTypeFromChest(n.controller.levelModel.actionPlane.getBlockAt(t));e&&n.createMiniBlock(t[0],t[1],e,{collectibleDistance:-1,xOffsetRange:0,yOffsetRange:0,isOnBlock:!0})})}},{key:"getTreasureTypeFromChest",value:function(e){return e.blockType.substring(0,e.blockType.length-5)}},{key:"playPlayerAnimation",value:function(e,t,n){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:this.player,i=this.getDirectionName(n);o.sprite.sortOrder=this.yToIndex(t[1])+o.getSortOrderOffset();var a=e+i;return this.playScaledSpeed(o.getAnimationManager(),a)}},{key:"playIdleAnimation",value:function(e,t,n){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this.player,i=this.controller.levelModel.isUnderwater()?"walk":"idle";this.playPlayerAnimation(i,e,t,n,o)}},{key:"initWithIdleAnimation",value:function(e,t,n){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this.player;this.playPlayerAnimation("idle",e,t,n,o)}},{key:"playSuccessAnimation",value:function(e,t,n,o){var i=this,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:this.player;this.controller.delayBy(250,function(){i.audioPlayer.play("success"),i.onAnimationEnd(i.playPlayerAnimation("celebrate",e,t,n,a),function(){o()})})}},{key:"playFailureAnimation",value:function(e,t,n,o){var i=this,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:this.player;this.controller.delayBy(500,function(){i.audioPlayer.play("failure"),i.onAnimationEnd(i.playPlayerAnimation("fail",e,t,n,a),function(){i.controller.delayBy(800,o)})})}},{key:"playBumpAnimation",value:function(e,t,n){var o=this,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this.player,a=this.playPlayerAnimation("bump",e,t,n,i);return a.onComplete.add(function(){o.playIdleAnimation(e,t,n,i)}),a}},{key:"playDrownFailureAnimation",value:function(e,t,n,o){var i,a;this.playPlayerAnimation("fail",e,t,n),this.createBlock(this.fluffGroup,e[0],e[1],"bubbles"),i=this.fluffGroup.create(0,0,"finishOverlay");var r=this.controller.scaleFromOriginal(),l=O(r,2),s=l[0],c=l[1];i.scale.x=s,i.scale.y=c,i.alpha=0,i.tint=3296255,(a=this.addResettableTween(i).to({alpha:.5},200,Phaser.Easing.Linear.None)).onComplete.add(function(){o()}),a.start()}},{key:"playBurnInLavaAnimation",value:function(e,t,n,o){var i,a;this.playPlayerAnimation("jumpUp",e,t,n),this.createBlock(this.fluffGroup,e[0],e[1],"fire"),i=this.fluffGroup.create(0,0,"finishOverlay");var r=this.controller.scaleFromOriginal(),l=O(r,2),s=l[0],c=l[1];i.scale.x=s,i.scale.y=c,i.alpha=0,i.tint=13719565,(a=this.addResettableTween(i).to({alpha:.5},200,Phaser.Easing.Linear.None)).onComplete.add(function(){o()}),a.start()}},{key:"playDestroyTntAnimation",value:function(e,t,n,o,i,a){var r,l,s=this;if(0!==o.length){for(var c in this.audioPlayer.play("fuse"),o)r=this.actionPlaneBlocks[this.coordinatesToIndex(o[c])],l=this.playScaledSpeed(r.animations,"explode");this.onAnimationEnd(l,function(){s.audioPlayer.play("explode"),a()})}else a()}},{key:"playCreeperExplodeAnimation",value:function(e,t,n,o,i){var a=this;this.controller.delayBy(180,function(){a.playPlayerAnimation("bump",e,t,!1).onComplete.add(function(){a.audioPlayer.play("fuse"),a.playExplodingCreeperAnimation(e,t,n,o,i,a),a.controller.delayBy(200,function(){a.onAnimationLoopOnce(a.playPlayerAnimation("jumpUp",e,t,!1),function(){a.playIdleAnimation(e,t,o)})})})})}},{key:"flashEntity",value:function(e){return this.flashSpriteToWhite(e.sprite)}},{key:"flashBlock",value:function(e){var t=this.yToIndex(e[1])+e[0],n=this.actionPlaneBlocks[t];return this.flashSpriteToWhite(n)}},{key:"flashSpriteToWhite",value:function(e){var t=this.game.add.bitmapData(e.width,e.height);t.fill(255,255,255,255);var n=this.game.add.bitmapData(e.width,e.height),o={x:0,y:0,width:e.width,height:e.height},i={x:0,y:0,width:e.texture.crop.width,height:e.texture.crop.height};n.alphaMask(t,e,o,i);var a=e.addChild(this.game.make.sprite(0,0,n.texture)),r=a.alpha=0,l={alpha:1},s={alpha:0},c=this.game.add.tween(a).to(l,60,Phaser.Easing.Linear.None),u=this.game.add.tween(a).to(s,60,Phaser.Easing.Linear.None);r=120,c.chain(u);for(var p=u,d=0;d<2;d++){var h=this.game.add.tween(a).to(s,240,Phaser.Easing.Linear.None),f=this.game.add.tween(a).to(l,60,Phaser.Easing.Linear.None),g=this.game.add.tween(a).to(s,60,Phaser.Easing.Linear.None);r+=360,p.chain(h),h.chain(f),f.chain(g),p=g}return p.onComplete.add(function(){a.destroy()}),c.start(),2*r}},{key:"playExplodingCreeperAnimation",value:function(e,t,n,o,i){var a=this,r=this.yToIndex(n[1])+n[0],l=this.actionPlaneBlocks[r],s=l.animations.getAnimation("explode");s.onComplete.add(function(){l.kill(),a.playExplosionAnimation(e,t,n,o,function(){a.controller.delayBy(100,function(){a.playFailureAnimation(e,t,!1,i)})},!1),a.audioPlayer.play("explode"),a.playExplosionCloudAnimation(n)}),s.play()}},{key:"playExplosionCloudAnimation",value:function(e){this.createBlock(this.fluffGroup,e[0],e[1],"explosion")}},{key:"coordinatesToIndex",value:function(e){return this.yToIndex(e[1])+e[0]}},{key:"playMinecartTurnAnimation",value:function(e,t,n,o,i){var a=t?D.North:D.South;return this.playPlayerAnimation("mineCart_turn"+i,e,a,!1)}},{key:"playMinecartMoveForwardAnimation",value:function(e,t,n,o,i,a){var r;return this.audioPlayer.play("minecart"),this.playPlayerAnimation("mineCart",e,t,!1),(r=this.addResettableTween(this.player.sprite).to(this.positionToScreen(i),a,Phaser.Easing.Linear.None)).start(),this.player.sprite.sortOrder=this.yToIndex(i[1])+10,r}},{key:"playMinecartAnimation",value:function(e,t){var n=this,o=new y(3,2);this.setPlayerPosition(o,e),this.player.facing=2;var i=this.playLevelEndAnimation(o,this.player.facing,e,t,!1);this.game.world.setBounds(0,0,440,400),this.game.camera.follow(this.player.sprite),i.onComplete.add(function(){n.playTrack(o,n.player.facing,e,n.player,t)})}},{key:"playTrack",value:function(e,t,n){var o=this,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this.player,a=arguments[4];i.onTracks=!0;var r=this.controller.levelModel.actionPlane.getMinecartTrack(e,t),l=y.forward(i.position,t);if(i.getOffTrack||!r&&!this.isFirstTimeOnRails(e,l))return i.getOffTrack=!1,i.onTracks=!1,void(a&&a());if(void 0===r&&void 0===(r=this.controller.levelModel.actionPlane.getMinecartTrack(l,t)))return i.getOffTrack=!1,i.onTracks=!1,void(a&&a());var s=void 0,c=O(r,4),u=c[0],p=c[1],d=c[2],h=c[3];if(this.player.position=p,"turn"===u.substring(0,4)){s=u.substring(5);var f=t===D.North||d===D.North;this.onAnimationEnd(this.playMinecartTurnAnimation(e,f,n,a,s),function(){o.playTrack(p,d,n,i,a)})}else this.onAnimationEnd(this.playMinecartMoveForwardAnimation(e,t,n,a,p,h),function(){o.playTrack(p,d,n,i,a)})}},{key:"isFirstTimeOnRails",value:function(e,t){var n=this.controller.levelModel.actionPlane.getBlockAt(t),o=this.controller.levelModel.actionPlane.getBlockAt(e);return!(!n||!o||o.isRail||!n.isRail)}},{key:"addHouseBed",value:function(e){var t=e[1]-1;this.actionGroup.create(38*e[0],35*t,"bed").sortOrder=this.yToIndex(e[1])}},{key:"addDoor",value:function(e){var t,n=this.actionPlaneBlocks[this.coordinatesToIndex(e)];this.createActionPlaneBlock(e,"door"),t=this.createBlock(this.groundGroup,e[0],e[1],"wool_orange"),n.kill(),t.sortOrder=this.yToIndex(6)}},{key:"playSuccessHouseBuiltAnimation",value:function(e,t,n,o,i,a,r){var l=this;this.playLevelEndAnimation(e,t,n,function(){l.controller.delayBy(4e3,a)},!0).onComplete.add(function(){var e,t;l.audioPlayer.play("houseSuccess");for(var n=0;n<o.length;++n)e=o[n][1],t=o[n][2],l.createBlock(l.groundGroup,e,t,"wool_orange").sortOrder=l.yToIndex(t);l.addHouseBed(i[0]),l.addDoor(i[1]),l.groundGroup.sort("sortOrder"),r()})}},{key:"playLevelEndAnimation",value:function(e,t,n,o,i){var a,r,l,s=this;a=this.fluffGroup.create(0,0,"finishOverlay");var c=this.controller.scaleFromOriginal(),u=O(c,2),p=u[0],d=u[1];return a.scale.x=p,a.scale.y=d,a.alpha=0,r=this.tweenToWhite(a),l=this.tweenFromWhiteToClear(a),r.onComplete.add(function(){s.selectionIndicator.visible=!1,s.setPlayerPosition(e,n),l.start()}),i&&l.onComplete.add(function(){s.playSuccessAnimation(e,t,n,o)}),r.start(),r}},{key:"tweenFromWhiteToClear",value:function(e){return this.addResettableTween(e).to({alpha:0},700,Phaser.Easing.Linear.None)}},{key:"tweenToWhite",value:function(e){return this.addResettableTween(e).to({alpha:1},300,Phaser.Easing.Linear.None)}},{key:"playBlockSound",value:function(e){if("water"!==e&&"lava"!==e&&!this.controller.levelModel.isUnderwater()){var t=e.substring(0,3);"stone"===e||"cobblestone"===e||"bedrock"===e||"ore"===t||"bricks"===e?this.audioPlayer.play("stepStone"):"grass"===e||"dirt"===e||"dirtCoarse"===e||"wool_orange"===e||"wool"===e?this.audioPlayer.play("stepGrass"):"gravel"===e?this.audioPlayer.play("stepGravel"):"farmlandWet"===e?this.audioPlayer.play("stepFarmland"):this.audioPlayer.play("stepWood")}}},{key:"playMoveForwardAnimation",value:function(e,t,n,o,i,a,r){var l=e.position[1]+(n===D.North?1:0);this.playWalkAnimation(e,t,n,o,i,a,l,r)}},{key:"playMoveBackwardAnimation",value:function(e,t,n,o,i,a,r){var l=e.position[1]+(n===D.South?1:0);this.playWalkAnimation(e,t,n,o,i,a,l,r)}},{key:"playWalkAnimation",value:function(n,e,t,o,i,a,r,l){var s=this,c=void 0,u=n.position;this.playBlockSound(a),n.shouldUpdateSelectionIndicator()&&this.setSelectionIndicatorPosition(u[0],u[1]),(c=o?this.playPlayerJumpDownVerticalAnimation(t,u,e):(this.playPlayerAnimation("walk",e,t,i,n),this.addResettableTween(n.sprite).to(this.positionToScreen(u,i,n),180,Phaser.Easing.Linear.None))).onUpdateCallback(function(e,t){.75<=t&&(n.sprite.sortOrder=s.yToIndex(r)+n.getSortOrderOffset(),e.onUpdateCallback(null))}),c.onComplete.add(function(){l()}),c.start()}},{key:"playPlayerJumpDownVerticalAnimation",value:function(e,t){var n=this,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t;if(!this.controller.levelModel.isUnderwater()){var i="jumpDown"+this.getDirectionName(e);this.playScaledSpeed(this.player.getAnimationManager(),i)}var a=this.positionToScreen(o),r=this.positionToScreen(t),l=this.addResettableTween(this.player.sprite).to({x:[a.x,r.x,r.x],y:[a.y,r.y-50,r.y]},300,Phaser.Easing.Linear.None).interpolation(function(e,t){return Phaser.Math.bezierInterpolation(e,t)});return l.onComplete.addOnce(function(){n.audioPlayer.play("fall")}),l.start(),l}},{key:"playPlaceBlockAnimation",value:function(e,t,n,o,i,a){var r=this,l=this.yToIndex(e[1])+e[0];if(i.shouldUpdateSelectionIndicator()&&this.setSelectionIndicatorPosition(e[0],e[1]),i===this.agent||_.isWalkable(n))var s=this.playPlayerAnimation("punch",e,t,!1,i).onComplete.add(function(){s.detach(),a()});else{this.audioPlayer.play("placeBlock");var c=this.getDirectionName(t);""!==o&&this.playExplosionAnimation(e,t,e,o,function(){},!1),this.controller.levelModel.isUnderwater()||this.playScaledSpeed(this.player.getAnimationManager(),"jumpUp"+c);var u=this.addResettableTween(this.player.sprite).to({y:40*e[1]-55},125,Phaser.Easing.Cubic.EaseOut);u.onComplete.addOnce(function(){u=null,""!==o&&r.actionPlaneBlocks[l].kill(),a()}),u.start()}}},{key:"playPlaceBlockInFrontAnimation",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.player,t=arguments[1],n=arguments[2],o=arguments[3],i=arguments[4];this.setSelectionIndicatorPosition(o[0],o[1]),this.playPlayerAnimation("punch",t,n,!1,e).onComplete.addOnce(function(){i()})}},{key:"correctForShadowOverlay",value:function(e,t){e.startsWith("piston")&&(t.sortOrder-=.1)}},{key:"createActionPlaneBlock",value:function(e,t){var n=new _(t),o=this.yToIndex(e[1])+e[0];if(this.actionGroup.remove(this.actionPlaneBlocks[o]),this.groundGroup.remove(this.actionPlaneBlocks[o]),n.isEmpty)this.actionPlaneBlocks[o]=null;else{var i=void 0;if(n.getIsMiniblock())i=this.createMiniBlock(e[0],e[1],t,{collectibleDistance:1,xOffsetRange:10,yOffsetRange:10});else{var a=n.shouldRenderOnGroundPlane()?this.groundGroup:this.actionGroup,r=n.shouldRenderOnGroundPlane()?-.5:0;i=n.getIsChestblock()?this.createBlock(a,e[0],e[1]+r,"Chest"):this.createBlock(a,e[0],e[1]+r,t)}i&&(i.sortOrder=this.yToIndex(e[1]),this.correctForShadowOverlay(t,i)),this.actionPlaneBlocks[o]=i}}},{key:"playShearAnimation",value:function(e,t,n,o,i){var a=this,r=this.yToIndex(n[1])+n[0],l=this.actionPlaneBlocks[r];l.animations.stop(null,!0),this.onAnimationLoopOnce(this.playScaledSpeed(l.animations,"used"),function(){a.playScaledSpeed(l.animations,"face")}),this.playExplosionAnimation(e,t,n,o,i,!0)}},{key:"playShearSheepAnimation",value:function(n,o,i,a,r){var l=this;this.setSelectionIndicatorPosition(i[0],i[1]),this.onAnimationEnd(this.playPlayerAnimation("punch",n,o,!1),function(){var e=l.yToIndex(i[1])+i[0],t=l.actionPlaneBlocks[e];t.animations.stop(null,!0),l.onAnimationLoopOnce(l.playScaledSpeed(t.animations,"used"),function(){l.playScaledSpeed(t.animations,"face")}),l.playExplosionAnimation(n,o,i,a,r,!0)})}},{key:"destroyBlockWithoutPlayerInteraction",value:function(e){var t=this,n=this.yToIndex(e[1])+e[0],o=this.actionPlaneBlocks[n],i=this.actionGroup.create(40*e[0]-12,40*e[1]-22,"destroyOverlay","destroy1");i.sortOrder=this.yToIndex(e[1])+2,this.onAnimationEnd(i.animations.add("destroy",Phaser.Animation.generateFrameNames("destroy",1,12,"",0),30,!1),function(){t.actionPlaneBlocks[n]=null,o.hasOwnProperty("onBlockDestroy")&&o.onBlockDestroy(o),o.kill(),i.kill(),t.toDestroy.push(o),t.toDestroy.push(i),t.audioPlayer.play("dig_wood1")}),this.playScaledSpeed(i.animations,"destroy")}},{key:"playDestroyBlockAnimation",value:function(e,t,n,o,i,a){i.shouldUpdateSelectionIndicator()&&this.setSelectionIndicatorPosition(n[0],n[1]);var r=void 0;r=i===this.agent||this.controller.levelModel.isUnderwater()?"punchDestroy":o.match(/(ore|stone|clay|bricks|bedrock)/)?"mine":"punchDestroy",this.playPlayerAnimation(r,e,t,!1,i),this.playMiningParticlesAnimation(t,n),this.playBlockDestroyOverlayAnimation(e,t,n,o,i,a)}},{key:"playPunchDestroyAirAnimation",value:function(e,t,n,o){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:this.player;this.playPunchAnimation(e,t,n,"punchDestroy",o,i)}},{key:"playPunchAirAnimation",value:function(e,t,n,o){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:this.player;this.playPunchAnimation(e,t,n,"punch",o,i)}},{key:"playPunchAnimation",value:function(e,t,n,o,i){var a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:this.player;a.shouldUpdateSelectionIndicator()&&this.setSelectionIndicatorPosition(n[0],n[1]),this.onAnimationEnd(this.playPlayerAnimation(o,e,t,!1,a),function(){i()})}},{key:"playBlockDestroyOverlayAnimation",value:function(e,t,n,o,i,a){var r=this,l=this.yToIndex(n[1])+n[0],s=this.actionPlaneBlocks[l],c=function(){s.hasOwnProperty("onBlockDestroy")&&s.onBlockDestroy(s),r.controller.levelModel.destroyBlockForward(i),r.controller.updateShadingPlane(),r.controller.updateFowPlane(),i.shouldUpdateSelectionIndicator()&&r.setSelectionIndicatorPosition(e[0],e[1]),r.audioPlayer.play("dig_wood1"),r.playExplosionAnimation(e,t,n,o,a,!0,i)};if(_.skipsDestructionOverlay(o))c();else{var u=this.actionGroup.create(40*n[0]-12,40*n[1]-22,"destroyOverlay","destroy1");if(_.isFlat(o)){var p=new Phaser.Rectangle(0,0,60,40);u.position.y+=20,u.crop(p)}u.sortOrder=this.yToIndex(n[1])+2,this.onAnimationEnd(u.animations.add("destroy",Phaser.Animation.generateFrameNames("destroy",1,12,"",0),30,!1),function(){u.kill(),r.toDestroy.push(u),c()}),this.playScaledSpeed(u.animations,"destroy")}}},{key:"playMiningParticlesAnimation",value:function(e,t){var n=this,o=[[24,-100,-80],[12,-120,-80],[0,-60,-80],[36,-80,-60]],i=this.getDirectionName(e),a="_left"===i?0:"_bottom"===i?1:"_right"===i?2:3,r=o[a][0],l=o[a][1],s=o[a][2],c=this.actionGroup.create(l+40*t[0],s+40*t[1],"miningParticles","MiningParticles"+r);c.sortOrder=this.yToIndex(t[1])+2,this.onAnimationEnd(c.animations.add("miningParticles",Phaser.Animation.generateFrameNames("MiningParticles",r,r+11,"",0),30,!1),function(){c.kill(),n.toDestroy.push(c)}),this.playScaledSpeed(c.animations,"miningParticles")}},{key:"playExplosionAnimation",value:function(e,t,n,o,i,a){var r=this,l=6<arguments.length&&void 0!==arguments[6]?arguments[6]:this.player,s=this.actionGroup.create(40*n[0]-36,40*n[1]-30,"blockExplode","BlockBreakParticle0");switch(o){case"treeAcacia":case"logAcacia":s.tint=7103834;break;case"treeBirch":case"logBirch":s.tint=14341836;break;case"treeJungle":case"logJungle":s.tint=6967089;break;case"treeOak":case"logOak":s.tint=6771249;break;case"treeSpruce":case"logSpruce":s.tint=4929827;break;case"planksAcacia":s.tint=12215095;break;case"planksBirch":s.tint=14142349;break;case"planksJungle":s.tint=12093284;break;case"planksOak":s.tint=11833434;break;case"planksSpruce":s.tint=8412726;break;case"stone":case"oreCoal":case"oreDiamond":case"oreIron":case"oreGold":case"oreEmerald":case"oreRedstone":s.tint=13027014;break;case"grass":case"cropWheat":s.tint=6131491;break;case"dirt":s.tint=9068083;break;case"redstoneWireOn":case"redstoneWireHorizontalOn":case"redstoneWireVerticalOn":case"redstoneWireUpRightOn":case"redstoneWireUpLeftOn":case"redstoneWireDownRightOn":case"redstoneWireDownLeftOn":case"redstoneWireTUpOn":case"redstoneWireTDownOn":case"redstoneWireTLeftOn":case"redstoneWireTRightOn":case"redstoneWireCrossOn":s.tint=10028807;break;case"redstoneWire":case"redstoneWireHorizontal":case"redstoneWireVertical":case"redstoneWireUpRight":case"redstoneWireUpLeft":case"redstoneWireDownRight":case"redstoneWireDownLeft":case"redstoneWireTUp":case"redstoneWireTDown":case"redstoneWireTLeft":case"redstoneWireTRight":case"redstoneWireCross":s.tint=2687490}s.sortOrder=this.yToIndex(n[1])+2,this.onAnimationEnd(s.animations.add("explode",Phaser.Animation.generateFrameNames("BlockBreakParticle",0,7,"",0),30,!1),function(){s.kill(),r.toDestroy.push(s),a&&(r.controller.getIsDirectPlayerControl()||r.playPlayerAnimation("idle",e,t,!1,l),null!==i&&r.playItemDropAnimation(n,o,i))}),this.playScaledSpeed(s.animations,"explode"),this.controller.getIsDirectPlayerControl()^!a&&i&&i()}},{key:"playItemDropAnimation",value:function(e,t,n){var o=this,i=void 0;this.controller.getIsDirectPlayerControl()&&n?n():i=function(){var e=o.controller.levelModel.player;o.playItemAcquireAnimation(e.position,e.facing,a,n,t)};var a=this.createMiniBlock(e[0],e[1],t,{onComplete:i});a&&(a.sortOrder=this.yToIndex(e[1])+2)}},{key:"playScaledSpeed",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,o=e.getAnimation(t);if(null!==o){o.originalFps||(o.originalFps=1e3/o.delay);var i=this.controller.originalFpsToScaled(o.originalFps);return e.play(t,i*n)}console.log("can't find animation name : "+t)}},{key:"playItemAcquireAnimation",value:function(n,e,o,i,a){var r=this,t=this.positionToScreen(n),l=this.addResettableTween(o).to({x:t.x+20,y:t.y+20},200,Phaser.Easing.Linear.None);l.onComplete.add(function(){var e=y.equals(r.player.position,n);if(o.alive&&e){r.audioPlayer.play("collectedBlock"),r.player.inventory[a]=(r.player.inventory[a]||0)+1,o.kill(),r.toDestroy.push(o);var t=s("craftCollectibleCollected");t.blockType=a,window.dispatchEvent(t),i&&i()}else r.playItemAcquireAnimation(r.player.position,r.player.facing,o,i,a)}),l.start()}},{key:"positionToScreen",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.player,o=e[0],i=e[1];return{x:n.offset[0]+40*o,y:n.offset[1]+(t?-23:0)+40*i}}},{key:"setPlayerPosition",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.player,o=this.positionToScreen(e,t,n);n.sprite.x=o.x,n.sprite.y=o.y,n.sprite.sortOrder=this.yToIndex(o.y)+n.getSortOrderOffset()}},{key:"setSelectionIndicatorPosition",value:function(e,t){this.selectionIndicator.x=40*e-12,this.selectionIndicator.y=40*t-12}},{key:"drawHintPath",value:function(e){this.hintGroup.removeAll(!0);var t=this.game.world.bounds,n=this.game.add.bitmapData(t.width,t.height),i=n.context;i.setLineDash([10,10]),i.lineDashOffset=5,i.lineWidth=2,i.strokeStyle="#fff",i.shadowColor="#000",i.shadowOffsetY=7,i.shadowBlur=4,i.beginPath(),e.forEach(function(e){var t=O(e,2),n=t[0],o=t[1];i.lineTo(40*n+19,40*o+19)}),i.stroke();var o=this.hintGroup.create(0,0,n);o.alpha=0,this.addResettableTween(o).to({alpha:1},830,Phaser.Easing.Quadratic.Out).to({alpha:.4},500,Phaser.Easing.Quadratic.InOut,!0,0,-1,!0)}},{key:"createGroups",value:function(){this.groundGroup=this.game.add.group(),this.groundGroup.yOffset=-2,this.shadingGroup=this.game.add.group(),this.shadingGroup.yOffset=-2,this.hintGroup=this.game.add.group(),this.actionGroup=this.game.add.group(),this.actionGroup.yOffset=-22,this.fluffGroup=this.game.add.group(),this.fluffGroup.yOffset=-160,this.fowGroup=this.game.add.group(),this.fowGroup.yOffset=0}},{key:"resetGroups",value:function(e){var t,n,o;for(this.groundGroup.removeAll(!0),this.actionGroup.removeAll(!0),this.hintGroup.removeAll(!0),this.fluffGroup.removeAll(!0),this.shadingGroup.removeAll(!0),this.fowGroup.removeAll(!0),this.baseShading=this.game.add.group(),this.actionPlaneBlocks=[],this.refreshGroundGroup(),o=0;o<this.controller.levelModel.planeHeight;++o)for(n=0;n<this.controller.levelModel.planeWidth;++n){var i=new y(n,o);t=null;var a=e.groundDecorationPlane.getBlockAt(i);a.isEmpty||(t=this.createBlock(this.actionGroup,n,o,a.blockType))&&(t.sortOrder=this.yToIndex(o));var r=e.actionPlane.getBlockAt(i);r.shouldRenderOnGroundPlane()||this.createActionPlaneBlock(i,r.blockType)}for(o=0;o<this.controller.levelModel.planeHeight;++o)for(n=0;n<this.controller.levelModel.planeWidth;++n){var l=new y(n,o);e.fluffPlane.getBlockAt(l).isEmpty||(t=this.createBlock(this.fluffGroup,n,o,e.fluffPlane.getBlockAt(l).blockType))}this.controller.levelModel.actionPlane.refreshRedstone(),this.controller.levelModel.actionPlane.resolveConduitState(),this.refreshActionGroup(this.controller.levelModel.actionPlane.getAllPositions())}},{key:"refreshGroundGroup",value:function(){this.groundGroup.removeAll(!0);for(var e=0;e<this.controller.levelModel.planeHeight;++e)for(var t=0;t<this.controller.levelModel.planeWidth;++t){var n=new y(t,e),o=this.controller.levelModel.groundPlane.getBlockAt(n),i=this.createBlock(this.groundGroup,t,e,o.blockType);i&&(i.sortOrder=this.yToIndex(e));var a=this.controller.levelModel.actionPlane.getBlockAt(n);a&&a.shouldRenderOnGroundPlane()&&this.createActionPlaneBlock(n,a.blockType)}}},{key:"refreshActionGroup",value:function(e){for(var o=this,t=0;t<e.length;++t){var n=y.south(e[t]);this.controller.levelModel.actionPlane.inBounds(n)&&(""===this.controller.levelModel.actionPlane.getBlockAt(n).blockType||e.push(n))}e.forEach(function(e){if(e){var t=o.controller.levelModel.actionPlane.getBlockAt(e);if(t&&t.getIsDoor()||t&&t.getIsConduit()&&t.isActivatedConduit)return;if(t&&t.getIsMiniblock()||t&&t.getIsTree())return;if(t&&t.blockType)o.createActionPlaneBlock(e,t.blockType);else if(t){var n=o.coordinatesToIndex(e);o.actionGroup.remove(o.actionPlaneBlocks[n]),o.groundGroup.remove(o.actionPlaneBlocks[n])}}})}},{key:"updateShadingGroup",value:function(e){var t,n,o,i,a;for(this.shadingGroup.removeAll(),this.shadingGroup.add(this.baseShading),this.selectionIndicator&&this.shadingGroup.add(this.selectionIndicator),t=0;t<e.length;++t){a=(n=e[t]).atlas,o=40*n.x,i=40*n.y;var r=this.shadingGroup.create(o,i,a,n.type);"WaterAO"===a&&(r.tint=5592405)}}},{key:"updateFowGroup",value:function(e){var t,n,o;for(this.fowGroup.removeAll(),t=0;t<e.length;++t){var i=e[t];""!==i&&(n=40*i.x-40,o=40*i.y-40,this.fowGroup.create(n,o,"undergroundFow",i.type).alpha=.8)}}},{key:"playRandomPlayerIdle",value:function(e){var t,n,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.player;switch(t=this.getDirectionName(e),Math.trunc(4*Math.random())+1){case 1:n="idle";break;case 2:n="lookLeft";break;case 3:n="lookRight";break;case 4:n="lookAtCam"}n+=t,this.playScaledSpeed(o.getAnimationManager(),n)}},{key:"generatePlayerCelebrateFrames",value:function(){for(var e=[],t=0;t<6;++t)e.push("Player_001");return(e=(e=e.concat("Player_259")).concat("Player_260")).push("Player_261"),e.push("Player_297"),e.push("Player_298"),e.push("Player_297"),e.push("Player_261"),e.push("Player_261"),e.push("Player_297"),e.push("Player_298"),e.push("Player_297"),e.push("Player_261"),e.push("Player_001"),e.push("Player_001"),e.push("Player_001"),e.push("Player_001"),e.push("Player_001"),e.push("Player_261"),e.push("Player_297"),e.push("Player_298"),e.push("Player_297"),e.push("Player_261"),e.push("Player_261"),e.push("Player_297"),e.push("Player_298"),e.push("Player_297"),e.push("Player_261"),e}},{key:"generateFramesWithEndDelay",value:function(e,t,n,o,i,a){for(var r=Phaser.Animation.generateFrameNames(e,t,n,"",i),l=0;l<a;++l)r.push(o);return r}},{key:"generateReverseFrames",value:function(e,t,n,o,i){return Phaser.Animation.generateFrameNames(e,t,n,o,i).concat(Phaser.Animation.generateFrameNames(e,n-1,t,o,i))}},{key:"preparePlayerSprite",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.player;n.sprite=this.actionGroup.create(0,0),n.animationRig=this.actionGroup.create(0,0,"player"+e,"Player_121"),n.sprite.addChild(n.animationRig),this.controller.followingPlayer()&&n===this.player&&this.game.camera.follow(n.sprite),n.shouldUpdateSelectionIndicator()&&(this.selectionIndicator=this.shadingGroup.create(24,44,"selectionIndicator")),this.generateAnimations(D.South,0,n),this.generateAnimations(D.East,60,n),this.generateAnimations(D.North,120,n),this.generateAnimations(D.West,180,n);var o=void 0;if((o=this.generateFramesWithEndDelay("Player_",263,262,"Player_262",3,5)).push("Player_263"),n.addAnimation("lookAtCam_down",o,10,!1).onComplete.add(function(){t.playScaledSpeed(n.getAnimationManager(),"idlePause_down")}),(o=this.generateFramesWithEndDelay("Player_",270,269,"Player_269",3,5)).push("Player_270"),n.addAnimation("lookAtCam_right",o,10,!1).onComplete.add(function(){t.playScaledSpeed(n.getAnimationManager(),"idlePause_right")}),(o=this.generateFramesWithEndDelay("Player_",277,276,"Player_276",3,5)).push("Player_277"),n.addAnimation("lookAtCam_up",o,10,!1).onComplete.add(function(){t.playScaledSpeed(n.getAnimationManager(),"idlePause_up")}),(o=this.generateFramesWithEndDelay("Player_",284,283,"Player_283",3,5)).push("Player_284"),n.addAnimation("lookAtCam_left",o,10,!1).onComplete.add(function(){t.playScaledSpeed(n.getAnimationManager(),"idlePause_left")}),n.addAnimation("mine_down",Phaser.Animation.generateFrameNames("Player_",241,244,"",3),20,!0),n.addAnimation("mine_right",Phaser.Animation.generateFrameNames("Player_",245,248,"",3),20,!0),n.addAnimation("mine_up",Phaser.Animation.generateFrameNames("Player_",249,252,"",3),20,!0),n.addAnimation("mine_left",Phaser.Animation.generateFrameNames("Player_",253,256,"",3),20,!0),n.addAnimation("mineCart_down",Phaser.Animation.generateFrameNames("Minecart_",5,5,"",2),20,!1),n.addAnimation("mineCart_turnleft_down",Phaser.Animation.generateFrameNames("Minecart_",6,6,"",2),20,!1),n.addAnimation("mineCart_turnright_down",Phaser.Animation.generateFrameNames("Minecart_",12,12,"",2),20,!1),n.addAnimation("mineCart_right",Phaser.Animation.generateFrameNames("Minecart_",7,7,"",2),20,!1),n.addAnimation("mineCart_left",Phaser.Animation.generateFrameNames("Minecart_",11,11,"",2),20,!1),n.addAnimation("mineCart_up",Phaser.Animation.generateFrameNames("Minecart_",9,9,"",2),20,!1),n.addAnimation("mineCart_turnleft_up",Phaser.Animation.generateFrameNames("Minecart_",10,10,"",2),20,!1),n.addAnimation("mineCart_turnright_up",Phaser.Animation.generateFrameNames("Minecart_",8,8,"",2),20,!1),this.controller.levelModel.isUnderwater()){for(var i=[["down",299],["left",306],["up",313],["right",320]],a=0;a<i.length;a++){var r=O(i[a],2),l=r[0],s=r[1];n.addAnimation("walk_"+l,Phaser.Animation.generateFrameNames("Player_",s+1,s+4,"",3),5,!0)}for(var c=[["down",327],["left",333],["up",345],["right",339]],u=0;u<c.length;u++){var p=O(c[u],2),d=p[0],h=p[1];n.addAnimation("bump_"+d,Phaser.Animation.generateFrameNames("Player_",h,h+5,"",3),10,!1).onStart.add(function(){t.audioPlayer.play("bump")})}for(var f=[["down",351],["left",354],["up",360],["right",357]],g=0;g<f.length;g++){var m=O(f[g],2),v=m[0],_=m[1],y=Phaser.Animation.generateFrameNames("Player_",_,_+2,"",3);n.addAnimation("punch_"+v,y,10,!1).onComplete.add(function(){t.audioPlayer.play("punch")}),n.addAnimation("punchDestroy_"+v,y.concat(y).concat(y),10,!1)}}if(this.controller.levelModel.isInBoat()){for(var k=[["down",9],["left",15],["up",21],["right",27]],b=0;b<k.length;b++){var w=O(k[b],2),S=w[0],C=w[1];n.addAnimation("idle_"+S,Phaser.Animation.generateFrameNames("Boat_",C,C,"",2),10,!0),n.addAnimation("walk_"+S,Phaser.Animation.generateFrameNames("Boat_",C,C+4,"",2),10,!0),n.addAnimation("celebrate_"+S,["Boat_49","Boat_50","Boat_49","Boat_50","Boat_49"],5,!1)}for(var T=[["down",51],["left",63],["up",69],["right",57]],P=0;P<T.length;P++){var A=O(T[P],2),E=A[0],B=A[1];n.addAnimation("bump_"+E,Phaser.Animation.generateFrameNames("Boat_",B,B+5,"",2),10,!1).onStart.add(function(){t.audioPlayer.play("bump")})}R(this.game,n.animationRig)}}},{key:"playerFrameName",value:function(e){return Phaser.Animation.generateFrameNames("Player_",e,e,"",3)}},{key:"generateAnimations",value:function(e,t){var n=this,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.player,i=this.getDirectionName(e),a=[];a.push(this.playerFrameName(t+1)),a.push(this.playerFrameName(t+3)),a.push(this.playerFrameName(t+1)),a.push(this.playerFrameName(t+7)),a.push(this.playerFrameName(t+9)),a.push(this.playerFrameName(t+7));for(var r=0;r<5;++r)a.push(this.playerFrameName(t+1));o.addAnimation("idle"+i,a,20/3,!1).onComplete.add(function(){n.playRandomPlayerIdle(e,o)}),(a=this.generateFramesWithEndDelay("Player_",t+6,t+5,this.playerFrameName(t+5),3,5)).push(this.playerFrameName(t+6)),o.addAnimation("lookLeft"+i,a,10,!1).onComplete.add(function(){n.playScaledSpeed(o.getAnimationManager(),"idlePause"+i)}),(a=this.generateFramesWithEndDelay("Player_",t+12,t+11,this.playerFrameName(t+11),3,5)).push(this.playerFrameName(t+12)),o.addAnimation("lookRight"+i,a,10,!1).onComplete.add(function(){n.playScaledSpeed(o.getAnimationManager(),"idlePause"+i)}),a=[];for(var l=0;l<13;++l)a.push(this.playerFrameName(t+1));o.addAnimation("idlePause"+i,a,20/3,!1).onComplete.add(function(){n.playRandomPlayerIdle(e,o)}),o.addAnimation("walk"+i,Phaser.Animation.generateFrameNames("Player_",t+13,t+20,"",3),20,!0);var s=Phaser.Animation.generateFrameNames("Player_",t+21,t+24,"",3);o.addAnimation("punch"+i,s,20,!1).onComplete.add(function(){n.audioPlayer.play("punch")}),o.addAnimation("punchDestroy"+i,s.concat(s).concat(s),20,!1),o.addAnimation("hurt"+i,Phaser.Animation.generateFrameNames("Player_",t+25,t+28,"",3),20,!1).onComplete.add(function(){n.playScaledSpeed(o.getAnimationManager(),"idlePause"+i)}),o.addAnimation("crouch"+i,Phaser.Animation.generateFrameNames("Player_",t+29,t+32,"",3),20,!0),o.addAnimation("jumpUp"+i,Phaser.Animation.generateFrameNames("Player_",t+33,t+36,"",3),10,!0),o.addAnimation("fail"+i,Phaser.Animation.generateFrameNames("Player_",t+45,t+48,"",3),20,!1),o.addAnimation("celebrate"+i,this.generatePlayerCelebrateFrames(),10,!1),o.addAnimation("bump"+i,Phaser.Animation.generateFrameNames("Player_",t+49,t+54,"",3),20,!1).onStart.add(function(){n.audioPlayer.play("bump")}),o.addAnimation("jumpDown"+i,Phaser.Animation.generateFrameNames("Player_",t+55,t+60,"",3),20,!0)}},{key:"createMiniBlock",value:function(e,t,n){var o=this,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};function a(e,t){return void 0===e?t:e}var r=a(i.collectibleDistance,2),l=a(i.xOffsetRange,40),s=a(i.yOffsetRange,40),c=_.getMiniblockFrame(n);if(!c||!this.miniBlocks[c])return null;var u=7-l/2+Math.random()*l,p=3-s/2+Math.random()*s,d=new y(u,p),h=i.isOnBlock?-20:0,f=this.actionGroup.create(u+40*e,p+40*t+h,"miniBlocks","shadow.png"),g=this.actionGroup.create(0,0,"miniBlocks",this.miniBlocks[c]+".png");f.addChild(g);var m=this.addResettableTween(g).to({y:-8},350,function(e){return e<.2?1:e<.4?2:e<.6?1:e<.8?0:e<1?1:0});if(i.onComplete)m.onComplete.add(i.onComplete);else{var v=this.controller.levelModel.spritePositionToIndex(d,new y(f.x,f.y));this.collectibleItems.push([f,d,n,r]),m.onComplete.add(function(){o.controller.levelModel.usePlayer&&function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}(o.player.position,v)<r&&o.player.collectItems(new y(e,t))})}return m.start(),f}},{key:"playAnimationWithRandomOffset",value:function(e,t){var n=this.playScaledSpeed(e,t);n.frame=Math.trunc(Math.random()*n.frameTotal)}},{key:"psuedoRandomTint",value:function(e,t,n,o){var i=Math.pow(10*n+o,5)%251/12;e===this.groundGroup?i+=24:i*=.75;var a=Math.floor(255-i).toString(16);t.tint="0x"+a+a+a}},{key:"createBlock",value:function(a,r,l,s){var e,c,u,p,d,h,f=this,i=new y(r,l),g=null,t=function(t,n){var o=s.substring(4);(g=t.createBlock(a,r,l,"log"+o)).fluff=t.createBlock(t.fluffGroup,r,l,"leaves"+o),g.onBlockDestroy=function(e){e.fluff.animations.add("despawn",Phaser.Animation.generateFrameNames("Leaves_"+o,n[0],n[1],".png",0),10,!1).onComplete.add(function(){t.toDestroy.push(e.fluff),e.fluff.kill()}),t.playScaledSpeed(e.fluff.animations,"despawn")},t.trees.push({sprite:g,type:s,position:i})},n=function(e,t){u=f.blocks[s][0],p=f.blocks[s][1],d=f.blocks[s][2],h=f.blocks[s][3],g=a.create(d+40*r,h+a.yOffset+40*l,u,p),c=[];for(var n=Phaser.Animation.generateFrameNames(t,0,3,"",1),o=0;o<5;++o)c.push(t+"0");c=c.concat(n),g.animations.add("open",c),c=[],n=Phaser.Animation.generateFrameNames(t,3,0,"",1);for(var i=0;i<5;++i)c.push(t+"3");return c=c.concat(n),g.animations.add("close",c),g};switch(s){case"treeAcacia":t(this,[0,7]);break;case"treeBirch":t(this,[0,8]);break;case"treeJungle":t(this,[0,9]);break;case"treeOak":t(this,[0,6]);break;case"treeSpruce":case"treeSpruceSnowy":t(this,[0,8]);break;case"cropWheat":u=this.blocks[s][0],p=this.blocks[s][1],d=this.blocks[s][2],h=this.blocks[s][3],g=a.create(d+40*r,h+a.yOffset+40*l,u,p),c=Phaser.Animation.generateFrameNames("Wheat",0,2,"",0),g.animations.add("idle",c,.4,!1),this.playScaledSpeed(g.animations,"idle");break;case"torch":u=this.blocks[s][0],p=this.blocks[s][1],d=this.blocks[s][2],h=this.blocks[s][3],g=a.create(d+40*r,h+a.yOffset+40*l,u,p),c=Phaser.Animation.generateFrameNames("Torch",0,23,"",0),g.animations.add("idle",c,15,!0),this.playScaledSpeed(g.animations,"idle");break;case"water":u=this.blocks[s][0],p=this.blocks[s][1],d=this.blocks[s][2],h=this.blocks[s][3],g=a.create(d+40*r,h+a.yOffset+40*l,u,p),c=Phaser.Animation.generateFrameNames("Water_",0,5,"",0),g.animations.add("idle",c,5,!0),this.playScaledSpeed(g.animations,"idle");break;case"watering":u=this.blocks[s][0],p=this.blocks[s][1],d=this.blocks[s][2],h=this.blocks[s][3],(g=a.create(d+40*r,h+a.yOffset+40*l,u,p)).kill(),this.toDestroy.push(g),this.createBlock(this.groundGroup,r,l,"farmlandWet"),this.refreshGroundGroup();break;case"lava":u=this.blocks[s][0],p=this.blocks[s][1],d=this.blocks[s][2],h=this.blocks[s][3],g=a.create(d+40*r,h+a.yOffset+40*l,u,p),c=Phaser.Animation.generateFrameNames("Lava_",0,5,"",0),g.animations.add("idle",c,5,!0),this.playScaledSpeed(g.animations,"idle");break;case"magmaBlock":u=this.blocks[s][0],p=this.blocks[s][1],d=this.blocks[s][2],h=this.blocks[s][3],g=a.create(d+40*r,h+a.yOffset+40*l,u,p),c=Phaser.Animation.generateFrameNames("Magma_Block",0,5,"",0),g.animations.add("idle",c,5,!0),this.playScaledSpeed(g.animations,"idle");break;case"magmaUnderwater":u=this.blocks[s][0],p=this.blocks[s][1],d=this.blocks[s][2],h=this.blocks[s][3],g=a.create(d+40*r,h+a.yOffset+40*l,u,p),c=Phaser.Animation.generateFrameNames("Magma_Bubble_Boat",0,5,"",0),g.animations.add("idle",c,5,!0),this.playAnimationWithRandomOffset(g.animations,"idle");break;case"magmaDeep":u=this.blocks[s][0],p=this.blocks[s][1],d=this.blocks[s][2],h=this.blocks[s][3],g=a.create(d+40*r,h+a.yOffset+40*l,u,p),c=Phaser.Animation.generateFrameNames("Magma_Bubble_Deep",0,5,"",0),g.animations.add("idle",c,5,!0),this.playAnimationWithRandomOffset(g.animations,"idle");break;case"bubbleColumn":u=this.blocks[s][0],p=this.blocks[s][1],d=this.blocks[s][2],h=this.blocks[s][3],g=a.create(d+40*r,h+a.yOffset+40*l,u,p),c=Phaser.Animation.generateFrameNames("Bubble_Column",0,5,"",0),g.animations.add("idle",c,5,!0),this.playAnimationWithRandomOffset(g.animations,"idle");break;case"conduit":u=this.blocks[s][0],p=this.blocks[s][1],d=this.blocks[s][2],h=this.blocks[s][3],g=a.create(d+40*r,h+a.yOffset+40*l,u,p),c=Phaser.Animation.generateFrameNames("Conduit",3,10,"",2),g.animations.add("open",c,5,!0),c=Phaser.Animation.generateFrameNames("Conduit",0,2,"",2),g.animations.add("activation",c,5,!1),g.animations.add("deactivation",c.reverse(),5,!1);break;case"prismarine":this.initPrismarine(),d=this.blocks[s][2],h=this.blocks[s][3],g=a.create(d+40*r,h+a.yOffset+40*l,this.prismarine);break;case"seaLantern":u=this.blocks[s][0],p=this.blocks[s][1],d=this.blocks[s][2],h=this.blocks[s][3],g=a.create(d+40*r,h+a.yOffset+40*l,u,p),c=Phaser.Animation.generateFrameNames("Sea_Lantern",0,4,"",0),g.animations.add("idle",c,5,!0),this.playScaledSpeed(g.animations,"idle");break;case"seaGrass":u=this.blocks[s][0],p=this.blocks[s][1],d=this.blocks[s][2],h=this.blocks[s][3],g=a.create(d+40*r,h+a.yOffset+40*l,u,p),c=Phaser.Animation.generateFrameNames("Seagrass",0,5,"",0),g.animations.add("idle",c,5,!0),this.playScaledSpeed(g.animations,"idle",.5);break;case"kelp":u=this.blocks[s][0],p=this.blocks[s][1],d=this.blocks[s][2],h=this.blocks[s][3],g=a.create(d+40*r,h+a.yOffset+40*l,u,p),c=Phaser.Animation.generateFrameNames("KelpSingle_",0,5,"",0),g.animations.add("idle",c,5,!0),this.playScaledSpeed(g.animations,"idle",.5);break;case"Chest":u=this.blocks[s][0],p=this.blocks[s][1],d=this.blocks[s][2],h=this.blocks[s][3],g=a.create(d+40*r,h+a.yOffset+40*l,u,p),c=Phaser.Animation.generateFrameNames("Chest",0,2,"",0),g.animations.add("open",c,5,!1);break;case"NetherPortal":u=this.blocks[s][0],p=this.blocks[s][1],d=this.blocks[s][2],h=this.blocks[s][3],g=a.create(d+40*r,h+a.yOffset+40*l,u,p),c=Phaser.Animation.generateFrameNames("NetherPortal",1,6,"",0),g.animations.add("idle",c,5,!0),this.playScaledSpeed(g.animations,"idle");break;case"lavaPop":for(u=this.blocks[s][0],p=this.blocks[s][1],d=this.blocks[s][2],h=this.blocks[s][3],g=a.create(d+40*r,h+a.yOffset+40*l,u,p),c=Phaser.Animation.generateFrameNames("LavaPop",1,7,"",2),e=0;e<4;++e)c.push("LavaPop07");for(c=c.concat(Phaser.Animation.generateFrameNames("LavaPop",8,13,"",2)),e=0;e<3;++e)c.push("LavaPop13");for(c=c.concat(Phaser.Animation.generateFrameNames("LavaPop",14,30,"",2)),e=0;e<8;++e)c.push("LavaPop01");g.animations.add("idle",c,5,!0),this.playAnimationWithRandomOffset(g.animations,"idle");break;case"fire":u=this.blocks[s][0],p=this.blocks[s][1],d=this.blocks[s][2],h=this.blocks[s][3],g=a.create(d+40*r,h+a.yOffset+40*l,u,p),c=Phaser.Animation.generateFrameNames("Fire",0,14,"",2),g.animations.add("idle",c,5,!0),this.playScaledSpeed(g.animations,"idle");break;case"bubbles":u=this.blocks[s][0],p=this.blocks[s][1],d=this.blocks[s][2],h=this.blocks[s][3],g=a.create(d+40*r,h+a.yOffset+40*l,u,p),c=Phaser.Animation.generateFrameNames("Bubbles",0,14,"",2),g.animations.add("idle",c,5,!0),this.playScaledSpeed(g.animations,"idle");break;case"explosion":u=this.blocks[s][0],p=this.blocks[s][1],d=this.blocks[s][2],h=this.blocks[s][3],g=a.create(d+40*r,h+a.yOffset+40*l,u,p),c=Phaser.Animation.generateFrameNames("Explosion",0,16,"",1),g.animations.add("idle",c,15,!1).onComplete.add(function(){f.toDestroy.push(g),g.kill()}),this.playScaledSpeed(g.animations,"idle");break;case"door":g=n(0,"Door");break;case"doorIron":g=n(0,"DoorIron"),this.blockReceivesCornerShadow(r,l)&&g.addChild(this.game.make.sprite(-40,55,"blockShadows","Shadow_Parts_Fade_overlap.png"));break;case"tnt":u=this.blocks[s][0],p=this.blocks[s][1],d=this.blocks[s][2],h=this.blocks[s][3],g=a.create(d+40*r,h+a.yOffset+40*l,u,p),c=Phaser.Animation.generateFrameNames("TNTexplosion",0,8,"",0),g.animations.add("explode",c,7,!1).onComplete.add(function(){f.playExplosionCloudAnimation(i),g.kill(),f.toDestroy.push(g),f.actionPlaneBlocks[f.coordinatesToIndex(i)]=null});break;default:if(!this.blocks[s])throw new Error("Unknown block type: "+s);if(u=this.blocks[s][0],p=this.blocks[s][1],d=this.blocks[s][2],h=this.blocks[s][3],g=a.create(d+40*r,h+a.yOffset+40*l,u,p),a!==this.actionGroup&&a!==this.groundGroup||_.isWalkable(s)||this.psuedoRandomTint(a,g,r,l),a===this.actionGroup&&!_.isWalkable(s)&&this.blockReceivesCornerShadow(r,l)){var o=-39,m=40;s.startsWith("pistonArm")&&(o=-26,m=53),g.addChild(this.game.make.sprite(o,m,"blockShadows","Shadow_Parts_Fade_overlap.png"))}s.startsWith("redstoneWire")&&s.endsWith("On")&&g.addChild(this.addRedstoneSparkle())}return g}},{key:"addRedstoneSparkle",value:function(){for(var n=this,e="redstone_sparkle99.png",o=this.game.make.sprite(20,25,"redstoneSparkle",e),t=0;t<3;t++){var i=8*t,a=[e].concat(Phaser.Animation.generateFrameNames("redstone_sparkle",i,7+i,".png"),e);o.animations.add("fizz_"+t,a,7)}return function t(){setTimeout(function(){if(o.alive){var e=Math.floor(3*Math.random());n.onAnimationEnd(n.playScaledSpeed(o.animations,"fizz_"+e),t),o.position.x=.5<Math.random()?20:40,o.position.y=.5<Math.random()?25:45}},r(500,7e3)/n.controller.tweenTimeScale)}(),o}},{key:"blockReceivesCornerShadow",value:function(e,t){var n=this.controller.levelModel.actionPlane.getBlockAt([e,t+1]);if(!n||n.blockType&&!n.isWalkable)return!1;var o=this.controller.levelModel.actionPlane.getBlockAt([e-1,t+1]);return o&&o.blockType&&!o.isWalkable}},{key:"isUnderTree",value:function(e,t){if(e>=this.trees.length||e<0)return!1;for(var n=this.treeFluffTypes[this.trees[e].type],o=0;o<n.length;o++)if(this.trees[e].position[0]+n[o][0]===t[0]&&this.trees[e].position[1]+n[o][1]===t[1])return!0;return!1}},{key:"changeTreeAlpha",value:function(e,t){this.controller.levelView.addResettableTween(this.trees[e].sprite.fluff).to({alpha:t},300,Phaser.Easing.Linear.None).start()}},{key:"onAnimationEnd",value:function(e,t){var n=e.onComplete.add(function(){n.detach(),t()})}},{key:"onAnimationStart",value:function(e,t){var n=e.onStart.add(function(){n.detach(),t()})}},{key:"onAnimationLoopOnce",value:function(e,t){var n=e.onLoop.add(function(){n.detach(),t()})}},{key:"addResettableTween",value:function(e){var t=this.game.add.tween(e);return t.timeScale=this.controller.tweenTimeScale,this.resettableTweens.push(t),t}},{key:"animateDoor",value:function(e,t){var n=this,o=this.controller.levelModel.player;this.setSelectionIndicatorPosition(this.controller.levelModel.actionPlane.indexToCoordinates(e)[0],this.controller.levelModel.actionPlane.indexToCoordinates(e)[1]),this.controller.audioPlayer.play("doorOpen");var i=this.controller.levelModel.actionPlane.indexToCoordinates(e);this.playDoorAnimation(i,t,function(){var e=n.controller.levelModel.actionPlane.getBlockAt(i);e.isWalkable=e.isOpen,"doorIron"!==e.blockType&&n.playIdleAnimation(o.position,o.facing,o.isOnBlock,o),n.setSelectionIndicatorPosition(o.position[0],o.position[1])})}}]),t}()},function(e,t,n){"use strict";e.exports={},e.exports.createEvent=function(t){var n,o=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];try{n=new Event(t,{bubbles:o,cancelable:i})}catch(e){(n=document.createEvent("Event")).initEvent(t,o,i)}return n},e.exports.bisect=function(e,t){return[e.filter(function(e){return t(e)}),e.filter(function(e){return!t(e)})]}},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),l=n(0),s=n(21),c=n(22),u=n(23),p=n(24),d=n(25),h=n(26),f=n(27),g=n(28),m=n(29),v=n(30),_=n(31),y=n(32),k=n(33),b=n(10),C=n(3);e.exports=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.controller=e,this.game=e.game,this.entityMap=new Map,this.entityDeathCount=new Map,this.sprite=null,this.id=0}return o(t,[{key:"loadData",value:function(e){if(void 0!==e.entities)for(var t=0;t<e.entities.length;t++){var n=e.entities[t],o=this.createEntity(n[0],this.id++,n[1],n[2],n[3],n[4]);o.updateHidingTree(),o.updateHidingBlock()}}},{key:"tick",value:function(){this.entityMap.forEach(function(e){e.tick()})}},{key:"pushEntity",value:function(e){this.entityMap.has(e.identifier)?this.controller.DEBUG&&this.game.debug.text("Duplicate entity name : "+e.identifier+"\n"):this.entityMap.set(e.identifier,e)}},{key:"isFriendlyEntity",value:function(e){for(var t=["sheep","ironGolem","cow","chicken","cod","dolphin","salmon","seaTurtle","seaTurtle","squid","tropicalFish"],n=0;n<t.length;n++)if(e===t[n])return!0;return!1}},{key:"createEntity",value:function(e,t,n,o,i,a){var r=null;if(this.entityMap.has(t))this.controller.DEBUG&&this.game.debug.text("Duplicate entity name : "+t+"\n");else{switch(e){case"sheep":r=new s(this.controller,e,t,n,o,i);break;case"zombie":r=new c(this.controller,e,t,n,o,i);break;case"ironGolem":r=new u(this.controller,e,t,n,o,i);break;case"creeper":r=new p(this.controller,e,t,n,o,i);break;case"cow":r=new d(this.controller,e,t,n,o,i);break;case"chicken":r=new h(this.controller,e,t,n,o,i);break;case"cod":r=new g(this.controller,e,t,n,o,i);break;case"dolphin":r=new f(this.controller,e,t,n,o,i);break;case"ghast":r=new k(this.controller,e,t,n,o,i,a);break;case"boat":r=new b(this.controller,e,t,n,o,i);break;case"salmon":r=new m(this.controller,e,t,n,o,i);break;case"seaTurtle":r=new v(this.controller,e,t,n,o,i);break;case"squid":r=new _(this.controller,e,t,n,o,i);break;case"tropicalFish":r=new y(this.controller,e,t,n,o,i);break;default:r=new l(this.controller,e,t,n,o,i)}this.controller.DEBUG&&console.log("Create Entity type : "+e+" "+n+","+o),this.entityMap.set(t,r)}return r}},{key:"isSpawnableInBetween",value:function(e,t,n,o){for(var i=e;i<=n;i++)for(var a=t;a<=o;a++)if(this.controller.levelModel.isPositionEmpty(new C(i,a))[0])return!0;return!1}},{key:"spawnEntity",value:function(e,t){var n=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},o=this.controller.levelModel,i=o.planeWidth,a=o.planeHeight;if("middle"===t){if(this.isSpawnableInBetween(Math.floor(.25*i),Math.floor(.25*a),Math.floor(.75*i),Math.floor(.75*a))){for(var r=new C(n(Math.floor(.25*i),Math.floor(.75*i)),n(Math.floor(.25*a),Math.floor(.75*a)));!o.isPositionEmpty(r)[0];)r=new C(n(Math.floor(.25*i),Math.floor(.75*i)),n(Math.floor(.25*a),Math.floor(.75*a)));return this.createEntity(e,this.id++,r.x,r.y,n(0,3))}if(!this.isSpawnableInBetween(1,1,i-2,a-2))return null;for(var l=new C(n(1,i-2),n(1,a-2));!o.isPositionEmpty(l)[0];)l=new C(n(1,i-2),n(1,a-2));return this.createEntity(e,this.id++,l.x,l.y,n(0,3))}if("left"===t){for(var s=0,c=!0;s<i&&c;){c=!0;for(var u=0;u<a;u++)if(o.isPositionEmpty(new C(s,u))[0]){c=!1;break}c&&s++}if(s<i){for(var p=new C(s,n(0,a-1));!o.isPositionEmpty(p)[0];)p=new C(s,n(0,a-1));return this.createEntity(e,this.id++,p.x,p.y,n(0,3))}}else if("right"===t){for(var d=i-1,h=!0;-1<d&&h;){h=!0;for(var f=0;f<a;f++)if(o.isPositionEmpty(new C(d,f))[0]){h=!1;break}h&&d--}if(-1<d){for(var g=new C(d,n(0,a-1));!o.isPositionEmpty(g)[0];)g=new C(d,n(0,a-1));return this.createEntity(e,this.id++,g.x,g.y,n(0,3))}}else if("up"===t){for(var m=0,v=!0;m<a&&v;){v=!0;for(var _=0;_<i;_++)if(o.isPositionEmpty(new C(_,m))[0]){v=!1;break}v&&m++}if(m<a){for(var y=new C(n(0,a-1),m);!o.isPositionEmpty(y)[0];)y=new C(n(0,a-1),m);return this.createEntity(e,this.id++,y.x,y.y,n(0,3))}}else if("down"===t){for(var k=a-1,b=!0;-1<k&&b;){b=!0;for(var w=0;w<i;w++)if(o.isPositionEmpty(new C(w,k))[0]){b=!1;break}b&&k--}if(-1<k){for(var S=new C(n(0,a-1),k);!o.isPositionEmpty(S)[0];)S=new C(n(0,a-1),k);return this.createEntity(e,this.id++,S.x,S.y,n(0,3))}}return null}},{key:"spawnEntityAt",value:function(e,t,n,o){return this.createEntity(e,this.id++,t,n,o)}},{key:"destroyEntity",value:function(e){if(this.entityMap.has(e)){var t=this.entityMap.get(e);this.entityDeathCount.has(t.type)?this.entityDeathCount.set(t.type,this.entityDeathCount.get(t.type)+1):this.entityDeathCount.set(t.type,1),t.reset(),t.getAnimationManager().stop(null,!0),t.sprite.destroy(),this.entityMap.delete(e)}else this.controller.DEBUG&&this.game.debug.text("It's impossible to delete since entity name : "+e+" is not existing\n")}},{key:"getEntityAt",value:function(e){var t=!0,n=!1,o=void 0;try{for(var i,a=this.entityMap[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var r=i.value[1];if(C.equals(e,r.position))return r}}catch(e){n=!0,o=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw o}}return null}},{key:"getEntitiesOfType",value:function(e){if("all"===e){var t=[],n=!0,o=!1,i=void 0;try{for(var a,r=this.entityMap[Symbol.iterator]();!(n=(a=r.next()).done);n=!0){var l=a.value[1];"Player"!==l.type&&t.push(l)}}catch(e){o=!0,i=e}finally{try{!n&&r.return&&r.return()}finally{if(o)throw i}}return t}var s=[],c=!0,u=!1,p=void 0;try{for(var d,h=this.entityMap[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){var f=d.value[1];f.type===e&&s.push(f)}}catch(e){u=!0,p=e}finally{try{!c&&h.return&&h.return()}finally{if(u)throw p}}return s}},{key:"reset",value:function(){this.entityMap.clear(),this.entityDeathCount=new Map}}]),t}()},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,o)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(o):void 0},a=n(0),r=n(5);e.exports=function(){function l(e,t,n,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,t,n,o,i,a));return r.offset=[-43,-55],r.controller.levelView&&(r.prepareSprite(),r.sprite.sortOrder=r.controller.levelView.yToIndex(r.position.y)),r.naked=!1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,a),o(l,[{key:"use",value:function(e,t){var n=this,o=this.getNakedSuffix()+"lookAtCam"+this.controller.levelView.getDirectionName(this.facing);this.controller.levelView.playScaledSpeed(this.sprite.animations,o),this.queue.startPushHighPriorityCommands(),this.controller.events.forEach(function(e){return e({eventType:r.WhenUsed,targetType:n.type,eventSenderIdentifier:t.identifier,targetIdentifier:n.identifier})}),this.queue.endPushHighPriorityCommands(),e.succeeded()}},{key:"getWalkAnimation",value:function(){return this.getNakedSuffix()+i(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"getWalkAnimation",this).call(this)}},{key:"getIdleAnimation",value:function(){return this.getNakedSuffix()+i(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"getIdleAnimation",this).call(this)}},{key:"bump",value:function(e){var t=this,n=this.getNakedSuffix()+"bump",o=this.controller.levelView.getDirectionName(this.facing);this.controller.levelView.playScaledSpeed(this.sprite.animations,n+o);var i=this.controller.levelModel.getMoveForwardPosition(this),a=this.controller.levelEntity.getEntityAt(i);null!==a&&(this.queue.startPushHighPriorityCommands(),this.controller.events.forEach(function(e){return e({eventType:r.WhenTouched,targetType:t.type,targetIdentifier:t.identifier,eventSenderIdentifier:a.identifier})}),this.queue.endPushHighPriorityCommands()),this.controller.delayPlayerMoveBy(400,800,function(){e.succeeded()})}},{key:"prepareSprite",value:function(){var e=this,t=function(e,t){return 1e3*(Math.random()*(t-e)+e)},n=this.controller.levelView.actionGroup,o=[],i="ShadowSheep_2016";this.sprite=n.create(0,0,"sheep","ShadowSheep_2016001.png");for(var a=["ShadowSheep_2016217.png","ShadowSheep_2016109.png","ShadowSheep_2016001.png","ShadowSheep_2016325.png"],r=[[[252,261],[220,222],[228,231],[276,279],[270,275],[282,293],[294,305],[306,317],[318,323],[234,243],[880,887]],[[144,153],[112,114],[120,123],[168,171],[162,167],[174,185],[186,197],[198,209],[210,215],[126,135],[872,879]],[[36,45],[3,6],[12,15],[60,63],[54,59],[66,77],[78,89],[90,101],[102,108],[18,26],[864,871]],[[360,369],[328,330],[336,339],[384,387],[378,383],[390,401],[402,413],[414,425],[426,431],[342,351],[888,895]]],l=0;l<4;l++){var s=this.controller.levelView.getDirectionName(l);o=Phaser.Animation.generateFrameNames(i,r[l][0][0],r[l][0][1],".png",3);for(var c=0;c<8;c++)o.push(a[l]);this.sprite.animations.add("idle"+s,o,10,!1).onComplete.add(function(){e.playRandomIdle(e.facing)}),o=Phaser.Animation.generateFrameNames(i,r[l][1][0],r[l][1][1],".png",3),this.sprite.animations.add("lookLeft"+s,o,10,!1).onComplete.add(function(){e.sprite.animations.stop(),setTimeout(function(){e.naked?e.controller.levelView.playScaledSpeed(e.sprite.animations,"naked_lookLeft"+e.controller.levelView.getDirectionName(e.facing)+"_2"):e.controller.levelView.playScaledSpeed(e.sprite.animations,"lookLeft"+e.controller.levelView.getDirectionName(e.facing)+"_2")},t(.2,1))}),o=Phaser.Animation.generateFrameNames(i,r[l][1][1],r[l][1][0],".png",3),this.sprite.animations.add("lookLeft"+s+"_2",o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,r[l][2][0],r[l][2][1],".png",3),this.sprite.animations.add("lookRight"+s,o,10,!1).onComplete.add(function(){e.sprite.animations.stop(),setTimeout(function(){e.naked?e.controller.levelView.playScaledSpeed(e.sprite.animations,"naked_lookRight"+e.controller.levelView.getDirectionName(e.facing)+"_2"):e.controller.levelView.playScaledSpeed(e.sprite.animations,"lookRight"+e.controller.levelView.getDirectionName(e.facing)+"_2")},t(.2,1))}),o=Phaser.Animation.generateFrameNames(i,r[l][2][1],r[l][2][0],".png",3),this.sprite.animations.add("lookRight"+s+"_2",o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,r[l][3][0],r[l][3][1],".png",3),this.sprite.animations.add("lookAtCam"+s,o,10,!1).onComplete.add(function(){e.sprite.animations.stop(),setTimeout(function(){e.naked?e.controller.levelView.playScaledSpeed(e.sprite.animations,"naked_lookAtCam"+e.controller.levelView.getDirectionName(e.facing)+"_2"):e.controller.levelView.playScaledSpeed(e.sprite.animations,"lookAtCam"+e.controller.levelView.getDirectionName(e.facing)+"_2")},t(.2,1))}),o=Phaser.Animation.generateFrameNames(i,r[l][3][1],r[l][3][0],".png",3),this.sprite.animations.add("lookAtCam"+s+"_2",o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,r[l][4][0],r[l][4][1],".png",3),this.sprite.animations.add("lookDown"+s,o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,r[l][5][0],r[l][5][1],".png",3),this.sprite.animations.add("walk"+s,o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,r[l][6][0],r[l][6][1],".png",3),this.sprite.animations.add("attack"+s,o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,r[l][7][0],r[l][7][1],".png",3),this.sprite.animations.add("hurt"+s,o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,r[l][8][0],r[l][8][1],".png",3),this.sprite.animations.add("die"+s,o,10,!1),o=this.controller.levelView.generateReverseFrames(i,r[l][9][0],r[l][9][1],".png",3),this.sprite.animations.add("eat"+s,o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=this.controller.levelView.generateReverseFrames(i,r[l][10][0],r[l][10][1],".png",3),this.sprite.animations.add("bump"+s,o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))})}r=[[[684,693],[652,654],[660,663],[708,711],[702,707],[714,725],[726,737],[738,749],[750,755],[666,675],[912,919]],[[576,585],[544,546],[552,555],[600,603],[594,599],[606,617],[618,629],[630,641],[642,647],[558,567],[904,911]],[[468,477],[436,438],[444,447],[492,495],[486,491],[498,509],[510,521],[522,533],[534,539],[450,459],[896,903]],[[792,801],[760,762],[768,771],[816,819],[810,815],[822,833],[834,845],[846,857],[858,863],[774,783],[920,927]]],a=["ShadowSheep_2016649.png","ShadowSheep_2016541.png","ShadowSheep_2016433.png","ShadowSheep_2016757.png"];for(var u=0;u<4;u++){var p=this.controller.levelView.getDirectionName(u);o=Phaser.Animation.generateFrameNames(i,r[u][0][0],r[u][0][1],".png",3);for(var d=0;d<8;d++)o.push(a[u]);this.sprite.animations.add("naked_idle"+p,o,10,!1).onComplete.add(function(){e.playRandomIdle(e.facing)}),o=Phaser.Animation.generateFrameNames(i,r[u][1][0],r[u][1][1],".png",3),this.sprite.animations.add("naked_lookLeft"+p,o,10,!1).onComplete.add(function(){e.sprite.animations.stop(),setTimeout(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"naked_lookLeft"+e.controller.levelView.getDirectionName(e.facing)+"_2")},t(.2,1))}),o=Phaser.Animation.generateFrameNames(i,r[u][1][1],r[u][1][0],".png",3),this.sprite.animations.add("naked_lookLeft"+p+"_2",o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"naked_idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,r[u][2][0],r[u][2][1],".png",3),this.sprite.animations.add("naked_lookRight"+p,o,10,!1).onComplete.add(function(){e.sprite.animations.stop(),setTimeout(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"naked_lookRight"+e.controller.levelView.getDirectionName(e.facing)+"_2")},t(.2,1))}),o=Phaser.Animation.generateFrameNames(i,r[u][2][1],r[u][2][0],".png",3),this.sprite.animations.add("naked_lookRight"+p+"_2",o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"naked_idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,r[u][3][0],r[u][3][1],".png",3),this.sprite.animations.add("naked_lookAtCam"+p,o,10,!1).onComplete.add(function(){e.sprite.animations.stop(),setTimeout(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"naked_lookAtCam"+e.controller.levelView.getDirectionName(e.facing)+"_2")},t(.2,1))}),o=Phaser.Animation.generateFrameNames(i,r[u][3][1],r[u][3][0],".png",3),this.sprite.animations.add("naked_lookAtCam"+p+"_2",o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"naked_idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,r[u][4][0],r[u][4][1],".png",3),this.sprite.animations.add("naked_lookDown"+p,o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"naked_idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,r[u][5][0],r[u][5][1],".png",3),this.sprite.animations.add("naked_walk"+p,o,10,!0),o=Phaser.Animation.generateFrameNames(i,r[u][6][0],r[u][6][1],".png",3),this.sprite.animations.add("naked_attack"+p,o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"naked_idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,r[u][7][0],r[u][7][1],".png",3),this.sprite.animations.add("naked_hurt_"+p,o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"naked_idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,r[u][8][0],r[u][8][1],".png",3),this.sprite.animations.add("naked_die"+p,o,10,!1),o=this.controller.levelView.generateReverseFrames(i,r[u][9][0],r[u][9][1],".png",3),this.sprite.animations.add("naked_eat"+p,o,10,!1).onComplete.add(function(){e.naked=!1,e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=this.controller.levelView.generateReverseFrames(i,r[u][10][0],r[u][10][1],".png",3),this.sprite.animations.add("naked_bump"+p,o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"naked_idle"+e.controller.levelView.getDirectionName(e.facing))})}this.controller.levelView.playScaledSpeed(this.sprite.animations,"idle"+this.controller.levelView.getDirectionName(this.facing)),this.sprite.x=this.offset[0]+40*this.position.x,this.sprite.y=this.offset[1]+40*this.position.y}},{key:"playRandomIdle",value:function(e){var t,n=this.getNakedSuffix();switch(t=this.controller.levelView.getDirectionName(e),Math.trunc(6*Math.random())+1){case 1:n+="idle";break;case 2:n+="lookLeft";break;case 3:n+="lookRight";break;case 4:n+="lookAtCam";break;case 5:n+="lookDown";break;case 6:n+="eat"}n+=t,this.controller.levelView.playScaledSpeed(this.sprite.animations,n),this.controller.printErrorMsg(this.type+" calls animation : "+n+"\n")}},{key:"attack",value:function(e){var n=this,o=this.controller.levelView.getDirectionName(this.facing);this.controller.levelView.onAnimationEnd(this.controller.levelView.playScaledSpeed(this.sprite.animations,this.getNakedSuffix()+"attack"+o),function(){var t=n.controller.levelEntity.getEntityAt(n.controller.levelModel.getMoveForwardPosition(n));null!==t&&n.controller.levelView.onAnimationEnd(n.controller.levelView.playScaledSpeed(t.getAnimationManager(),n.getNakedSuffix()+"hurt"+o),function(){n.controller.events.forEach(function(e){return e({eventType:r.WhenAttacked,targetType:n.type,eventSenderIdentifier:n.identifier,targetIdentifier:t.identifier})})}),e.succeeded()})}},{key:"updateAnimationDirection",value:function(){var e=this.controller.levelView.getDirectionName(this.facing);this.controller.levelView.playScaledSpeed(this.sprite.animations,this.getNakedSuffix()+"idle"+e)}},{key:"drop",value:function(e,t){if(this.naked)return!1;if(e&&i(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"drop",this).call(this,e,t),"wool"===t&&(this.naked=!0,this.controller.levelView)){var n=this.controller.levelView.getDirectionName(this.facing);this.controller.levelView.playScaledSpeed(this.sprite.animations,"naked_idle"+n,function(){})}return!0}},{key:"takeDamage",value:function(e){var t=this,n=this.controller.levelView,o=n.getDirectionName(this.facing);1<this.healthPoint?(n.playScaledSpeed(this.sprite.animations,this.getNakedSuffix()+"hurt"+o),setTimeout(function(){t.healthPoint--,e.succeeded()},1500)):(this.healthPoint--,this.sprite.animations.stop(null,!0),this.controller.levelView.playScaledSpeed(this.sprite.animations,this.getNakedSuffix()+"die"+o),setTimeout(function(){var e=t.controller.levelView.addResettableTween(t.sprite).to({alpha:0},500,Phaser.Easing.Linear.None);e.onComplete.add(function(){t.controller.levelEntity.destroyEntity(t.identifier)}),e.start()},1500))}},{key:"getNakedSuffix",value:function(){return this.naked?"naked_":""}}]),l}()},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),a=function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,o)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(o):void 0},i=n(0);e.exports=function(){function l(e,t,n,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,t,n,o,i,a));return r.offset=[-43,-45],r.burningSprite=[null,null],r.burningSpriteGhost=[null,null],r.burningSpriteOffset=[47,40],r.prepareSprite(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,i),o(l,[{key:"tick",value:function(){a(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"tick",this).call(this)}},{key:"reset",value:function(){for(var e=0;e<2;e++)this.burningSprite[e]&&this.burningSprite[e].destroy()}},{key:"playMoveForwardAnimation",value:function(n,e,t,o){var i=this;a(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"playMoveForwardAnimation",this).call(this,n,e,t,o),this.burningSprite[0].sortOrder=this.sprite.sortOrder+1,this.burningSprite[1].sortOrder=this.sprite.sortOrder-1,setTimeout(function(){for(var e=0;e<2;e++){var t=i.controller.levelView.addResettableTween(i.burningSprite[e]).to({x:i.offset[0]+i.burningSpriteOffset[0]+40*n[0],y:i.offset[1]+i.burningSpriteOffset[1]+40*n[1]},300,Phaser.Easing.Linear.None);t.onComplete.add(function(){}),t.start()}},50/this.controller.tweenTimeScale)}},{key:"setBurn",value:function(e){if(e)for(var t=0;t<2;t++)this.burningSprite[t].alpha=1;else for(var n=0;n<2;n++)this.burningSprite[n].alpha=0}},{key:"prepareSprite",value:function(){var e=this,t=function(e,t){return 1e3*(Math.random()*(t-e)+e)},n=this.controller.levelView.actionGroup,o=[];this.sprite=n.create(0,0,"zombie","Zombie_001.png"),this.sprite.sortOrder=this.controller.levelView.yToIndex(this.position.y),this.sprite.x=this.offset[0]+40*this.position.x,this.sprite.y=this.offset[1]+40*this.position.y,this.burningSprite=[n.create(this.sprite.x+this.burningSpriteOffset[0],this.sprite.y+this.burningSpriteOffset[1],"burningInSun","BurningFront_001.png"),n.create(this.sprite.x+this.burningSpriteOffset[0],this.sprite.y+this.burningSpriteOffset[1],"burningInSun","BurningBehind_001.png")],o=Phaser.Animation.generateFrameNames("BurningFront_",1,15,".png",3),this.burningSprite[0].animations.add("burn",o,10,!0),o=Phaser.Animation.generateFrameNames("BurningBehind_",1,15,".png",3),this.burningSprite[1].animations.add("burn",o,10,!0),this.controller.levelView.playScaledSpeed(this.burningSprite[0].animations,"burn"),this.controller.levelView.playScaledSpeed(this.burningSprite[1].animations,"burn"),this.burningSprite[0].sortOrder=this.sprite.sortOrder+1,this.burningSprite[1].sortOrder=this.sprite.sortOrder-1;for(var i=["Zombie_056.png","Zombie_166.png","Zombie_001.png","Zombie_111.png"],a=[[[73,79],[57,59],[61,63],[69,71],[65,67],[80,88],[89,91],[93,101],[102,110],[229,236]],[[183,189],[167,169],[171,173],[179,181],[175,177],[190,198],[199,201],[203,211],[212,220],[245,252]],[[18,24],[2,4],[6,8],[14,16],[10,12],[25,33],[34,36],[38,46],[47,55],[221,228]],[[128,134],[112,114],[116,118],[124,126],[120,122],[135,143],[144,146],[148,156],[158,165],[237,244]]],r=0;r<4;r++){var l=this.controller.levelView.getDirectionName(r);o=Phaser.Animation.generateFrameNames("Zombie_",a[r][0][0],a[r][0][1],".png",3);for(var s=0;s<8;s++)o.push(i[r]);this.sprite.animations.add("idle"+l,o,10,!1).onComplete.add(function(){e.playRandomIdle(e.facing)}),o=Phaser.Animation.generateFrameNames("Zombie_",a[r][1][0],a[r][1][1],".png",3),this.sprite.animations.add("lookLeft"+l,o,10,!1).onComplete.add(function(){e.sprite.animations.stop(),setTimeout(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"lookLeft"+e.controller.levelView.getDirectionName(e.facing)+"_2")},t(.2,1))}),o=Phaser.Animation.generateFrameNames("Zombie_",a[r][1][1],a[r][1][0],".png",3),this.sprite.animations.add("lookLeft"+l+"_2",o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames("Zombie_",a[r][2][0],a[r][2][1],".png",3),this.sprite.animations.add("lookRight"+l,o,10,!1).onComplete.add(function(){e.sprite.animations.stop(),setTimeout(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"lookRight"+e.controller.levelView.getDirectionName(e.facing)+"_2")},t(.2,1))}),o=Phaser.Animation.generateFrameNames("Zombie_",a[r][2][1],a[r][2][0],".png",3),this.sprite.animations.add("lookRight"+l+"_2",o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames("Zombie_",a[r][3][0],a[r][3][1],".png",3),this.sprite.animations.add("lookAtCam"+l,o,10,!1).onComplete.add(function(){e.sprite.animations.stop(),setTimeout(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"lookAtCam"+e.controller.levelView.getDirectionName(e.facing)+"_2")},t(.2,1))}),o=Phaser.Animation.generateFrameNames("Zombie_",a[r][3][1],a[r][3][0],".png",3),this.sprite.animations.add("lookAtCam"+l+"_2",o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames("Zombie_",a[r][4][0],a[r][4][1],".png",3),this.sprite.animations.add("lookDown"+l,o,10/3,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames("Zombie_",a[r][5][0],a[r][5][1],".png",3),this.sprite.animations.add("walk"+l,o,10,!0),o=Phaser.Animation.generateFrameNames("Zombie_",a[r][6][0],a[r][6][1],".png",3),this.sprite.animations.add("attack"+l,o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames("Zombie_",a[r][7][0],a[r][7][1],".png",3),this.sprite.animations.add("hurt"+l,o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames("Zombie_",a[r][8][0],a[r][8][1],".png",3),this.sprite.animations.add("die"+l,o,10,!1),o=this.controller.levelView.generateReverseFrames("Zombie_",a[r][9][0],a[r][9][1],".png",3),this.sprite.animations.add("bump"+l,o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))})}this.controller.levelView.playScaledSpeed(this.sprite.animations,"idle"+this.controller.levelView.getDirectionName(this.facing)),this.setBurn(this.controller.levelModel.isDaytime)}},{key:"takeDamage",value:function(e){var n=this,t=this.controller.levelView,o=t.getDirectionName(this.facing);1<this.healthPoint?(t.playScaledSpeed(this.sprite.animations,"hurt"+o),setTimeout(function(){n.healthPoint--,e.succeeded()},1500/this.controller.tweenTimeScale)):(this.healthPoint--,this.controller.levelView.playScaledSpeed(this.sprite.animations,"die"+o),setTimeout(function(){var e=n.controller.levelView.addResettableTween(n.sprite).to({alpha:0},500,Phaser.Easing.Linear.None);e.onComplete.add(function(){n.controller.levelEntity.destroyEntity(n.identifier)}),e.start();for(var t=0;t<2;t++)(e=n.controller.levelView.addResettableTween(n.burningSprite[t]).to({alpha:0},500,Phaser.Easing.Linear.None)).start()},1500/this.controller.tweenTimeScale))}}]),l}()},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=n(0);e.exports=function(){function l(e,t,n,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,t,n,o,i,a));return r.offset=[-43,-55],r.prepareSprite(),r.sprite.sortOrder=r.controller.levelView.yToIndex(r.position.y),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,i),o(l,[{key:"prepareSprite",value:function(){var e=this,t=function(e,t){return 1e3*(Math.random()*(t-e)+e)},n=this.controller.levelView.actionGroup,o=[],i="Iron_Golem_Anims";this.sprite=n.create(0,0,"ironGolem","Iron_Golem_Anims001.png");for(var a=[[[45,45],[46,48],[50,52],[58,60],[54,56],[62,70],[71,74],[77,81],[82,88],[185,192]],[[133,133],[134,136],[138,140],[146,148],[142,144],[150,158],[159,162],[165,169],[170,176],[201,208]],[[1,1],[2,4],[6,8],[14,16],[10,12],[18,26],[27,30],[33,37],[38,44],[177,184]],[[89,89],[90,92],[94,96],[102,104],[98,100],[106,114],[115,118],[121,125],[126,132],[193,200]]],r=0;r<4;r++){var l=this.controller.levelView.getDirectionName(r);o=Phaser.Animation.generateFrameNames(i,a[r][0][0],a[r][0][1],".png",3);for(var s=0;s<12;s++)o.push(o[0]);this.sprite.animations.add("idle"+l,o,8,!1).onComplete.add(function(){e.playRandomIdle(e.facing)}),o=Phaser.Animation.generateFrameNames(i,a[r][1][0],a[r][1][1],".png",3),this.sprite.animations.add("lookLeft"+l,o,8,!1).onComplete.add(function(){e.sprite.animations.stop(),setTimeout(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"lookLeft"+e.controller.levelView.getDirectionName(e.facing)+"_2")},t(.2,1))}),o=Phaser.Animation.generateFrameNames(i,a[r][1][1],a[r][1][0],".png",3),this.sprite.animations.add("lookLeft"+l+"_2",o,8,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,a[r][2][0],a[r][2][1],".png",3),this.sprite.animations.add("lookRight"+l,o,8,!1).onComplete.add(function(){e.sprite.animations.stop(),setTimeout(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"lookRight"+e.controller.levelView.getDirectionName(e.facing)+"_2")},t(.2,1))}),o=Phaser.Animation.generateFrameNames(i,a[r][2][1],a[r][2][0],".png",3),this.sprite.animations.add("lookRight"+l+"_2",o,8,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,a[r][3][0],a[r][3][1],".png",3),this.sprite.animations.add("lookAtCam"+l,o,8,!1).onComplete.add(function(){e.sprite.animations.stop(),setTimeout(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"lookAtCam"+e.controller.levelView.getDirectionName(e.facing)+"_2")},t(.2,1))}),o=Phaser.Animation.generateFrameNames(i,a[r][3][1],a[r][3][0],".png",3),this.sprite.animations.add("lookAtCam"+l+"_2",o,8,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,a[r][4][0],a[r][4][1],".png",3),this.sprite.animations.add("lookDown"+l,o,8,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"lookDown_2"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,a[r][4][1],a[r][4][0],".png",3),this.sprite.animations.add("lookDown_2"+l,o,8,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,a[r][5][0],a[r][5][1],".png",3),this.sprite.animations.add("walk"+l,o,8,!0),o=Phaser.Animation.generateFrameNames(i,a[r][6][0],a[r][6][1],".png",3),this.sprite.animations.add("attack"+l,o,8,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,a[r][7][0],a[r][7][1],".png",3),this.sprite.animations.add("hurt"+l,o,16/3,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,a[r][8][0],a[r][8][1],".png",3),this.sprite.animations.add("die"+l,o,16/3,!1),o=this.controller.levelView.generateReverseFrames(i,a[r][9][0],a[r][9][1],".png",3),this.sprite.animations.add("bump"+l,o,8,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))})}this.controller.levelView.playScaledSpeed(this.sprite.animations,"idle"+this.controller.levelView.getDirectionName(this.facing)),this.sprite.x=this.offset[0]+40*this.position[0],this.sprite.y=this.offset[1]+40*this.position[1]}}]),l}()},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=n(0);e.exports=function(){function l(e,t,n,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,t,n,o,i,a));return r.offset=[-43,-55],r.prepareSprite(),r.sprite.sortOrder=r.controller.levelView.yToIndex(r.position.y),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,i),o(l,[{key:"prepareSprite",value:function(){var e=this,t=function(e,t){return 1e3*(Math.random()*(t-e)+e)},n=this.controller.levelView.actionGroup,o=[],i="ShadowCreeper_2016_";this.sprite=n.create(0,0,"creeper","ShadowCreeper_2016_000.png");for(var a=[[[128,128],[128,131],[134,137],[140,143],[146,149],[152,163],[164,167],[164,178],[179,184],[185,191],[272,279]],[[64,64],[64,67],[70,73],[76,89],[82,85],[88,99],[100,103],[100,114],[115,120],[121,127],[264,271]],[[0,0],[0,3],[6,10],[12,16],[18,21],[24,35],[36,39],[36,50],[51,56],[57,63],[256,263]],[[192,192],[192,195],[198,201],[204,207],[210,213],[216,227],[228,231],[228,242],[243,248],[249,255],[280,287]]],r=0;r<4;r++){var l=this.controller.levelView.getDirectionName(r);o=Phaser.Animation.generateFrameNames(i,a[r][0][0],a[r][0][1],".png",3);for(var s=0;s<12;s++)o.push(o[0]);this.sprite.animations.add("idle"+l,o,10,!1).onComplete.add(function(){e.playRandomIdle(e.facing)}),o=Phaser.Animation.generateFrameNames(i,a[r][1][0],a[r][1][1],".png",3),this.sprite.animations.add("lookLeft"+l,o,10,!1).onComplete.add(function(){e.sprite.animations.stop(),setTimeout(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"lookLeft"+e.controller.levelView.getDirectionName(e.facing)+"_2")},t(.2,1))}),o=Phaser.Animation.generateFrameNames(i,a[r][1][1],a[r][1][0],".png",3),this.sprite.animations.add("lookLeft"+l+"_2",o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,a[r][2][0],a[r][2][1],".png",3),this.sprite.animations.add("lookRight"+l,o,10,!1).onComplete.add(function(){e.sprite.animations.stop(),setTimeout(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"lookRight"+e.controller.levelView.getDirectionName(e.facing)+"_2")},t(.2,1))}),o=Phaser.Animation.generateFrameNames(i,a[r][2][1],a[r][2][0],".png",3),this.sprite.animations.add("lookRight"+l+"_2",o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,a[r][3][0],a[r][3][1],".png",3),this.sprite.animations.add("lookAtCam"+l,o,10,!1).onComplete.add(function(){e.sprite.animations.stop(),setTimeout(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"lookAtCam"+e.controller.levelView.getDirectionName(e.facing)+"_2")},t(.2,1))}),o=Phaser.Animation.generateFrameNames(i,a[r][3][1],a[r][3][0],".png",3),this.sprite.animations.add("lookAtCam"+l+"_2",o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,a[r][4][0],a[r][4][1],".png",3),this.sprite.animations.add("lookDown"+l,o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"lookDown_2"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,a[r][4][1],a[r][4][0],".png",3),this.sprite.animations.add("lookDown_2"+l,o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,a[r][5][0],a[r][5][1],".png",3),this.sprite.animations.add("walk"+l,o,10,!0),o=Phaser.Animation.generateFrameNames(i,a[r][6][0],a[r][6][1],".png",3),this.sprite.animations.add("attack"+l,o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,a[r][7][0],a[r][7][1],".png",3),this.sprite.animations.add("explode"+l,o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,a[r][8][0],a[r][8][1],".png",3),this.sprite.animations.add("hurt"+l,o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames(i,a[r][9][0],a[r][9][1],".png",3),this.sprite.animations.add("die"+l,o,10,!1),o=this.controller.levelView.generateReverseFrames(i,a[r][10][0],a[r][10][1],".png",3),this.sprite.animations.add("bump"+l,o,10,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))})}this.controller.levelView.playScaledSpeed(this.sprite.animations,"idle"+this.controller.levelView.getDirectionName(this.facing)),this.sprite.x=this.offset[0]+40*this.position.x,this.sprite.y=this.offset[1]+40*this.position.y}}]),l}()},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=n(0);e.exports=function(){function l(e,t,n,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,t,n,o,i,a));return r.offset=[-43,-55],r.prepareSprite(),r.sprite.sortOrder=r.controller.levelView.yToIndex(r.position.y),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,i),o(l,[{key:"prepareSprite",value:function(){var e=this,t=function(e,t){return 1e3*(Math.random()*(t-e)+e)},n=this.controller.levelView.actionGroup,o=[];this.sprite=n.create(0,0,"cow","Cow0001.png");for(var i=["Cow0222.png","Cow0111.png","Cow0001.png","Cow0333.png"],a=[[[258,264],[225,227],[224,226],[285,287],[240,241],[291,302],[303,313],[314,326],[327,332],[460,467],[276,282],[240,249]],[[147,153],[114,116],[129,130],[174,176],[129,130],[180,191],[192,202],[203,215],[216,221],[452,459],[165,171],[129,138]],[[36,42],[3,5],[12,14],[63,65],[18,19],[69,80],[81,91],[92,104],[105,110],[444,451],[51,54],[18,27]],[[369,375],[336,338],[335,337],[396,398],[351,352],[402,413],[414,424],[425,437],[438,443],[468,475],[387,393],[351,360]]],r=0;r<4;r++){var l=this.controller.levelView.getDirectionName(r);o=[];for(var s=0;s<20;s++)o.push(i[r]);this.sprite.animations.add("idle"+l,o,12,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle2"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames("Cow",a[r][1][0],a[r][1][1],".png",4),this.sprite.animations.add("lookLeft"+l,o,12,!1).onComplete.add(function(){e.sprite.animations.stop(),setTimeout(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"lookLeft"+e.controller.levelView.getDirectionName(e.facing)+"_2")},t(.2,1))}),o=Phaser.Animation.generateFrameNames("Cow",a[r][1][1],a[r][1][0],".png",4),this.sprite.animations.add("lookLeft"+l+"_2",o,12,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames("Cow",a[r][2][0],a[r][2][1],".png",4),this.sprite.animations.add("lookRight"+l,o,12,!1).onComplete.add(function(){setTimeout(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"lookRight"+e.controller.levelView.getDirectionName(e.facing)+"_2")},t(.2,1))}),o=Phaser.Animation.generateFrameNames("Cow",a[r][2][1],a[r][2][0],".png",4),this.sprite.animations.add("lookRight"+l+"_2",o,12,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames("Cow",a[r][3][0],a[r][3][1],".png",4),this.sprite.animations.add("lookAtCam"+l,o,12,!1).onComplete.add(function(){setTimeout(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"lookAtCam"+e.controller.levelView.getDirectionName(e.facing)+"_2")},t(.2,1))}),o=Phaser.Animation.generateFrameNames("Cow",a[r][3][1],a[r][3][0],".png",4),this.sprite.animations.add("lookAtCam"+l+"_2",o,12,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames("Cow",a[r][4][0],a[r][4][1],".png",4),this.sprite.animations.add("lookDown"+l,o,12,!1).onComplete.add(function(){setTimeout(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"lookDown"+e.controller.levelView.getDirectionName(e.facing)+"_2")},t(.2,1))}),o=Phaser.Animation.generateFrameNames("Cow",a[r][4][1],a[r][4][0],".png",4),this.sprite.animations.add("lookDown"+l+"_2",o,12,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames("Cow",a[r][5][0],a[r][5][1],".png",4),this.sprite.animations.add("walk"+l,o,12,!0),o=Phaser.Animation.generateFrameNames("Cow",a[r][6][0],a[r][6][1],".png",4),this.sprite.animations.add("attack"+l,o,12,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames("Cow",a[r][7][0],a[r][7][1],".png",4),this.sprite.animations.add("hurt"+l,o,12,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames("Cow",a[r][8][0],a[r][8][1],".png",4),this.sprite.animations.add("die"+l,o,12,!1),o=this.controller.levelView.generateReverseFrames("Cow",a[r][9][0],a[r][9][1],".png",4),this.sprite.animations.add("bump"+l,o,12,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),2===r?(o=Phaser.Animation.generateFrameNames("Cow",a[r][10][0],a[r][10][1],".png",4),this.sprite.animations.add("idle2"+l,o,6,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle2"+e.controller.levelView.getDirectionName(e.facing)+"_reverse")}),o=Phaser.Animation.generateFrameNames("Cow",a[r][10][1],a[r][10][0],".png",4),this.sprite.animations.add("idle2"+l+"_reverse",o,6,!1).onComplete.add(function(){e.playRandomIdle(e.facing)})):(o=Phaser.Animation.generateFrameNames("Cow",a[r][10][1],a[r][10][0],".png",4),this.sprite.animations.add("idle2"+l,o,12,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle2"+e.controller.levelView.getDirectionName(e.facing)+"_reverse")}),o=Phaser.Animation.generateFrameNames("Cow",a[r][10][0],a[r][10][1],".png",4),this.sprite.animations.add("idle2"+l+"_reverse",o,12,!1).onComplete.add(function(){e.playRandomIdle(e.facing)})),o=Phaser.Animation.generateFrameNames("Cow",a[r][11][0],a[r][11][1],".png",4),this.sprite.animations.add("eat"+l,o,12,!1).onComplete.add(function(){e.sprite.animations.stop(),setTimeout(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"eat"+e.controller.levelView.getDirectionName(e.facing)+"_2")},t(.2,1))}),o=Phaser.Animation.generateFrameNames("Cow",a[r][11][1],a[r][11][0],".png",4),this.sprite.animations.add("eat"+l+"_2",o,12,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))})}this.controller.levelView.playScaledSpeed(this.sprite.animations,"idle"+this.controller.levelView.getDirectionName(this.facing)),this.sprite.x=this.offset[0]+40*this.position.x,this.sprite.y=this.offset[1]+40*this.position.y}},{key:"playRandomIdle",value:function(e){var t,n="";switch(t=this.controller.levelView.getDirectionName(e),Math.trunc(5*Math.random())+1){case 1:n+="idle";break;case 2:n+="lookLeft";break;case 3:n+="lookRight";break;case 4:n+="lookAtCam";break;case 5:n+="lookDown"}n+=t,this.controller.levelView.playScaledSpeed(this.sprite.animations,n),this.controller.printErrorMsg(this.type+" calls animation : "+n+"\n")}}]),l}()},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=n(0);e.exports=function(){function l(e,t,n,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,t,n,o,i,a));return r.offset=[-25,-32],r.prepareSprite(),r.sprite.sortOrder=r.controller.levelView.yToIndex(r.position.y),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,i),o(l,[{key:"prepareSprite",value:function(){var e=this,t=function(e,t){return 1e3*(Math.random()*(t-e)+e)},n=this.controller.levelView.actionGroup,o=[];this.sprite=n.create(0,0,"chicken","chicken0001.png"),this.sprite.scale.setTo(.75,.75);for(var i=["chicken0222.png","chicken0111.png","chicken0001.png","chicken0333.png"],a=[[[259,275],[225,227],[224,226],[285,287],[276,281],[291,302],[303,313],[314,326],[327,332],[460,467],[240,249]],[[148,164],[114,116],[113,115],[174,176],[165,170],[180,191],[192,202],[203,215],[216,221],[452,459],[129,138]],[[37,53],[3,5],[12,14],[63,65],[54,59],[69,80],[81,91],[92,104],[105,110],[444,451],[18,27]],[[370,386],[336,338],[335,337],[396,398],[387,392],[402,413],[414,424],[425,437],[438,443],[468,475],[351,360]]],r=0;r<4;r++){var l=this.controller.levelView.getDirectionName(r);o=Phaser.Animation.generateFrameNames("chicken",a[r][0][0],a[r][0][1],".png",4);for(var s=0;s<8;s++)o.push(i[r]);this.sprite.animations.add("idle"+l,o,12,!1).onComplete.add(function(){e.playRandomIdle(e.facing)}),o=Phaser.Animation.generateFrameNames("chicken",a[r][1][0],a[r][1][1],".png",4),this.sprite.animations.add("lookLeft"+l,o,12,!1).onComplete.add(function(){e.sprite.animations.stop(),setTimeout(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"lookLeft"+e.controller.levelView.getDirectionName(e.facing)+"_2")},t(.2,1))}),o=Phaser.Animation.generateFrameNames("chicken",a[r][1][1],a[r][1][0],".png",4),this.sprite.animations.add("lookLeft"+l+"_2",o,12,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames("chicken",a[r][2][0],a[r][2][1],".png",4),this.sprite.animations.add("lookRight"+l,o,12,!1).onComplete.add(function(){e.sprite.animations.stop(),setTimeout(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"lookRight"+e.controller.levelView.getDirectionName(e.facing)+"_2")},t(.2,1))}),o=Phaser.Animation.generateFrameNames("chicken",a[r][2][1],a[r][2][0],".png",4),this.sprite.animations.add("lookRight"+l+"_2",o,12,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames("chicken",a[r][3][0],a[r][3][1],".png",4),this.sprite.animations.add("lookAtCam"+l,o,12,!1).onComplete.add(function(){e.sprite.animations.stop(),setTimeout(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"lookAtCam"+e.controller.levelView.getDirectionName(e.facing)+"_2")},t(.2,1))}),o=Phaser.Animation.generateFrameNames("chicken",a[r][3][1],a[r][3][0],".png",4),this.sprite.animations.add("lookAtCam"+l+"_2",o,12,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames("chicken",a[r][4][0],a[r][4][1],".png",4),this.sprite.animations.add("lookDown"+l,o,12,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames("chicken",a[r][5][0],a[r][5][1],".png",4),this.sprite.animations.add("walk"+l,o,12,!0),o=Phaser.Animation.generateFrameNames("chicken",a[r][6][0],a[r][6][1],".png",4),this.sprite.animations.add("attack"+l,o,12,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames("chicken",a[r][7][0],a[r][7][1],".png",4),this.sprite.animations.add("hurt"+l,o,12,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames("chicken",a[r][8][0],a[r][8][1],".png",4),this.sprite.animations.add("die"+l,o,12,!1),o=this.controller.levelView.generateReverseFrames("chicken",a[r][9][0],a[r][9][1],".png",4),this.sprite.animations.add("bump"+l,o,12,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))}),o=Phaser.Animation.generateFrameNames("chicken",a[r][10][0],a[r][10][1],".png",4),this.sprite.animations.add("eat"+l,o,12,!1).onComplete.add(function(){e.sprite.animations.stop(),setTimeout(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"eat"+e.controller.levelView.getDirectionName(e.facing)+"_2")},t(.2,1))}),o=Phaser.Animation.generateFrameNames("chicken",a[r][10][1],a[r][10][0],".png",4),this.sprite.animations.add("eat"+l+"_2",o,12,!1).onComplete.add(function(){e.controller.levelView.playScaledSpeed(e.sprite.animations,"idle"+e.controller.levelView.getDirectionName(e.facing))})}this.controller.levelView.playScaledSpeed(this.sprite.animations,"idle"+this.controller.levelView.getDirectionName(this.facing)),this.sprite.x=this.offset[0]+40*this.position.x,this.sprite.y=this.offset[1]+40*this.position.y}}]),l}()},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=n(0),a=n(1);e.exports=function(){function l(e,t,n,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,t,n,o,i,a));return r.offset=r.controller.levelModel.isUnderwater()?[-8,-8]:[-40,0],r.prepareSprite(),r.sprite.sortOrder=r.controller.levelView.yToIndex(r.position.y),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,i),o(l,[{key:"getFrameForDirection",value:function(){if(this.controller.levelModel.isUnderwater())switch(this.facing){case a.North:return"Dolphin09";case a.South:return"Dolphin27";case a.East:return"Dolphin18";case a.West:return"Dolphin00"}else switch(this.facing){case a.East:return"Dolphin_Surface15";default:return"Dolphin_Surface00"}}},{key:"prepareSprite",value:function(){var n=this;console.log(this.controller.levelModel.isUnderwater());var e=this.getFrameForDirection(),t=this.controller.levelView.actionGroup;this.sprite=t.create(0,0,"dolphin",e+".png");var o=this.controller.levelModel.isUnderwater()?"Dolphin":"Dolphin_Surface",i=[[0,14],[15,29],[0,14],[0,14]];this.controller.levelModel.isUnderwater()&&(i=[[9,16],[18,25],[27,34],[0,7]]);for(var a=function(){var e=n.controller.levelView.getDirectionName(r),t=Phaser.Animation.generateFrameNames(o,i[r][0],i[r][1],".png",2);n.sprite.animations.add("idle"+e,t,12,!1).onComplete.add(function(){n.controller.levelView.playScaledSpeed(n.sprite.animations,"idle"+e,.5)})},r=0;r<4;r++)a();var l=this.controller.levelView.getDirectionName(this.facing);this.controller.levelView.playScaledSpeed(this.sprite.animations,"idle"+l,.5),this.sprite.x=this.offset[0]+40*this.position.x,this.sprite.y=this.offset[1]+40*this.position.y}},{key:"canMoveThrough",value:function(){return this.controller.levelEntity.destroyEntity(this.identifier),!0}}]),l}()},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=n(0),a=n(1);e.exports=function(){function l(e,t,n,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,t,n,o,i,a));return r.offset=[0,10],r.prepareSprite(),r.sprite.sortOrder=r.controller.levelView.yToIndex(r.position.y),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,i),o(l,[{key:"getFrameForDirection",value:function(){if(this.controller.levelModel.isUnderwater())switch(this.facing){case a.North:return"Cod00";case a.South:return"Cod10";case a.East:return"Cod05";case a.West:return"Cod15"}else switch(this.facing){case a.East:return"Cod_Surface00";default:return"Cod_Surface06"}}},{key:"prepareSprite",value:function(){var n=this,e=this.getFrameForDirection(),t=this.controller.levelView.actionGroup;this.sprite=t.create(0,0,"cod",e+".png");var o=this.controller.levelModel.isUnderwater()?"Cod":"Cod_Surface",i=[[6,12],[0,5],[6,12],[6,12]];this.controller.levelModel.isUnderwater()&&(i=[[0,3],[5,8],[10,13],[15,18]]);for(var a=function(){var e=n.controller.levelView.getDirectionName(r),t=Phaser.Animation.generateFrameNames(o,i[r][0],i[r][1],".png",2);n.sprite.animations.add("idle"+e,t,12,!1).onComplete.add(function(){n.controller.levelView.playScaledSpeed(n.sprite.animations,"idle"+e,.5)})},r=0;r<4;r++)a();var l=this.controller.levelView.getDirectionName(this.facing);this.controller.levelView.playScaledSpeed(this.sprite.animations,"idle"+l,.5),this.sprite.x=this.offset[0]+40*this.position.x,this.sprite.y=this.offset[1]+40*this.position.y}},{key:"canMoveThrough",value:function(){return this.controller.levelEntity.destroyEntity(this.identifier),!0}}]),l}()},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=n(0),a=n(1);e.exports=function(){function l(e,t,n,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,t,n,o,i,a));return r.offset=[0,0],r.prepareSprite(),r.sprite.sortOrder=r.controller.levelView.yToIndex(r.position.y),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,i),o(l,[{key:"getFrameForDirection",value:function(){if(this.controller.levelModel.isUnderwater())switch(this.facing){case a.North:return"Salmon08";case a.South:return"Salmon24";case a.East:return"Salmon16";case a.West:return"Salmon00"}else switch(this.facing){case a.East:return"Salmon_Surface00";default:return"Salmon_Surface13"}}},{key:"prepareSprite",value:function(){var n=this,e=this.getFrameForDirection(),t=this.controller.levelView.actionGroup;this.sprite=t.create(0,0,"salmon",e+".png");var o=this.controller.levelModel.isUnderwater()?"Salmon":"Salmon_Surface",i=[[13,25],[0,12],[13,25],[13,25]];this.controller.levelModel.isUnderwater()&&(i=[[8,14],[16,22],[24,30],[0,6]]);for(var a=function(){var e=n.controller.levelView.getDirectionName(r),t=Phaser.Animation.generateFrameNames(o,i[r][0],i[r][1],".png",2);n.sprite.animations.add("idle"+e,t,12,!1).onComplete.add(function(){n.controller.levelView.playScaledSpeed(n.sprite.animations,"idle"+e,.5)})},r=0;r<4;r++)a();var l=this.controller.levelView.getDirectionName(this.facing);this.controller.levelView.playScaledSpeed(this.sprite.animations,"idle"+l,.5),this.sprite.x=this.offset[0]+40*this.position.x,this.sprite.y=this.offset[1]+40*this.position.y}},{key:"canMoveThrough",value:function(){return this.controller.levelEntity.destroyEntity(this.identifier),!0}}]),l}()},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=n(0),a=n(1);e.exports=function(){function l(e,t,n,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,t,n,o,i,a));return r.offset=r.controller.levelModel.isUnderwater()?[-95,-100]:[-95,-90],r.prepareSprite(),r.sprite.sortOrder=r.controller.levelView.yToIndex(r.position.y),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,i),o(l,[{key:"getFrameForDirection",value:function(){if(this.controller.levelModel.isUnderwater())switch(this.facing){case a.North:return"Sea_Turtle00";case a.South:return"Sea_Turtle10";case a.East:return"Sea_Turtle05";case a.West:return"Sea_Turtle15"}else switch(this.facing){case a.East:return"Sea_Turtle_Surface13";default:return"Sea_Turtle_Surface00"}}},{key:"prepareSprite",value:function(){var n=this,e=this.getFrameForDirection(),t=this.controller.levelView.actionGroup;this.sprite=t.create(0,0,"seaTurtle",e+".png"),this.sprite.scale.setTo(.75,.75);var o=this.controller.levelModel.isUnderwater()?"Sea_Turtle":"Sea_Turtle_Surface",i=[[0,12],[13,25],[0,12],[0,12]];this.controller.levelModel.isUnderwater()&&(i=[[0,3],[5,8],[10,13],[15,18]]);for(var a=function(){var e=n.controller.levelView.getDirectionName(r),t=Phaser.Animation.generateFrameNames(o,i[r][0],i[r][1],".png",2);n.sprite.animations.add("idle"+e,t,12,!1).onComplete.add(function(){n.controller.levelView.playScaledSpeed(n.sprite.animations,"idle"+e,.5)})},r=0;r<4;r++)a();var l=this.controller.levelView.getDirectionName(this.facing);this.controller.levelView.playScaledSpeed(this.sprite.animations,"idle"+l,.5),this.sprite.x=this.offset[0]+40*this.position.x,this.sprite.y=this.offset[1]+40*this.position.y}},{key:"canMoveThrough",value:function(){return this.controller.levelView.createMiniBlock(this.position.x,this.position.y,"turtle",{collectibleDistance:1,xOffsetRange:10,yOffsetRange:10}),this.controller.levelEntity.destroyEntity(this.identifier),!0}}]),l}()},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=n(0),a=n(1);e.exports=function(){function l(e,t,n,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,t,n,o,i,a));return r.prepareSprite(),r.sprite.sortOrder=r.controller.levelView.yToIndex(r.position.y),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,i),o(l,[{key:"getOffsetForDirection",value:function(){switch(this.facing){case a.North:return[0,0];case a.South:return[0,-24];case a.East:return[-32,-8];case a.West:return[-12,-8]}}},{key:"getFrameForDirection",value:function(){switch(this.facing){case a.North:return"Squid32";case a.South:return"Squid00";case a.East:return"Squid48";case a.West:return"Squid17"}}},{key:"prepareSprite",value:function(){var n=this;this.offset=this.getOffsetForDirection();var e=this.getFrameForDirection(),t=this.controller.levelView.actionGroup;this.sprite=t.create(0,0,"squid",e+".png"),this.sprite.scale.setTo(.75,.75);for(var o=[[32,39],[40,47],[0,7],[17,23]],i=function(){var e=n.controller.levelView.getDirectionName(a),t=Phaser.Animation.generateFrameNames("Squid",o[a][0],o[a][1],".png",2);n.sprite.animations.add("idle"+e,t,12,!1).onComplete.add(function(){n.controller.levelView.playScaledSpeed(n.sprite.animations,"idle"+e,.25)})},a=0;a<4;a++)i();var r=this.controller.levelView.getDirectionName(this.facing);this.controller.levelView.playScaledSpeed(this.sprite.animations,"idle"+r,.25),this.sprite.x=this.offset[0]+40*this.position.x,this.sprite.y=this.offset[1]+40*this.position.y}},{key:"canMoveThrough",value:function(){return this.controller.levelEntity.destroyEntity(this.identifier),!0}}]),l}()},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=n(0),a=n(1);e.exports=function(){function l(e,t,n,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,t,n,o,i,a));return r.offset=[0,16],r.prepareSprite(),r.sprite.sortOrder=r.controller.levelView.yToIndex(r.position.y),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,i),o(l,[{key:"getFrameForDirection",value:function(){if(this.controller.levelModel.isUnderwater())switch(this.facing){case a.North:return"Tropical_Fish00";case a.South:return"Tropical_Fish10";case a.East:return"Tropical_Fish15";case a.West:return"Tropical_Fish05"}else switch(this.facing){case a.East:return"Tropical_Fish_Surface00";default:return"Tropical_Fish_Surface07"}}},{key:"prepareSprite",value:function(){var o=this,e=this.getFrameForDirection(),t=this.controller.levelView.actionGroup;this.sprite=t.create(0,0,"tropicalFish",e+".png");var i=this.controller.levelModel.isUnderwater()?"Tropical_Fish":"Tropical_Fish_Surface",a=[[7,13],[0,6],[7,13],[7,13]];this.controller.levelModel.isUnderwater()&&(a=[[0,3],[15,18],[10,13],[5,8]]);for(var n=function(e){var t=o.controller.levelView.getDirectionName(e),n=Phaser.Animation.generateFrameNames(i,a[e][0],a[e][1],".png",2);o.sprite.animations.add("idle"+t,n,12,!1).onComplete.add(function(){o.controller.levelView.playScaledSpeed(o.sprite.animations,"idle"+t,.5)})},r=0;r<4;r++)n(r);var l=this.controller.levelView.getDirectionName(this.facing);this.controller.levelView.playScaledSpeed(this.sprite.animations,"idle"+l,.5),this.sprite.x=this.offset[0]+40*this.position.x,this.sprite.y=this.offset[1]+40*this.position.y}},{key:"canMoveThrough",value:function(){return this.controller.levelEntity.destroyEntity(this.identifier),!0}}]),l}()},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=n(0),p=n(7).randomInt;e.exports=function(){function l(e,t,n,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,t,n,o,i,a));return r.offset=[-50,-84],r.prepareSprite(),r.sprite.sortOrder=r.controller.levelView.yToIndex(Number.MAX_SAFE_INTEGER),r.audioDelay=15,o<5?r.patrolA():r.patrolB(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,i),o(l,[{key:"prepareSprite",value:function(){var n=this,e=this.controller.levelView.actionGroup,t=[];this.sprite=e.create(0,0,"ghast","Ghast0000.png"),this.sprite.scale.setTo(1,1);for(var o=[[[72,83],[84,95]],[[48,59],[60,71]],[[24,35],[36,47]],[[0,11],[12,23]]],i=0;i<4;i++){var a=this.controller.levelView.getDirectionName(i);t=Phaser.Animation.generateFrameNames("Ghast",o[i][0][0],o[i][0][1],".png",4);for(var r=p(2,t.length),l=[],s=0;s<r;++s)l.push(t[0]),t.splice(0,1);for(var c=0;c<l.length;++c)t.push(l[c]);for(var u=0;u<0;u++)t.push(t[0]);this.sprite.animations.add("idle"+a,t,12,!1).onComplete.add(function(){n.playRandomIdle(n.facing)}),t=Phaser.Animation.generateFrameNames("Ghast",o[i][1][0],o[i][1][1],".png",4),this.sprite.animations.add("shoot"+a,t,12,!1).onComplete.add(function(){var e,t;n.sprite.animations.stop(),setTimeout(function(){n.controller.levelView.playScaledSpeed(n.sprite.animations,"shoot"+n.controller.levelView.getDirectionName(n.facing)+"_2")},(e=.2,t=1,1e3*(Math.random()*(t-e)+e)))}),t=Phaser.Animation.generateFrameNames("Ghast",o[i][1][1],o[i][1][0],".png",4),this.sprite.animations.add("shoot"+a+"_2",t,12,!1).onComplete.add(function(){n.controller.levelView.playScaledSpeed(n.sprite.animations,"idle"+n.controller.levelView.getDirectionName(n.facing))})}this.controller.levelView.playScaledSpeed(this.sprite.animations,"idle"+this.controller.levelView.getDirectionName(this.facing)),this.sprite.x=this.offset[0]+40*this.position.x,this.sprite.y=this.offset[1]+40*this.position.y}},{key:"canMoveThrough",value:function(){return!0}},{key:"playRandomIdle",value:function(e){var t="";if(t+="idle",t+=this.controller.levelView.getDirectionName(e),this.controller.levelView.playScaledSpeed(this.sprite.animations,t),0<this.audioDelay)--this.audioDelay;else if(this.audioDelay=5,0===Math.floor(5*Math.random())){var n=Math.floor(4*Math.random());this.playMoan(n)}}},{key:"playMoan",value:function(e){switch(e){case 0:this.controller.audioPlayer.play("moan2");break;case 1:this.controller.audioPlayer.play("moan3");break;case 2:this.controller.audioPlayer.play("moan6");break;default:this.controller.audioPlayer.play("moan7")}}},{key:"patrolA",value:function(){var e,t,n=[Phaser.Easing.Sinusoidal.InOut,!0,0,-1,!0];(e=this.controller.levelView.addResettableTween(this.sprite)).to.apply(e,[{y:this.offset[1]+40*this.position.y+80},p(2500,3500)].concat(n)),(t=this.controller.levelView.addResettableTween(this.sprite)).to.apply(t,[{x:this.offset[0]+40*this.position.x+10},p(1500,2e3)].concat(n))}},{key:"patrolB",value:function(){var e,t,n=[Phaser.Easing.Sinusoidal.InOut,!0,0,-1,!0];(e=this.controller.levelView.addResettableTween(this.sprite)).to.apply(e,[{y:this.offset[1]+40*this.position.y-80},p(2500,3500)].concat(n)),(t=this.controller.levelView.addResettableTween(this.sprite)).to.apply(t,[{x:this.offset[0]+40*this.position.x-10},p(1500,2e3)].concat(n))}}]),l}()},function(e,t,n){"use strict";var i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();e.exports=function(){function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.controller=e,this.audioPlayer=e.audioPlayer,this.game=e.game,this.assetRoot=e.assetRoot,this.assets={entityShadow:{type:"image",path:this.assetRoot+"images/Character_Shadow.png"},selectionIndicator:{type:"image",path:this.assetRoot+"images/Selection_Indicator.png"},finishOverlay:{type:"image",path:this.assetRoot+"images/WhiteRect.png"},underwaterOverlay:{type:"atlasJSON",pngPath:this.assetRoot+"images/Water_Caustics.png",jsonPath:this.assetRoot+"images/Water_Caustics.json"},bed:{type:"image",path:this.assetRoot+"images/Bed.png"},playerSteve:{type:"atlasJSON",pngPath:this.assetRoot+"images/Steve1013.png",jsonPath:this.assetRoot+"images/Steve1013.json"},playerAlex:{type:"atlasJSON",pngPath:this.assetRoot+"images/Alex1013.png",jsonPath:this.assetRoot+"images/Alex1013.json"},playerSteveEvents:{type:"atlasJSON",pngPath:this.assetRoot+"images/Steve_2016.png",jsonPath:this.assetRoot+"images/Steve_2016.json"},playerAlexEvents:{type:"atlasJSON",pngPath:this.assetRoot+"images/DevAlex.png",jsonPath:this.assetRoot+"images/DevAlex.json"},playerAgent:{type:"atlasJSON",pngPath:this.assetRoot+"images/Agent.png",jsonPath:this.assetRoot+"images/Agent.json"},playerSteveAquatic:{type:"atlasJSON",pngPath:this.assetRoot+"images/Steve_2018.png",jsonPath:this.assetRoot+"images/Steve_2018.json"},playerAlexAquatic:{type:"atlasJSON",pngPath:this.assetRoot+"images/Alex_2018.png",jsonPath:this.assetRoot+"images/Alex_2018.json"},AO:{type:"atlasJSON",pngPath:this.assetRoot+"images/AO.png",jsonPath:this.assetRoot+"images/AO.json"},LavaGlow:{type:"atlasJSON",pngPath:this.assetRoot+"images/LavaGlow.png",jsonPath:this.assetRoot+"images/LavaGlow.json"},WaterAO:{type:"atlasJSON",pngPath:this.assetRoot+"images/WaterAO.png",jsonPath:this.assetRoot+"images/WaterAO.json"},blockShadows:{type:"atlasJSON",pngPath:this.assetRoot+"images/Block_Shadows.png",jsonPath:this.assetRoot+"images/Block_Shadows.json"},undergroundFow:{type:"atlasJSON",pngPath:this.assetRoot+"images/UndergroundFoW.png",jsonPath:this.assetRoot+"images/UndergroundFoW.json"},blocks:{type:"atlasJSON",pngPath:this.assetRoot+"images/Blocks.png",jsonPath:this.assetRoot+"images/Blocks.json"},leavesAcacia:{type:"atlasJSON",pngPath:this.assetRoot+"images/Leaves_Acacia_Decay.png",jsonPath:this.assetRoot+"images/Leaves_Acacia_Decay.json"},leavesBirch:{type:"atlasJSON",pngPath:this.assetRoot+"images/Leaves_Birch_Decay.png",jsonPath:this.assetRoot+"images/Leaves_Birch_Decay.json"},leavesJungle:{type:"atlasJSON",pngPath:this.assetRoot+"images/Leaves_Jungle_Decay.png",jsonPath:this.assetRoot+"images/Leaves_Jungle_Decay.json"},leavesOak:{type:"atlasJSON",pngPath:this.assetRoot+"images/Leaves_Oak_Decay.png",jsonPath:this.assetRoot+"images/Leaves_Oak_Decay.json"},leavesSpruce:{type:"atlasJSON",pngPath:this.assetRoot+"images/Leaves_Spruce_Decay.png",jsonPath:this.assetRoot+"images/Leaves_Spruce_Decay.json"},leavesSpruceSnowy:{type:"atlasJSON",pngPath:this.assetRoot+"images/Leaves_Spruce_Snowy_Decay.png",jsonPath:this.assetRoot+"images/Leaves_Spruce_Snowy_Decay.json"},sheep:{type:"atlasJSON",pngPath:this.assetRoot+"images/Sheep_2016.png",jsonPath:this.assetRoot+"images/Sheep_2016.json"},crops:{type:"atlasJSON",pngPath:this.assetRoot+"images/Crops.png",jsonPath:this.assetRoot+"images/Crops.json"},torch:{type:"atlasJSON",pngPath:this.assetRoot+"images/Torch.png",jsonPath:this.assetRoot+"images/Torch.json"},destroyOverlay:{type:"atlasJSON",pngPath:this.assetRoot+"images/Destroy_Overlay.png",jsonPath:this.assetRoot+"images/Destroy_Overlay.json"},blockExplode:{type:"atlasJSON",pngPath:this.assetRoot+"images/BlockExplode.png",jsonPath:this.assetRoot+"images/BlockExplode.json"},miningParticles:{type:"atlasJSON",pngPath:this.assetRoot+"images/MiningParticles.png",jsonPath:this.assetRoot+"images/MiningParticles.json"},miniBlocks:{type:"atlasJSON",pngPath:this.assetRoot+"images/Miniblocks.png",jsonPath:this.assetRoot+"images/Miniblocks.json"},lavaPop:{type:"atlasJSON",pngPath:this.assetRoot+"images/LavaPop.png",jsonPath:this.assetRoot+"images/LavaPop.json"},redstoneSparkle:{type:"atlasJSON",pngPath:this.assetRoot+"images/Redstone_Sparkle.png",jsonPath:this.assetRoot+"images/Redstone_Sparkle.json"},fire:{type:"atlasJSON",pngPath:this.assetRoot+"images/Fire.png",jsonPath:this.assetRoot+"images/Fire.json"},bubbles:{type:"atlasJSON",pngPath:this.assetRoot+"images/Bubbles.png",jsonPath:this.assetRoot+"images/Bubbles.json"},explosion:{type:"atlasJSON",pngPath:this.assetRoot+"images/Explosion.png",jsonPath:this.assetRoot+"images/Explosion.json"},door:{type:"atlasJSON",pngPath:this.assetRoot+"images/Door.png",jsonPath:this.assetRoot+"images/Door.json"},doorIron:{type:"atlasJSON",pngPath:this.assetRoot+"images/Door_Iron.png",jsonPath:this.assetRoot+"images/Door_Iron.json"},rails:{type:"atlasJSON",pngPath:this.assetRoot+"images/Rails.png",jsonPath:this.assetRoot+"images/Rails.json"},tnt:{type:"atlasJSON",pngPath:this.assetRoot+"images/TNT.png",jsonPath:this.assetRoot+"images/TNT.json"},burningInSun:{type:"atlasJSON",pngPath:this.assetRoot+"images/BurningInSun.png",jsonPath:this.assetRoot+"images/BurningInSun.json"},zombie:{type:"atlasJSON",pngPath:this.assetRoot+"images/Zombie.png",jsonPath:this.assetRoot+"images/Zombie.json"},ironGolem:{type:"atlasJSON",pngPath:this.assetRoot+"images/Iron_Golem.png",jsonPath:this.assetRoot+"images/Iron_Golem.json"},creeper:{type:"atlasJSON",pngPath:this.assetRoot+"images/Creeper_2016.png",jsonPath:this.assetRoot+"images/Creeper_2016.json"},cow:{type:"atlasJSON",pngPath:this.assetRoot+"images/Cow.png",jsonPath:this.assetRoot+"images/Cow.json"},chicken:{type:"atlasJSON",pngPath:this.assetRoot+"images/Chicken.png",jsonPath:this.assetRoot+"images/Chicken.json"},cod:{type:"atlasJSON",pngPath:this.assetRoot+"images/entities/Cod_2018.png",jsonPath:this.assetRoot+"images/entities/Cod_2018.json"},dolphin:{type:"atlasJSON",pngPath:this.assetRoot+"images/entities/Dolphin_2018.png",jsonPath:this.assetRoot+"images/entities/Dolphin_2018.json"},ghast:{type:"atlasJSON",pngPath:this.assetRoot+"images/Ghast.png",jsonPath:this.assetRoot+"images/Ghast.json"},salmon:{type:"atlasJSON",pngPath:this.assetRoot+"images/entities/Salmon_2018.png",jsonPath:this.assetRoot+"images/entities/Salmon_2018.json"},seaTurtle:{type:"atlasJSON",pngPath:this.assetRoot+"images/entities/Sea_Turtle_2018.png",jsonPath:this.assetRoot+"images/entities/Sea_Turtle_2018.json"},squid:{type:"atlasJSON",pngPath:this.assetRoot+"images/entities/Squid_2018.png",jsonPath:this.assetRoot+"images/entities/Squid_2018.json"},tropicalFish:{type:"atlasJSON",pngPath:this.assetRoot+"images/entities/Tropical_Fish_2018.png",jsonPath:this.assetRoot+"images/entities/Tropical_Fish_2018.json"},dig_wood1:{type:"sound",mp3:this.assetRoot+"audio/dig_wood1.mp3",wav:this.assetRoot+"audio/dig_wood1.wav",ogg:this.assetRoot+"audio/dig_wood1.ogg"},stepGrass:{type:"sound",mp3:this.assetRoot+"audio/step_grass1.mp3",wav:this.assetRoot+"audio/step_grass1.wav",ogg:this.assetRoot+"audio/step_grass1.ogg"},stepWood:{type:"sound",mp3:this.assetRoot+"audio/wood2.mp3",ogg:this.assetRoot+"audio/wood2.ogg"},stepStone:{type:"sound",mp3:this.assetRoot+"audio/stone2.mp3",ogg:this.assetRoot+"audio/stone2.ogg"},stepGravel:{type:"sound",mp3:this.assetRoot+"audio/gravel1.mp3",ogg:this.assetRoot+"audio/gravel1.ogg"},stepFarmland:{type:"sound",mp3:this.assetRoot+"audio/cloth4.mp3",ogg:this.assetRoot+"audio/cloth4.ogg"},failure:{type:"sound",mp3:this.assetRoot+"audio/break.mp3",ogg:this.assetRoot+"audio/break.ogg"},success:{type:"sound",mp3:this.assetRoot+"audio/levelup.mp3",ogg:this.assetRoot+"audio/levelup.ogg"},fall:{type:"sound",mp3:this.assetRoot+"audio/fallsmall.mp3",ogg:this.assetRoot+"audio/fallsmall.ogg"},fuse:{type:"sound",mp3:this.assetRoot+"audio/fuse.mp3",ogg:this.assetRoot+"audio/fuse.ogg"},explode:{type:"sound",mp3:this.assetRoot+"audio/explode3.mp3",ogg:this.assetRoot+"audio/explode3.ogg"},placeBlock:{type:"sound",mp3:this.assetRoot+"audio/cloth1.mp3",ogg:this.assetRoot+"audio/cloth1.ogg"},collectedBlock:{type:"sound",mp3:this.assetRoot+"audio/pop.mp3",ogg:this.assetRoot+"audio/pop.ogg"},bump:{type:"sound",mp3:this.assetRoot+"audio/hit3.mp3",ogg:this.assetRoot+"audio/hit3.ogg"},punch:{type:"sound",mp3:this.assetRoot+"audio/cloth1.mp3",ogg:this.assetRoot+"audio/cloth1.ogg"},fizz:{type:"sound",mp3:this.assetRoot+"audio/fizz.mp3",ogg:this.assetRoot+"audio/fizz.ogg"},doorOpen:{type:"sound",mp3:this.assetRoot+"audio/door_open.mp3",ogg:this.assetRoot+"audio/door_open.ogg"},houseSuccess:{type:"sound",mp3:this.assetRoot+"audio/launch1.mp3",ogg:this.assetRoot+"audio/launch1.ogg"},minecart:{type:"sound",mp3:this.assetRoot+"audio/minecartBase.mp3",ogg:this.assetRoot+"audio/minecartBase.ogg"},sheepBaa:{type:"sound",mp3:this.assetRoot+"audio/say3.mp3",ogg:this.assetRoot+"audio/say3.ogg"},chickenHurt:{type:"sound",mp3:this.assetRoot+"audio/chickenhurt2.mp3",ogg:this.assetRoot+"audio/chickenhurt2.ogg"},chickenBawk:{type:"sound",mp3:this.assetRoot+"audio/chickensay3.mp3",ogg:this.assetRoot+"audio/chickensay3.ogg"},cowHuff:{type:"sound",mp3:this.assetRoot+"audio/cowhuff.mp3",ogg:this.assetRoot+"audio/cowhuff.ogg"},cowHurt:{type:"sound",mp3:this.assetRoot+"audio/cowhurt.mp3",ogg:this.assetRoot+"audio/cowhurt.ogg"},cowMoo:{type:"sound",mp3:this.assetRoot+"audio/cowmoo1.mp3",ogg:this.assetRoot+"audio/cowmoo1.ogg"},cowMooLong:{type:"sound",mp3:this.assetRoot+"audio/cowmoolong.mp3",ogg:this.assetRoot+"audio/cowmoolong.ogg"},creeperHiss:{type:"sound",mp3:this.assetRoot+"audio/creeper.mp3",ogg:this.assetRoot+"audio/creeper.ogg"},ironGolemHit:{type:"sound",mp3:this.assetRoot+"audio/irongolemhit.mp3",ogg:this.assetRoot+"audio/irongolemhit.ogg"},metalWhack:{type:"sound",mp3:this.assetRoot+"audio/metalwhack.mp3",ogg:this.assetRoot+"audio/metalwhack.ogg"},zombieBrains:{type:"sound",mp3:this.assetRoot+"audio/zombiebrains.mp3",ogg:this.assetRoot+"audio/zombiebrains.ogg"},zombieGroan:{type:"sound",mp3:this.assetRoot+"audio/zombiegroan.mp3",ogg:this.assetRoot+"audio/zombiegroan.ogg"},zombieHurt:{type:"sound",mp3:this.assetRoot+"audio/zombiehurt1.mp3",ogg:this.assetRoot+"audio/zombiehurt1.ogg"},pistonIn:{type:"sound",mp3:this.assetRoot+"audio/piston_in.mp3",ogg:this.assetRoot+"audio/piston_in.ogg"},zombieHurt2:{type:"sound",mp3:this.assetRoot+"audio/zombiehurt2.mp3",ogg:this.assetRoot+"audio/zombiehurt2.ogg"},pistonOut:{type:"sound",mp3:this.assetRoot+"audio/piston_out.mp3",ogg:this.assetRoot+"audio/piston_out.ogg"},portalAmbient:{type:"sound",mp3:this.assetRoot+"audio/portal.mp3",ogg:this.assetRoot+"audio/portal.ogg"},portalTravel:{type:"sound",mp3:this.assetRoot+"audio/travel_portal.mp3",ogg:this.assetRoot+"audio/travel_portal.ogg"},pressurePlateClick:{type:"sound",mp3:this.assetRoot+"audio/pressurePlateClick.mp3",ogg:this.assetRoot+"audio/pressurePlateClick.ogg"},moan2:{type:"sound",mp3:this.assetRoot+"audio/moan2.mp3",ogg:this.assetRoot+"audio/moan2.ogg"},moan3:{type:"sound",mp3:this.assetRoot+"audio/moan3.mp3",ogg:this.assetRoot+"audio/moan3.ogg"},moan6:{type:"sound",mp3:this.assetRoot+"audio/moan6.mp3",ogg:this.assetRoot+"audio/moan6.ogg"},moan7:{type:"sound",mp3:this.assetRoot+"audio/moan7.mp3",ogg:this.assetRoot+"audio/moan7.ogg"}};var t=["chicken","entityShadow","selectionIndicator","AO","blockShadows","blocks","miniBlocks","stepGrass","failure","success"].concat(["dig_wood1","stepGrass","stepWood","stepStone","stepGravel","stepFarmland","failure","success","fall","fuse","explode","placeBlock","collectedBlock","bump","punch","fizz","doorOpen","minecart","sheepBaa","chickenHurt","chickenBawk","cowHuff","cowHurt","cowMoo","cowMooLong","creeperHiss","ironGolemHit","metalWhack","zombieBrains","zombieGroan","zombieHurt","pistonIn","pistonOut","portalAmbient","portalTravel","pressurePlateClick","moan2","moan3","moan6","moan7"]),n=["entityShadow","selectionIndicator","finishOverlay","AO","WaterAO","blockShadows","blocks","leavesJungle","destroyOverlay","blockExplode","miningParticles","miniBlocks","bubbles","dig_wood1","stepGrass","stepWood","stepStone","stepGravel","failure","success","fall","placeBlock","collectedBlock","bump","punch"];this.assetPacks={adventurerLevelOneAssets:["entityShadow","selectionIndicator","AO","blockShadows","leavesOak","leavesBirch","blocks","sheep","bump","stepGrass","failure","success"],adventurerLevelTwoAssets:["entityShadow","selectionIndicator","AO","blockShadows","leavesSpruce","blocks","sheep","bump","stepGrass","failure","playerSteve","success","miniBlocks","blockExplode","miningParticles","destroyOverlay","dig_wood1","collectedBlock","punch"],adventurerLevelThreeAssets:["entityShadow","selectionIndicator","AO","blockShadows","leavesOak","blocks","sheep","bump","stepGrass","failure","playerSteve","success","miniBlocks","blockExplode","miningParticles","destroyOverlay","dig_wood1","collectedBlock","sheepBaa","punch"],adventurerAllAssetsMinusPlayer:["entityShadow","selectionIndicator","finishOverlay","bed","AO","LavaGlow","WaterAO","blockShadows","undergroundFow","blocks","leavesAcacia","leavesBirch","leavesOak","leavesSpruce","sheep","creeper","crops","torch","destroyOverlay","blockExplode","miningParticles","miniBlocks","lavaPop","fire","bubbles","explosion","door","rails","tnt","dig_wood1","stepGrass","stepWood","stepStone","stepGravel","stepFarmland","failure","success","fall","fuse","explode","placeBlock","collectedBlock","bump","punch","fizz","doorOpen","houseSuccess","minecart","sheepBaa"],levelOneAssets:t,levelTwoAssets:t,levelThreeAssets:t,designerAllAssetsMinusPlayer:["entityShadow","selectionIndicator","finishOverlay","bed","AO","LavaGlow","WaterAO","blockShadows","undergroundFow","blocks","leavesAcacia","leavesBirch","leavesJungle","leavesOak","leavesSpruce","sheep","creeper","crops","torch","destroyOverlay","blockExplode","miningParticles","miniBlocks","lavaPop","fire","bubbles","explosion","door","rails","tnt","dig_wood1","stepGrass","stepWood","stepStone","stepGravel","stepFarmland","failure","success","fall","fuse","explode","placeBlock","collectedBlock","bump","punch","fizz","doorOpen","houseSuccess","minecart","sheepBaa","zombie","cow","chicken","ironGolem","burningInSun","chickenHurt","chickenBawk","cowHuff","cowHurt","cowMoo","cowMooLong","creeperHiss","ironGolemHit","metalWhack","zombieBrains","zombieGroan","zombieHurt","zombieHurt2"],heroAllAssetsMinusPlayer:["entityShadow","selectionIndicator","finishOverlay","bed","AO","LavaGlow","WaterAO","blockShadows","undergroundFow","blocks","leavesAcacia","leavesBirch","leavesOak","leavesSpruce","leavesSpruceSnowy","sheep","creeper","crops","torch","destroyOverlay","blockExplode","miningParticles","miniBlocks","lavaPop","redstoneSparkle","fire","bubbles","explosion","door","doorIron","rails","tnt","dig_wood1","stepGrass","stepWood","stepStone","stepGravel","stepFarmland","failure","success","fall","fuse","explode","placeBlock","collectedBlock","bump","punch","fizz","doorOpen","houseSuccess","minecart","sheepBaa","zombie","cow","chicken","burningInSun","ghast","chickenHurt","chickenBawk","cowHuff","cowHurt","cowMoo","cowMooLong","creeperHiss","metalWhack","zombieBrains","zombieGroan","zombieHurt","zombieHurt2","pistonIn","pistonOut","portalAmbient","portalTravel","pressurePlateClick","moan2","moan3","moan6","moan7"],aquaticIslandAssets:n,aquaticLevelThreeAndFourAssets:n.concat("cod","dolphin"),aquaticAllAssetsMinusPlayer:["entityShadow","selectionIndicator","finishOverlay","underwaterOverlay","AO","LavaGlow","WaterAO","lavaPop","blockShadows","undergroundFow","blocks","leavesJungle","cod","crops","torch","dolphin","salmon","seaTurtle","squid","tropicalFish","destroyOverlay","blockExplode","miningParticles","miniBlocks","bubbles","dig_wood1","stepGrass","stepWood","stepStone","stepGravel","failure","success","fall","placeBlock","collectedBlock","bump","punch"],allAssetsMinusPlayer:["entityShadow","selectionIndicator","finishOverlay","underwaterOverlay","bed","AO","LavaGlow","WaterAO","blockShadows","undergroundFow","blocks","cod","dolphin","salmon","seaTurtle","squid","tropicalFish","leavesAcacia","leavesBirch","leavesJungle","leavesOak","leavesSpruce","leavesSpruceSnowy","sheep","creeper","crops","torch","destroyOverlay","blockExplode","miningParticles","miniBlocks","lavaPop","redstoneSparkle","fire","bubbles","explosion","door","doorIron","rails","tnt","dig_wood1","stepGrass","stepWood","stepStone","stepGravel","stepFarmland","failure","success","fall","fuse","explode","placeBlock","collectedBlock","bump","punch","fizz","doorOpen","houseSuccess","minecart","sheepBaa","zombie","cow","chicken","ghast","ironGolem","burningInSun","chickenHurt","chickenBawk","cowHuff","cowHurt","cowMoo","cowMooLong","creeperHiss","ironGolemHit","metalWhack","zombieBrains","zombieGroan","zombieHurt","zombieHurt2","pistonIn","pistonOut","portalAmbient","portalTravel","pressurePlateClick","moan2","moan3","moan6","moan7"],playerSteve:["playerSteve"],playerAlex:["playerAlex"],playerSteveEvents:["playerSteveEvents"],playerAlexEvents:["playerAlexEvents"],playerAgent:["playerAgent"],playerSteveAquatic:["playerSteveAquatic"],playerAlexAquatic:["playerAlexAquatic"]}}return i(o,[{key:"loadPacks",value:function(e){var t=this;e.forEach(function(e){t.loadPack(e)})}},{key:"loadPack",value:function(e){var t=this.assetPacks[e];this.loadAssets(t)}},{key:"loadAssets",value:function(e){var n=this;e.forEach(function(e){var t=n.assets[e];n.loadAsset(e,t)})}},{key:"loadAsset",value:function(e,t){switch(t.type){case"image":this.game.load.image(e,t.path);break;case"sound":this.audioPlayer.register({id:e,mp3:t.mp3,ogg:t.ogg});break;case"atlasJSON":this.game.load.atlasJSONHash(e,t.pngPath,t.jsonPath);break;default:throw"Asset "+e+" needs config.type set in configuration."}}}]),o}()},function(e,t,n){"use strict";var o=n(36),i=n(37),a=n(38),l=n(39),s=n(40),c=n(41),u=n(42),p=n(4),d=n(43);e.exports.get=function(r){return{startCommandCollection:function(){r.DEBUG&&console.log("Collecting commands.")},startAttempt:function(t){return new Promise(function(e){r.OnCompleteCallback=function(){t&&t.apply(void 0,arguments),e(arguments.length<=0?void 0:arguments[0])},r.setPlayerActionDelayByQueueLength(),r.queue.begin(),r.run(),r.attemptRunning=!0,r.resultReported=!1})},resetAttempt:function(){r.reset(),r.queue.reset(),r.OnCompleteCallback=null,r.attemptRunning=!1},registerEventCallback:function(e,t){r.events.push(t)},onEventTriggered:function(e,t,n,o){this.registerEventCallback(e,function(e){e.eventType===n&&e.targetType===t&&o(e)})},isEventTriggered:function(e,t){return e.eventType===t},moveDirection:function(e,t,n){r.addCommand(new c(r,e,t,n),t)},moveForward:function(e,t,n){r.addCommand(new l(r,e,t,n),t)},moveBackward:function(e,t){r.addCommand(new s(r,e,t),t)},moveAway:function(e,t,n){var o=new p(r,e,function(){r.moveAway(o,n)},t);r.addCommand(o)},moveToward:function(e,t,n){var o=new p(r,e,function(){r.moveToward(o,n)},t);r.addCommand(o)},flashEntity:function(e,t){var n=new p(r,e,function(){r.flashEntity(n)},t);r.addCommand(n)},explodeEntity:function(e,t){var n=new p(r,e,function(){r.explodeEntity(n)},t);r.addCommand(n)},use:function(e,t){var n=new p(r,e,function(){r.use(n,t)},t);r.addCommand(n)},playSound:function(e,t,n){var o=new p(r,e,function(){r.playSound(o,t)},n);r.addCommand(o)},turn:function(e,t,n,o){var i=new p(r,e,function(){r.turn(i,"right"===t?1:-1)},n,o);r.addCommand(i)},turnRandom:function(e,t){var n=new p(r,e,function(){r.turnRandom(n)},t);r.addCommand(n)},turnRight:function(e,t,n){this.turn(e,"right",t,n)},turnLeft:function(e,t,n){this.turn(e,"left",t,n)},destroyBlock:function(e,t){var n=new p(r,e,function(){r.destroyBlock(n)},t);r.addCommand(n)},placeBlock:function(e,t,n){r.addCommand(new o(r,e,t,n),n)},placeDirection:function(e,t,n,o){r.addCommand(new a(r,e,t,n,o),n,o)},placeInFront:function(e,t,n){r.addCommand(new i(r,e,t,n),n)},tillSoil:function(e,t){r.addCommand(new i(r,e,"watering",t))},ifBlockAhead:function(e,t,n,o){r.addCommand(new u(r,e,t,n,o),n)},repeat:function(e,t,n,o){r.addCommand(new d(r,e,t,n,o))},repeatRandom:function(e,t,n){var o=Math.floor(10*Math.random())+1;r.addCommand(new d(r,e,t,o,n))},getScreenshot:function(){return r.getScreenshot()},spawnEntity:function(e,t,n){var o=new p(r,e,function(){r.spawnEntity(o,t,n)});r.addCommand(o)},spawnEntityAt:function(e,t,n,o,i){var a=new p(r,e,function(){r.spawnEntityAt(a,t,n,o,i)});r.addCommand(a)},destroyEntity:function(e,t){var n=new p(r,e,function(){r.destroyEntity(n,t)},t);r.addGlobalCommand(n)},drop:function(e,t,n){var o=new p(r,e,function(){r.drop(o,t)},n);r.addCommand(o)},startDay:function(e){var t=new p(r,e,function(){r.startDay(t)});r.addGlobalCommand(t)},startNight:function(e){var t=new p(r,e,function(){r.startNight(t)});r.addGlobalCommand(t)},wait:function(e,t,n){var o=new p(r,e,function(){r.wait(o,t)},n);r.addGlobalCommand(o)},attack:function(e,t){var n=new p(r,e,function(){r.attack(n)},t);r.addCommand(n)},setDayNightCycle:function(e,t,n){r.dayNightCycle||(r.dayNightCycle=!0,r.initiateDayNightCycle(e,t,n))},addScore:function(e,t,n){var o=new p(r,e,function(){r.addScore(o,t)},n);r.addGlobalCommand(o)},arrowDown:function(e){r.arrowDown(e)},arrowUp:function(e){r.arrowUp(e)},clickDown:function(){r.clickDown()},clickUp:function(){r.clickUp()}}}},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=n(2);e.exports=function(){function a(e,t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t,o));return i.BlockType=n,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i),o(a,[{key:"tick",value:function(){}},{key:"begin",value:function(){(function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,o)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(o):void 0})(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"begin",this).call(this),this.GameController.placeBlock(this,this.BlockType)}}]),a}()},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=n(2);e.exports=function(){function a(e,t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t,o));return i.BlockType=n,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i),o(a,[{key:"tick",value:function(){}},{key:"begin",value:function(){(function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,o)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(o):void 0})(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"begin",this).call(this),this.GameController.placeBlockForward(this,this.BlockType)}}]),a}()},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=n(2);e.exports=function(){function r(e,t,n,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t,o));return a.BlockType=n,a.Direction=i,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i),o(r,[{key:"tick",value:function(){}},{key:"begin",value:function(){(function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,o)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(o):void 0})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"begin",this).call(this),this.GameController.placeBlockDirection(this,this.BlockType,this.Direction)}}]),r}()},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),a=n(2);e.exports=function(){function i(e,t,n,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t,n,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,a),o(i,[{key:"tick",value:function(){}},{key:"begin",value:function(){(function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,o)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(o):void 0})(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"begin",this).call(this),this.GameController.moveForward(this)}}]),i}()},function(e,t,n){"use strict";var i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),a=n(2);e.exports=function(){function o(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,a),i(o,[{key:"tick",value:function(){}},{key:"begin",value:function(){(function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,o)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(o):void 0})(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"begin",this).call(this),this.GameController.moveBackward(this)}}]),o}()},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=n(2);e.exports=function(){function a(e,t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t,n));return i.Direciton=o,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i),o(a,[{key:"tick",value:function(){}},{key:"begin",value:function(){(function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,o)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(o):void 0})(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"begin",this).call(this),this.GameController.moveDirection(this,this.Direciton)}}]),a}()},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=n(9),l=n(8),a=n(2);e.exports=function(){function r(e,t,n,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t,o));return a.blockType=n,a.ifCodeCallback=i,a.queue=new l(e),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a),o(r,[{key:"tick",value:function(){this.state===i.WORKING&&this.queue.tick(),this.queue.isFailed()&&(this.state=i.FAILURE),this.queue.isSucceeded()&&(this.state=i.SUCCESS)}},{key:"begin",value:function(){(function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,o)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(o):void 0})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"begin",this).call(this),this.GameController.DEBUG&&console.log("WHILE command: BEGIN"),this.handleIfCheck()}},{key:"handleIfCheck",value:function(){if(this.GameController.isPathAhead(this.blockType)){var e=this.GameController.getEntity(this.target).queue;this.queue.reset(),e.setWhileCommandInsertState(this.queue),this.ifCodeCallback(),e.setWhileCommandInsertState(null),this.queue.begin()}else this.state=i.SUCCESS}}]),r}()},function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=n(2);e.exports=function(){function r(e,t,n,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t,i));return a.actionCallback=n,a.iteration=o,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i),o(r,[{key:"tick",value:function(){}},{key:"begin",value:function(){(function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,o)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(o):void 0})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"begin",this).call(this),this.succeeded(),this.addRepeatCommand()}},{key:"addRepeatCommand",value:function(){var e=this.GameController.levelEntity.entityMap.get(this.target);void 0===e?this.GameController.queue.addRepeatCommands(this.actionCallback,this.iteration):e.queue.addRepeatCommands(this.actionCallback,this.iteration)}}]),r}()}])},2522:function(e,t,n){"use strict";e.exports=window.blockly.craft_locale},2541:function(e,t,n){"use strict";e.exports=window.blockly.craft_locale},2592:function(e,t,n){"use strict";e.exports=window.blockly.craft_locale},2632:function(e,t,n){"use strict";e.exports=window.blockly.craft_locale},2690:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.install=t.ENTITY_TARGET_ACTION_BLOCKS=t.ENTITY_ACTION_BLOCKS=void 0;var o,f=n(240),g=n(11),i=n(16),m=(o=i)&&o.__esModule?o:{default:o},v=n(2521);var _=n(2592),y={.4:_.timeVeryShort(),"1.0":_.timeShort(),"2.0":_.timeMedium(),"4.0":_.timeLong(),"8.0":_.timeVeryLong(),random:_.timeRandom()},a={bedrock:_.blockTypeBedrock(),bricks:_.blockTypeBricks(),clay:_.blockTypeClay(),oreCoal:_.blockTypeOreCoal(),dirtCoarse:_.blockTypeDirtCoarse(),cobblestone:_.blockTypeCobblestone(),oreDiamond:_.blockTypeOreDiamond(),dirt:_.blockTypeDirt(),oreEmerald:_.blockTypeOreEmerald(),farmlandWet:_.blockTypeFarmlandWet(),glass:_.blockTypeGlass(),oreGold:_.blockTypeOreGold(),grass:_.blockTypeGrass(),gravel:_.blockTypeGravel(),ice:_.blockTypeIce(),snow:_.blockTypeSnow(),netherrack:_.blockTypeNetherrack(),netherBrick:_.blockTypeNetherBrick(),clayHardened:_.blockTypeClayHardened(),oreIron:_.blockTypeOreIron(),oreLapis:_.blockTypeOreLapis(),lava:_.blockTypeLava(),logAcacia:_.blockTypeLogAcacia(),logBirch:_.blockTypeLogBirch(),logJungle:_.blockTypeLogJungle(),logOak:_.blockTypeLogOak(),logSpruce:_.blockTypeLogSpruce(),planksAcacia:_.blockTypePlanksAcacia(),planksBirch:_.blockTypePlanksBirch(),planksJungle:_.blockTypePlanksJungle(),planksOak:_.blockTypePlanksOak(),planksSpruce:_.blockTypePlanksSpruce(),oreRedstone:_.blockTypeOreRedstone(),rails:_.blockTypeRail(),sand:_.blockTypeSand(),sandstone:_.blockTypeSandstone(),stone:_.blockTypeStone(),tnt:_.blockTypeTnt(),tree:_.blockTypeTree(),water:_.blockTypeWater(),wool:_.blockTypeWool(),"":_.blockTypeEmpty()},r={dirt:_.miniBlockDirt(),dirtCoarse:_.miniBlockDirtCoarse(),sand:_.miniBlockSand(),gravel:_.miniBlockGravel(),bricks:_.miniBlockBricks(),logAcacia:_.miniBlockLogAcacia(),logBirch:_.miniBlockLogBirch(),logJungle:_.miniBlockLogJungle(),logOak:_.miniBlockLogOak(),logSpruce:_.miniBlockLogSpruce(),planksAcacia:_.miniBlockPlanksAcacia(),planksBirch:_.miniBlockPlanksBirch(),planksJungle:_.miniBlockPlanksJungle(),planksOak:_.miniBlockPlanksOak(),planksSpruce:_.miniBlockPlanksSpruce(),cobblestone:_.miniBlockCobblestone(),sandstone:_.miniBlockSandstone(),wool:_.miniBlockWool(),redstoneDust:_.miniBlockRedstoneDust(),lapisLazuli:_.miniBlockLapisLazuli(),ingotIron:_.miniBlockIngotIron(),ingotGold:_.miniBlockIngotGold(),emerald:_.miniBlockEmerald(),diamond:_.miniBlockDiamond(),coal:_.miniBlockCoal(),bucketWater:_.miniBlockBucketWater(),bucketLava:_.miniBlockBucketLava(),gunPowder:_.miniBlockGunPowder(),wheat:_.miniBlockWheat(),potato:_.miniBlockPotato(),carrots:_.miniBlockCarrots(),milk:_.miniBlockMilk(),egg:_.miniBlockEgg(),poppy:_.miniBlockPoppy()},k=Object.keys(r).sort(),b={dig_wood1:_.soundTypeDig_wood1(),stepGrass:_.soundTypeStepGrass(),stepWood:_.soundTypeStepWood(),stepStone:_.soundTypeStepStone(),stepGravel:_.soundTypeStepGravel(),stepFarmland:_.soundTypeStepFarmland(),failure:_.soundTypeFailure(),success:_.soundTypeSuccess(),fall:_.soundTypeFall(),fuse:_.soundTypeFuse(),explode:_.soundTypeExplode(),placeBlock:_.soundTypePlaceBlock(),collectedBlock:_.soundTypeCollectedBlock(),bump:_.soundTypeBump(),punch:_.soundTypePunch(),fizz:_.soundTypeFizz(),doorOpen:_.soundTypeDoorOpen(),minecart:_.soundTypeMinecart(),sheepBaa:_.soundTypeSheepBaa(),chickenHurt:_.soundTypeChickenHurt(),chickenBawk:_.soundTypeChickenBawk(),cowHuff:_.soundTypeCowHuff(),cowHurt:_.soundTypeCowHurt(),cowMoo:_.soundTypeCowMoo(),cowMooLong:_.soundTypeCowMooLong(),creeperHiss:_.soundTypeCreeperHiss(),ironGolemHit:_.soundTypeIronGolemHit(),metalWhack:_.soundTypeMetalWhack(),zombieBrains:_.soundTypeZombieBrains(),zombieGroan:_.soundTypeZombieGroan(),zombieHurt:_.soundTypeZombieHurt()},w=Object.keys(b),l={Player:_.entityTypePlayer(),sheep:_.entityTypeSheep(),zombie:_.entityTypeZombie(),ironGolem:_.entityTypeIronGolem(),creeper:_.entityTypeCreeper(),cow:_.entityTypeCow(),chicken:_.entityTypeChicken()},S=Object.keys(l),C=["sheep","zombie","ironGolem","creeper","cow","chicken"],s={up:_.directionUp(),middle:_.directionMiddle(),down:_.directionDown(),left:_.directionLeft(),right:_.directionRight()};function T(e){return e.map(function(e){return[a[e]||y[e]||s[e]||l[e]||r[e]||e,e]})}var P={destroyEntity:_.blockActionDestroyEntity(),attack:_.blockActionAttack(),flashEntity:_.blockActionFlashEntity(),moveForward:_.blockActionMoveForward(),moveRandom:_.blockActionMoveRandom(),explodeEntity:_.blockActionExplodeEntity()},A={moveToward:_.blockActionMoveToward(),moveTo:_.blockActionMoveTo(),moveAway:_.blockActionMoveAway()},E=(t.ENTITY_ACTION_BLOCKS=Object.keys(P),t.ENTITY_TARGET_ACTION_BLOCKS=Object.keys(A));t.install=function(r,e){var n={playSoundOptions:e.level.playSoundOptions,dropDropdownOptions:e.level.dropDropdownOptions};r.Blocks.craft_turn={helpUrl:"http://code.google.com/p/blockly/wiki/Turn",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new r.FieldDropdown(this.DIRECTIONS),"DIR"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},r.Blocks.craft_turn.DIRECTIONS=[[_.blockTurnLeft()+" ↺","left"],[_.blockTurnRight()+" ↻","right"]],r.Generator.get("JavaScript").craft_entityTurn=function(){return{left:"turnLeft",right:"turnRight",random:"turnRandom"}[this.getTitleValue("DIR")]+"(event.targetIdentifier, 'block_id_"+this.id+"');\n"},r.Blocks.craft_entityTurn={helpUrl:"http://code.google.com/p/blockly/wiki/Turn",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new r.FieldDropdown(r.Blocks.craft_entityTurn.ENTITY_DIRECTIONS),"DIR"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},r.Blocks.craft_entityTurn.ENTITY_DIRECTIONS=[[_.blockTurnLeft()+" ↺","left"],[_.blockTurnRight()+" ↻","right"],[_.turnRandom(),"random"]],r.Generator.get("JavaScript").craft_entityTurnLR=function(){return{left:"turnLeft",right:"turnRight",random:"turnRandom"}[this.getTitleValue("DIR")]+"(event.targetIdentifier, 'block_id_"+this.id+"');\n"},r.Blocks.craft_entityTurnLR={helpUrl:"http://code.google.com/p/blockly/wiki/Turn",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new r.FieldDropdown(r.Blocks.craft_entityTurnLR.ENTITY_DIRECTIONS),"DIR"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},r.Blocks.craft_entityTurnLR.ENTITY_DIRECTIONS=[[_.blockTurnLeft()+" ↺","left"],[_.blockTurnRight()+" ↻","right"]],r.Blocks.craft_turn.DIRECTIONS=[[_.blockTurnLeft()+" ↺","left"],[_.blockTurnRight()+" ↻","right"]],r.Generator.get("JavaScript").craft_turn=function(){return("left"===this.getTitleValue("DIR")?"turnLeft":"turnRight")+"('block_id_"+this.id+"');\n"};var i={WHEN_USED:v.EventType.WhenUsed,WHEN_TOUCHED:v.EventType.WhenTouched,WHEN_SPAWNED:v.EventType.WhenSpawned,WHEN_ATTACKED:v.EventType.WhenAttacked,WHEN_NIGHT:v.EventType.WhenNight,WHEN_DAY:v.EventType.WhenDay},a=["WHEN_SPAWNED","WHEN_TOUCHED","WHEN_USED","WHEN_ATTACKED","WHEN_DAY","WHEN_NIGHT"],o={WHEN_USED:_.eventTypeWhenUsed(),WHEN_TOUCHED:_.eventTypeWhenTouched(),WHEN_SPAWNED:_.eventTypeWhenSpawned(),WHEN_ATTACKED:_.eventTypeWhenAttacked(),WHEN_NIGHT:_.eventTypeWhenNight(),WHEN_DAY:_.eventTypeWhenDay()};function l(e,t){var n=1<arguments.length&&void 0!==t?t:a;return{init:function(){var t=this;this.appendDummyInput().appendTitle(e),n.forEach(function(e){t.appendStatementInput(e,14).appendTitle(o[e])}),this.setColour(120),this.setTooltip("")}}}function s(o,e){var t=1<arguments.length&&void 0!==e?e:a;return function(){var n=this;return t.map(function(e){var t=r.Generator.get("JavaScript").statementToCode(n,e).replace(/\n/g,"");return'onEventTriggered("'+o+'", '+i[e]+', "'+t+"\", 'block_id_"+n.id+"');"}).join("\n")}}function t(e,t){r.Blocks["craft_"+e]=l(t),r.Generator.get("JavaScript")["craft_"+e]=s(e)}function c(e,t,n,o){r.Blocks["craft_"+t]=l(n,o),r.Generator.get("JavaScript")["craft_"+t]=s(e,o)}function u(e,t,n){r.Blocks["craft_"+e]={helpUrl:"",init:function(){this.setHSV(140,1,.74),this.appendDummyInput().appendTitle(t),this.appendStatementInput("DO"),this.setPreviousStatement(!1),this.setNextStatement(!1)}},r.Generator.get("JavaScript")["craft_"+e]=function(){var e=r.Generator.get("JavaScript").statementToCode(this,"DO").replace(/\n/g,"");return"onGlobalEventTriggered("+n+', "'+e+"\", 'block_id_"+this.id+"');"}}function p(t,n,o,i){r.Blocks["craft_"+t]={helpUrl:"",init:function(){var e=T(o),t=new r.FieldDropdown(e);t.setValue(e[0][1]),i&&(e=m.default.sortBy(e,0)),this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new r.FieldLabel(n)).appendTitle(t,"TYPE"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},r.Generator.get("JavaScript")["craft_"+t]=function(){var e=this.getTitleValue("TYPE");return t+"('"+e+"', event.targetIdentifier, 'block_id_"+this.id+"');\n"}}function d(t,n,e,o){var i=2<arguments.length&&void 0!==e?e:S,a=3<arguments.length&&void 0!==o?o:t;r.Blocks["craft_"+a]={helpUrl:"",init:function(){var e=T(i),t=new r.FieldDropdown(e);t.setValue(e[0][1]),this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new r.FieldLabel(n)).appendTitle(t,"TYPE"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},r.Generator.get("JavaScript")["craft_"+a]=function(){var e=this.getTitleValue("TYPE");return t+"(event.targetIdentifier, '"+e+"', 'block_id_"+this.id+"');\n"}}function h(e){var t=(0,g.stripQuotes)(e).trim();(0,f.singleton)().playAudio(t)}t("cow",_.entityTypeCow()),t("sheep",_.entityTypeSheep()),t("zombie",_.entityTypeZombie()),t("ironGolem",_.entityTypeIronGolem()),t("creeper",_.entityTypeCreeper()),t("chicken",_.entityTypeChicken()),c("sheep","sheepClicked",_.entityTypeSheep(),["WHEN_USED"]),c("chicken","chickenSpawnedClicked",_.entityTypeChicken(),["WHEN_SPAWNED","WHEN_USED"]),c("sheep","sheepSpawnedTouchedClicked",_.entityTypeSheep(),["WHEN_SPAWNED","WHEN_TOUCHED","WHEN_USED"]),c("cow","cowSpawnedTouchedClicked",_.entityTypeCow(),["WHEN_SPAWNED","WHEN_TOUCHED","WHEN_USED"]),c("zombie","zombieSpawnedTouchedClickedDay",_.entityTypeZombie(),["WHEN_SPAWNED","WHEN_TOUCHED","WHEN_USED","WHEN_DAY"]),c("creeper","creeperSpawnedTouchedClickedDay",_.entityTypeCreeper(),["WHEN_SPAWNED","WHEN_TOUCHED","WHEN_USED","WHEN_DAY"]),c("chicken","chickenSpawned",_.entityTypeChicken(),["WHEN_SPAWNED"]),c("sheep","sheepSpawnedClicked",_.entityTypeSheep(),["WHEN_SPAWNED","WHEN_USED"]),c("creeper","creeperSpawnedTouchedClicked",_.entityTypeCreeper(),["WHEN_SPAWNED","WHEN_TOUCHED","WHEN_USED"]),c("zombie","zombieNoDayNight",_.entityTypeZombie(),["WHEN_SPAWNED","WHEN_TOUCHED","WHEN_USED","WHEN_ATTACKED"]),c("ironGolem","ironGolemNoDayNight",_.entityTypeIronGolem(),["WHEN_SPAWNED","WHEN_TOUCHED","WHEN_USED","WHEN_ATTACKED"]),u("whenDay",_.eventTypeWhenDay(),v.EventType.WhenDayGlobal),u("whenNight",_.eventTypeWhenNight(),v.EventType.WhenNightGlobal),u("whenRun",_.eventTypeWhenRun(),v.EventType.WhenRun),Object.keys(P).forEach(function(e){!function(e,t){r.Blocks["craft_"+e]={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new r.FieldLabel(t)),this.setPreviousStatement(!0),this.setNextStatement(!0)}},r.Generator.get("JavaScript")["craft_"+e]=function(){return e+"(event.targetIdentifier, 'block_id_"+this.id+"');\n"}}(e,P[e])}),E.forEach(function(e){d(e,A[e])}),d("moveToward",A.moveToward,["Player","sheep","chicken"],"moveTowardSheepPlayerChicken"),p("wait",_.blockActionWait(),Object.keys(y).sort()),p("drop",_.blockActionDrop(),n.dropDropdownOptions||k,!0),p("moveDirection",_.blockActionMove(),["up","down","left","right"]),r.Blocks.craft_forever={helpUrl:"",init:function(){this.setHSV(322,.9,.95),this.appendDummyInput().appendTitle(_.forever()),this.appendStatementInput("DO").appendTitle(_.blockWhileXAheadDo()),this.setPreviousStatement(!0)}},r.Generator.get("JavaScript").craft_forever=function(){var e=r.Generator.get("JavaScript").statementToCode(this,"DO");return"repeat('block_id_"+this.id+"', function(event) { "+e+" }, -1, event.targetIdentifier);"},r.Blocks.craft_repeatTimes={helpUrl:"",init:function(){this.setHSV(322,.9,.95),this.appendDummyInput().appendTitle(_.blockActionRepeat()).appendTitle(new r.FieldTextInput("5",r.FieldTextInput.nonnegativeIntegerValidator),"TIMES"),this.appendStatementInput("DO").appendTitle(_.blockWhileXAheadDo()),this.setPreviousStatement(!0),this.setNextStatement(!0)}},r.Generator.get("JavaScript").craft_repeatTimes=function(){var e=this.getTitleValue("TIMES"),t=r.Generator.get("JavaScript").statementToCode(this,"DO");return"repeat('block_id_"+this.id+"', function(event) { "+t+" }, "+e+", event.targetIdentifier);"},r.Blocks.craft_repeatRandom={helpUrl:"",init:function(){this.setHSV(322,.9,.95),this.appendDummyInput().appendTitle(_.blockActionRepeatRandom()),this.appendStatementInput("DO").appendTitle(_.blockWhileXAheadDo()),this.setPreviousStatement(!0),this.setNextStatement(!0)}},r.Generator.get("JavaScript").craft_repeatRandom=function(){var e=r.Generator.get("JavaScript").statementToCode(this,"DO");return"repeatRandom('block_id_"+this.id+"', function(event) { "+e+" }, event.targetIdentifier);"},r.Blocks.craft_repeatDropdown={helpUrl:"",init:function(){var e=[2,3,4,5,6,7,8,9,10].map(function(e){return[e.toString(),e.toString()]}),t=new r.FieldDropdown(e);t.setValue(e[0][1]),this.setHSV(322,.9,.95),this.appendDummyInput().appendTitle(_.blockActionRepeat()).appendTitle(t,"TIMES"),this.appendStatementInput("DO").appendTitle(_.blockWhileXAheadDo()),this.setPreviousStatement(!0),this.setNextStatement(!0)}},r.Generator.get("JavaScript").craft_repeatDropdown=function(){var e=this.getTitleValue("TIMES"),t=r.Generator.get("JavaScript").statementToCode(this,"DO");return"repeat('block_id_"+this.id+"', function(event) { "+t+" }, "+e+", event.targetIdentifier);"},r.Blocks.craft_spawnEntity={helpUrl:"",init:function(){var e=T(["up","middle","down","left","right"]),t=T(C),n=new r.FieldDropdown(t);n.setValue(t[0][1]);var o=new r.FieldDropdown(e);o.setValue(e[0][1]),this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new r.FieldLabel(_.blockActionSpawn())).appendTitle(n,"TYPE").appendTitle(new r.FieldLabel(" ")).appendTitle(o,"DIRECTION"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},r.Generator.get("JavaScript").craft_spawnEntity=function(){return"spawnEntity('"+this.getTitleValue("TYPE")+"', '"+this.getTitleValue("DIRECTION")+"', 'block_id_"+this.id+"');\n"},r.Blocks.craft_spawnEntityRandom={helpUrl:"",init:function(){var e=T(C),t=new r.FieldDropdown(e);t.setValue(e[0][1]),this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new r.FieldLabel("spawn")).appendTitle(t,"TYPE"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},r.Generator.get("JavaScript").craft_spawnEntityRandom=function(){return"spawnEntityRandom('"+this.getTitleValue("TYPE")+"', 'block_id_"+this.id+"');\n"},r.Blocks.craft_moveEntityNorth={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new r.FieldLabel("move north")),this.setPreviousStatement(!0),this.setNextStatement(!0)}},r.Generator.get("JavaScript").craft_moveEntityNorth=function(){return"moveEntityNorth(block, 'block_id_"+this.id+"');\n"},r.Blocks.craft_moveEntitySouth={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new r.FieldLabel("move south")),this.setPreviousStatement(!0),this.setNextStatement(!0)}},r.Generator.get("JavaScript").craft_moveEntitySouth=function(){return"moveEntitySouth(block, 'block_id_"+this.id+"');\n"},r.Blocks.craft_moveEntityEast={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new r.FieldLabel("move east")),this.setPreviousStatement(!0),this.setNextStatement(!0)}},r.Generator.get("JavaScript").craft_moveEntityEast=function(){return"moveEntityEast(block, 'block_id_"+this.id+"');\n"},r.Blocks.craft_moveEntityWest={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new r.FieldLabel("move west")),this.setPreviousStatement(!0),this.setNextStatement(!0)}},r.Generator.get("JavaScript").craft_moveEntityWest=function(){return"moveEntityWest(block, 'block_id_"+this.id+"');\n"},r.Blocks.craft_playSound={helpUrl:"",init:function(){var e=(n.playSoundOptions||w).map(function(e){return[b[e]||e,e]});e=m.default.sortBy(e,0);var t=new r.FieldDropdown(e,h);t.setValue(e[0][1]),this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(_.blockActionPlaySound()).appendTitle(t,"TYPE"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},r.Generator.get("JavaScript").craft_playSound=function(){return"playSound('"+this.getTitleValue("TYPE")+"', event.targetIdentifier, 'block_id_"+this.id+"');\n"},r.Blocks.craft_addScore={helpUrl:"",init:function(){var e=T(m.default.range(1,11).map(function(e){return e.toString()})),t=new r.FieldDropdown(e);t.setValue(e[0][1]),this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(_.blockActionAdd()).appendTitle(t,"SCORE").appendTitle(_.blockActionToScore()),this.setPreviousStatement(!0),this.setNextStatement(!0)}},r.Generator.get("JavaScript").craft_addScore=function(){return"addScore('"+this.getTitleValue("SCORE")+"', 'block_id_"+this.id+"');\n"}}},2691:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="/blockly/media/craft/Icons/";t.default=Object.freeze({decorations:[[o+"decorations/beacon.png","beacon"],[o+"decorations/cobblestone_wall.png","cobblestone_wall"],[o+"decorations/mossy_cobblestone_wall.png","cobblestone_wall,1"],[o+"decorations/waterlily.png","waterlily"],[o+"decorations/sealantern.png","sealantern"],[o+"decorations/chorus_plant.png","chorus_plant"],[o+"decorations/chorus_flower.png","chorus_flower"],[o+"decorations/gold_block.png","gold_block"],[o+"decorations/iron_block.png","iron_block"],[o+"decorations/diamond_block.png","diamond_block"],[o+"decorations/lapis_block.png","lapis_block"],[o+"decorations/coal_block.png","coal_block"],[o+"decorations/emerald_block.png","emerald_block"],[o+"decorations/redstone_block.png","redstone_block"],[o+"decorations/snow_layer.png","snow_layer"],[o+"decorations/glass.png","glass"],[o+"decorations/glowstone.png","glowstone"],[o+"decorations/vine.png","vine"],[o+"decorations/ladder.png","ladder"],[o+"decorations/sponge.png","sponge"],[o+"decorations/wet_sponge.png","sponge,1"],[o+"decorations/glass_pane.png","glass_pane"],[o+"decorations/door_wood.png","wooden_door"],[o+"decorations/door_spruce.png","spruce_door"],[o+"decorations/door_birch.png","birch_door"],[o+"decorations/door_jungle.png","jungle_door"],[o+"decorations/door_acacia.png","acacia_door"],[o+"decorations/door_dark_oak.png","dark_oak_door"],[o+"decorations/door_iron.png","iron_door"],[o+"decorations/trapdoor.png","trapdoor"],[o+"decorations/fence_wood.png","fence"],[o+"decorations/fence_spruce.png","fence,1"],[o+"decorations/fence_birch.png","fence,2"],[o+"decorations/fence_jungle.png","fence,3"],[o+"decorations/fence_acacia.png","fence,4"],[o+"decorations/fence_dark_oak.png","fence,5"],[o+"decorations/nether_brick_fence.png","nether_brick_fence"],[o+"decorations/fence_gate.png","fence_gate"],[o+"decorations/spruce_fence_gate.png","spruce_fence_gate"],[o+"decorations/birch_fence_gate.png","birch_fence_gate"],[o+"decorations/jungle_fence_gate.png","jungle_fence_gate"],[o+"decorations/acacia_fence_gate.png","acacia_fence_gate"],[o+"decorations/dark_oak_fence_gate.png","dark_oak_fence_gate"],[o+"decorations/iron_bars.png","iron_bars"],[o+"decorations/bed_white.png","bed"],[o+"decorations/bed_silver.png","bed,8"],[o+"decorations/bed_gray.png","bed,7"],[o+"decorations/bed_black.png","bed,15"],[o+"decorations/bed_brown.png","bed,12"],[o+"decorations/bed_red.png","bed,14"],[o+"decorations/bed_orange.png","bed,1"],[o+"decorations/bed_yellow.png","bed,4"],[o+"decorations/bed_lime.png","bed,5"],[o+"decorations/bed_green.png","bed,13"],[o+"decorations/bed_cyan.png","bed,9"],[o+"decorations/bed_light_blue.png","bed,3"],[o+"decorations/bed_blue.png","bed,11"],[o+"decorations/bed_purple.png","bed,10"],[o+"decorations/bed_magenta.png","bed,2"],[o+"decorations/bed_pink.png","bed,6"],[o+"decorations/bookshelf.png","bookshelf"],[o+"decorations/sign.png","sign"],[o+"decorations/painting.png","painting"],[o+"decorations/item_frame.png","frame"],[o+"decorations/crafting_table.png","crafting_table"],[o+"decorations/stonecutter.png","stonecutter"],[o+"decorations/chest.png","chest"],[o+"decorations/trapped_chest.png","trapped_chest"],[o+"decorations/brewing_stand.png","brewing_stand"],[o+"decorations/cauldron.png","cauldron"],[o+"decorations/noteblock.png","noteblock"],[o+"decorations/end_rod.png","end_rod"],[o+"decorations/end_portal_frame.png","end_portal_frame"],[o+"decorations/shulker_box_white.png","shulker_box"],[o+"decorations/shulker_box_silver.png","shulker_box,8"],[o+"decorations/shulker_box_gray.png","shulker_box,7"],[o+"decorations/shulker_box_black.png","shulker_box,15"],[o+"decorations/shulker_box_brown.png","shulker_box,12"],[o+"decorations/shulker_box_red.png","shulker_box,14"],[o+"decorations/shulker_box_orange.png","shulker_box,1"],[o+"decorations/shulker_box_yellow.png","shulker_box,4"],[o+"decorations/shulker_box_lime.png","shulker_box,5"],[o+"decorations/shulker_box_green.png","shulker_box,13"],[o+"decorations/shulker_box_cyan.png","shulker_box,9"],[o+"decorations/shulker_box_light_blue.png","shulker_box,3"],[o+"decorations/shulker_box_blue.png","shulker_box,11"],[o+"decorations/shulker_box_purple.png","shulker_box,10"],[o+"decorations/shulker_box_magenta.png","shulker_box,2"],[o+"decorations/shulker_box_pink.png","shulker_box,6"],[o+"decorations/anvil.png","anvil"],[o+"decorations/slightly_damaged_anvil.png","anvil,1"],[o+"decorations/very_damaged_anvil.png","anvil,2"],[o+"decorations/flower_dandelion.png","yellow_flower"],[o+"decorations/flower_rose.png","red_flower"],[o+"decorations/flower_blue_orchid.png","red_flower,1"],[o+"decorations/flower_paeonia.png","red_flower,2"],[o+"decorations/flower_houstonia.png","red_flower,3"],[o+"decorations/flower_tulip_red.png","red_flower,4"],[o+"decorations/flower_tulip_orange.png","red_flower,5"],[o+"decorations/flower_tulip_white.png","red_flower,6"],[o+"decorations/flower_tulip_pink.png","red_flower,7"],[o+"decorations/flower_oxeye_daisy.png","red_flower,8"],[o+"decorations/double_plant_sunflower.png","double_plant"],[o+"decorations/double_plant_syringa.png","double_plant,1"],[o+"decorations/double_plant_grass.png","double_plant,2"],[o+"decorations/double_plant_fern.png","double_plant,3"],[o+"decorations/double_plant_rose.png","double_plant,4"],[o+"decorations/double_plant_paeonia.png","double_plant,5"],[o+"decorations/mushroom_brown.png","brown_mushroom"],[o+"decorations/mushroom_red.png","red_mushroom"],[o+"decorations/brown_mushroom_block.png","brown_mushroom_block,14"],[o+"decorations/red_mushroom_block.png","red_mushroom_block,14"],[o+"decorations/brown_mushroom_block2.png","brown_mushroom_block"],[o+"decorations/brown_mushroom_block3.png","brown_mushroom_block,15"],[o+"decorations/cactus.png","cactus"],[o+"decorations/melon_block.png","melon_block"],[o+"decorations/pumpkin.png","pumpkin"],[o+"decorations/lit_pumpkin.png","lit_pumpkin"],[o+"decorations/web.png","web"],[o+"decorations/hay_block.png","hay_block"],[o+"decorations/tallgrass_grass.png","tallgrass,1"],[o+"decorations/tallgrass_fern.png","tallgrass"],[o+"decorations/deadbush.png","deadbush"],[o+"decorations/sapling_oak.png","sapling"],[o+"decorations/sapling_spruce.png","sapling,1"],[o+"decorations/sapling_birch.png","sapling,2"],[o+"decorations/sapling_jungle.png","sapling,3"],[o+"decorations/sapling_acacia.png","sapling,4"],[o+"decorations/sapling_dark_oak.png","sapling,5"],[o+"decorations/leaves_oak.png","leaves"],[o+"decorations/leaves_spruce.png","leaves,1"],[o+"decorations/leaves_birch.png","leaves,2"],[o+"decorations/leaves_jungle.png","leaves,3"],[o+"decorations/leaves_acacia.png","leaves2,0"],[o+"decorations/leaves_dark_oak.png","leaves2,1"],[o+"decorations/white_glazed_terracotta.png","white_glazed_terracotta"],[o+"decorations/silver_glazed_terracotta.png","silver_glazed_terracotta"],[o+"decorations/gray_glazed_terracotta.png","gray_glazed_terracotta"],[o+"decorations/black_glazed_terracotta.png","black_glazed_terracotta"],[o+"decorations/brown_glazed_terracotta.png","brown_glazed_terracotta"],[o+"decorations/red_glazed_terracotta.png","red_glazed_terracotta"],[o+"decorations/orange_glazed_terracotta.png","orange_glazed_terracotta"],[o+"decorations/yellow_glazed_terracotta.png","yellow_glazed_terracotta"],[o+"decorations/lime_glazed_terracotta.png","lime_glazed_terracotta"],[o+"decorations/green_glazed_terracotta.png","green_glazed_terracotta"],[o+"decorations/cyan_glazed_terracotta.png","cyan_glazed_terracotta"],[o+"decorations/light_blue_glazed_terracotta.png","light_blue_glazed_terracotta"],[o+"decorations/blue_glazed_terracotta.png","blue_glazed_terracotta"],[o+"decorations/purple_glazed_terracotta.png","purple_glazed_terracotta"],[o+"decorations/magenta_glazed_terracotta.png","magenta_glazed_terracotta"],[o+"decorations/pink_glazed_terracotta.png","pink_glazed_terracotta"],[o+"decorations/cake.png","cake"],[o+"decorations/skull_skeleton.png","skull"],[o+"decorations/skull_wither.png","skull,1"],[o+"decorations/skull_zombie.png","skull,2"],[o+"decorations/skull_steve.png","skull,3"],[o+"decorations/skull_creeper.png","skull,4"],[o+"decorations/skull_dragon.png","skull,5"],[o+"decorations/flower_pot.png","flower_pot"],[o+"decorations/stone.png","monster_egg"],[o+"decorations/cobblestone.png","monster_egg,1"],[o+"decorations/stonebrick.png","monster_egg,2"],[o+"decorations/mossystonebrick.png","monster_egg,3"],[o+"decorations/crackedstonebrick.png","monster_egg,4"],[o+"decorations/chiseledstonebrick.png","monster_egg,5"],[o+"decorations/dragon_egg.png","dragon_egg"],[o+"decorations/end_crystal.png","end_crystal"],[o+"decorations/mob_spawner.png","mob_spawner"],[o+"decorations/enchanting_table.png","enchanting_table"],[o+"decorations/slime.png","slime"],[o+"decorations/ender_chest.png","ender_chest"],[o+"decorations/chalkboard_small.png","board"],[o+"decorations/chalkboard_medium.png","board,1"],[o+"decorations/chalkboard_large.png","board,2"],[o+"decorations/wool_white.png","wool"],[o+"decorations/wool_silver.png","wool,8"],[o+"decorations/wool_gray.png","wool,7"],[o+"decorations/wool_black.png","wool,15"],[o+"decorations/wool_brown.png","wool,12"],[o+"decorations/wool_red.png","wool,14"],[o+"decorations/wool_orange.png","wool,1"],[o+"decorations/wool_yellow.png","wool,4"],[o+"decorations/wool_lime.png","wool,5"],[o+"decorations/wool_green.png","wool,13"],[o+"decorations/wool_cyan.png","wool,9"],[o+"decorations/wool_light_blue.png","wool,3"],[o+"decorations/wool_blue.png","wool,11"],[o+"decorations/wool_purple.png","wool,10"],[o+"decorations/wool_magenta.png","wool,2"],[o+"decorations/wool_pink.png","wool,6"],[o+"decorations/carpet_white.png","carpet"],[o+"decorations/carpet_silver.png","carpet,8"],[o+"decorations/carpet_gray.png","carpet,7"],[o+"decorations/carpet_black.png","carpet,15"],[o+"decorations/carpet_brown.png","carpet,12"],[o+"decorations/carpet_red.png","carpet,14"],[o+"decorations/carpet_orange.png","carpet,1"],[o+"decorations/carpet_yellow.png","carpet,4"],[o+"decorations/carpet_lime.png","carpet,5"],[o+"decorations/carpet_green.png","carpet,13"],[o+"decorations/carpet_cyan.png","carpet,9"],[o+"decorations/carpet_light_blue.png","carpet,3"],[o+"decorations/carpet_blue.png","carpet,11"],[o+"decorations/carpet_purple.png","carpet,10"],[o+"decorations/carpet_magenta.png","carpet,2"],[o+"decorations/carpet_pink.png","carpet,6"],[o+"decorations/concretepowder_white.png","concretepowder"],[o+"decorations/concretepowder_silver.png","concretepowder,8"],[o+"decorations/concretepowder_gray.png","concretepowder,7"],[o+"decorations/concretepowder_black.png","concretepowder,15"],[o+"decorations/concretepowder_brown.png","concretepowder,12"],[o+"decorations/concretepowder_red.png","concretepowder,14"],[o+"decorations/concretepowder_orange.png","concretepowder,1"],[o+"decorations/concretepowder_yellow.png","concretepowder,4"],[o+"decorations/concretepowder_lime.png","concretepowder,5"],[o+"decorations/concretepowder_green.png","concretepowder,13"],[o+"decorations/concretepowder_cyan.png","concretepowder,9"],[o+"decorations/concretepowder_light_blue.png","concretepowder,3"],[o+"decorations/concretepowder_blue.png","concretepowder,11"],[o+"decorations/concretepowder_purple.png","concretepowder,10"],[o+"decorations/concretepowder_magenta.png","concretepowder,2"],[o+"decorations/concretepowder_pink.png","concretepowder,6"],[o+"decorations/concrete_white.png","concrete"],[o+"decorations/concrete_silver.png","concrete,8"],[o+"decorations/concrete_gray.png","concrete,7"],[o+"decorations/concrete_black.png","concrete,15"],[o+"decorations/concrete_brown.png","concrete,12"],[o+"decorations/concrete_red.png","concrete,14"],[o+"decorations/concrete_orange.png","concrete,1"],[o+"decorations/concrete_yellow.png","concrete,4"],[o+"decorations/concrete_lime.png","concrete,5"],[o+"decorations/concrete_green.png","concrete,13"],[o+"decorations/concrete_cyan.png","concrete,9"],[o+"decorations/concrete_light_blue.png","concrete,3"],[o+"decorations/concrete_blue.png","concrete,11"],[o+"decorations/concrete_purple.png","concrete,10"],[o+"decorations/concrete_magenta.png","concrete,2"],[o+"decorations/concrete_pink.png","concrete,6"]],miscellaneous:[[o+"miscellaneous/coal.png","coal"],[o+"miscellaneous/charcoal.png","coal,1"],[o+"miscellaneous/diamond.png","diamond"],[o+"miscellaneous/iron_ingot.png","iron_ingot"],[o+"miscellaneous/gold_ingot.png","gold_ingot"],[o+"miscellaneous/emerald.png","emerald"],[o+"miscellaneous/stick.png","stick"],[o+"miscellaneous/bowl.png","bowl"],[o+"miscellaneous/string.png","string"],[o+"miscellaneous/feather.png","feather"],[o+"miscellaneous/flint.png","flint"],[o+"miscellaneous/leather.png","leather"],[o+"miscellaneous/rabbit_hide.png","rabbit_hide"],[o+"miscellaneous/clay_ball.png","clay_ball"],[o+"miscellaneous/sugar.png","sugar"],[o+"miscellaneous/brick.png","brick"],[o+"miscellaneous/netherbrick.png","netherbrick"],[o+"miscellaneous/quartz.png","quartz"],[o+"miscellaneous/paper.png","paper"],[o+"miscellaneous/book_normal.png","book"],[o+"miscellaneous/arrow.png","arrow"],[o+"miscellaneous/bone.png","bone"],[o+"miscellaneous/map_empty.png","emptymap"],[o+"miscellaneous/map_empty.png","emptymap,2"],[o+"miscellaneous/reeds.png","reeds"],[o+"miscellaneous/wheat.png","wheat"],[o+"miscellaneous/seeds_wheat.png","wheat_seeds"],[o+"miscellaneous/seeds_pumpkin.png","pumpkin_seeds"],[o+"miscellaneous/seeds_melon.png","melon_seeds"],[o+"miscellaneous/seeds_beetroot.png","beetroot_seeds"],[o+"miscellaneous/egg.png","egg"],[o+"miscellaneous/apple.png","apple"],[o+"miscellaneous/apple_golden.png","golden_apple"],[o+"miscellaneous/apple_enchanted.png","golden_apple,1"],[o+"miscellaneous/fish_raw.png","fish"],[o+"miscellaneous/fish_salmon_raw.png","salmon"],[o+"miscellaneous/fish_clownfish_raw.png","clownfish"],[o+"miscellaneous/fish_pufferfish_raw.png","pufferfish"],[o+"miscellaneous/fish_cooked.png","cooked_fish"],[o+"miscellaneous/fish_salmon_cooked.png","cooked_salmon"],[o+"miscellaneous/rotten_flesh.png","rotten_flesh"],[o+"miscellaneous/mushroom_stew.png","mushroom_stew"],[o+"miscellaneous/bread.png","bread"],[o+"miscellaneous/porkchop_raw.png","porkchop"],[o+"miscellaneous/porkchop_cooked.png","cooked_porkchop"],[o+"miscellaneous/chicken_raw.png","chicken"],[o+"miscellaneous/chicken_cooked.png","cooked_chicken"],[o+"miscellaneous/mutton_raw.png","muttonraw"],[o+"miscellaneous/mutton_cooked.png","muttoncooked"],[o+"miscellaneous/beef_raw.png","beef"],[o+"miscellaneous/beef_cooked.png","cooked_beef"],[o+"miscellaneous/melon.png","melon"],[o+"miscellaneous/carrot.png","carrot"],[o+"miscellaneous/potato.png","potato"],[o+"miscellaneous/potato_baked.png","baked_potato"],[o+"miscellaneous/potato_poisonous.png","poisonous_potato"],[o+"miscellaneous/beetroot.png","beetroot"],[o+"miscellaneous/beetroot_soup.png","beetroot_soup"],[o+"miscellaneous/cookie.png","cookie"],[o+"miscellaneous/pumpkin_pie.png","pumpkin_pie"],[o+"miscellaneous/rabbit_raw.png","rabbit"],[o+"miscellaneous/rabbit_cooked.png","cooked_rabbit"],[o+"miscellaneous/rabbit_stew.png","rabbit_stew"],[o+"miscellaneous/chorus_fruit.png","chorus_fruit"],[o+"miscellaneous/chorus_fruit_popped.png","chorus_fruit_popped"],[o+"miscellaneous/nether_star.png","netherstar"],[o+"miscellaneous/magma_cream.png","magma_cream"],[o+"miscellaneous/blaze_rod.png","blaze_rod"],[o+"miscellaneous/gold_nugget.png","gold_nugget"],[o+"miscellaneous/iron_nugget.png","iron_nugget"],[o+"miscellaneous/carrot_golden.png","golden_carrot"],[o+"miscellaneous/melon_speckled.png","speckled_melon"],[o+"miscellaneous/rabbit_foot.png","rabbit_foot"],[o+"miscellaneous/ghast_tear.png","ghast_tear"],[o+"miscellaneous/slimeball.png","slime_ball"],[o+"miscellaneous/blaze_powder.png","blaze_powder"],[o+"miscellaneous/nether_wart.png","nether_wart"],[o+"miscellaneous/gunpowder.png","gunpowder"],[o+"miscellaneous/glowstone_dust.png","glowstone_dust"],[o+"miscellaneous/spider_eye.png","spider_eye"],[o+"miscellaneous/spider_eye_fermented.png","fermented_spider_eye"],[o+"miscellaneous/dragons_breath.png","dragon_breath"],[o+"miscellaneous/carrot_on_a_stick.png","carrotonastick"],[o+"miscellaneous/experience_bottle.png","experience_bottle"],[o+"miscellaneous/shulker_shell.png","shulker_shell"],[o+"miscellaneous/prismarine_shard.png","prismarine_shard"],[o+"miscellaneous/prismarine_crystals.png","prismarine_crystals"],[o+"miscellaneous/dye_powder_black.png","dye"],[o+"miscellaneous/dye_powder_gray.png","dye,8"],[o+"miscellaneous/dye_powder_silver.png","dye,7"],[o+"miscellaneous/dye_powder_white.png","dye,15"],[o+"miscellaneous/dye_powder_light_blue.png","dye,12"],[o+"miscellaneous/dye_powder_orange.png","dye,14"],[o+"miscellaneous/dye_powder_red.png","dye,1"],[o+"miscellaneous/dye_powder_blue.png","dye,4"],[o+"miscellaneous/dye_powder_purple.png","dye,5"],[o+"miscellaneous/dye_powder_magenta.png","dye,13"],[o+"miscellaneous/dye_powder_pink.png","dye,9"],[o+"miscellaneous/dye_powder_brown.png","dye,3"],[o+"miscellaneous/dye_powder_yellow.png","dye,11"],[o+"miscellaneous/dye_powder_lime.png","dye,10"],[o+"miscellaneous/dye_powder_green.png","dye,2"],[o+"miscellaneous/dye_powder_cyan.png","dye,6"]],tools:[[o+"tools/rail_normal.png","rail"],[o+"tools/rail_golden.png","golden_rail"],[o+"tools/rail_detector.png","detector_rail"],[o+"tools/rail_activator.png","activator_rail"],[o+"tools/torch_on.png","torch"],[o+"tools/bucket_empty.png","bucket"],[o+"tools/bucket_milk.png","milk_bucket"],[o+"tools/bucket_water.png","water_bucket"],[o+"tools/bucket_lava.png","lava_bucket"],[o+"tools/tnt.png","tnt"],[o+"tools/lead.png","lead"],[o+"tools/name_tag.png","nametag"],[o+"tools/redstone_dust.png","redstone"],[o+"tools/bow_standby.png","bow"],[o+"tools/fishing_rod_uncast.png","fishing_rod"],[o+"tools/flint_and_steel.png","flint_and_steel"],[o+"tools/shears.png","shears"],[o+"tools/clock_item.png","clock"],[o+"tools/compass_item.png","compass"],[o+"tools/minecart_normal.png","minecart"],[o+"tools/minecart_chest.png","chest_minecart"],[o+"tools/minecart_hopper.png","hopper_minecart"],[o+"tools/minecart_tnt.png","tnt_minecart"],[o+"tools/boat.png","boat"],[o+"tools/boat_spruce.png","boat,1"],[o+"tools/boat_birch.png","boat,2"],[o+"tools/boat_jungle.png","boat,3"],[o+"tools/boat_acacia.png","boat,4"],[o+"tools/boat_darkoak.png","boat,5"],[o+"tools/saddle.png","saddle"],[o+"tools/leather_horse_armor.png","horsearmorleather"],[o+"tools/iron_horse_armor.png","horsearmoriron"],[o+"tools/gold_horse_armor.png","horsearmorgold"],[o+"tools/diamond_horse_armor.png","horsearmordiamond"],[o+"tools/flower_pot.png","flower_pot"],[o+"tools/egg_villager.png","spawn_egg,15"],[o+"tools/egg_chicken.png","spawn_egg,10"],[o+"tools/egg_cow.png","spawn_egg,11"],[o+"tools/egg_pig.png","spawn_egg,12"],[o+"tools/egg_sheep.png","spawn_egg,13"],[o+"tools/egg_wolf.png","spawn_egg,14"],[o+"tools/egg_polarbear.png","spawn_egg,28"],[o+"tools/egg_ocelot.png","spawn_egg,22"],[o+"tools/egg_mushroomcow.png","spawn_egg,16"],[o+"tools/egg_bat.png","spawn_egg,19"],[o+"tools/egg_rabbit.png","spawn_egg,18"],[o+"tools/egg_llama.png","spawn_egg,29"],[o+"tools/egg_horse.png","spawn_egg,23"],[o+"tools/egg_donkey.png","spawn_egg,24"],[o+"tools/egg_mule.png","spawn_egg,25"],[o+"tools/egg_skeletonhorse.png","spawn_egg,26"],[o+"tools/egg_zombiehorse.png","spawn_egg,27"],[o+"tools/egg_creeper.png","spawn_egg,33"],[o+"tools/egg_enderman.png","spawn_egg,38"],[o+"tools/egg_silverfish.png","spawn_egg,30"],[o+"tools/egg_skeleton.png","spawn_egg,34"],[o+"tools/egg_wither.png","spawn_egg,48"],[o+"tools/egg_stray.png","spawn_egg,46"],[o+"tools/egg_slime.png","spawn_egg,37"],[o+"tools/egg_spider.png","spawn_egg,35"],[o+"tools/egg_zombie.png","spawn_egg,32"],[o+"tools/egg_pigzombie.png","spawn_egg,36"],[o+"tools/egg_husk.png","spawn_egg,47"],[o+"tools/egg_squid.png","spawn_egg,17"],[o+"tools/egg_cave_spider.png","spawn_egg,40"],[o+"tools/egg_witch.png","spawn_egg,45"],[o+"tools/egg_guardian.png","spawn_egg,49"],[o+"tools/egg_elderguardian.png","spawn_egg,50"],[o+"tools/egg_endermite.png","spawn_egg,55"],[o+"tools/egg_lava_slime.png","spawn_egg,42"],[o+"tools/egg_ghast.png","spawn_egg,41"],[o+"tools/egg_blaze.png","spawn_egg,43"],[o+"tools/egg_shulker.png","spawn_egg,54"],[o+"tools/egg_vindicator.png","spawn_egg,57"],[o+"tools/egg_evoker.png","spawn_egg,104"],[o+"tools/egg_vex.png","spawn_egg,105"],[o+"tools/egg_npc.png","spawn_egg,51"],[o+"tools/fireball.png","fireball"],[o+"tools/wood_sword.png","wooden_sword"],[o+"tools/wood_hoe.png","wooden_hoe"],[o+"tools/wood_shovel.png","wooden_shovel"],[o+"tools/wood_pickaxe.png","wooden_pickaxe"],[o+"tools/wood_axe.png","wooden_axe"],[o+"tools/stone_sword.png","stone_sword"],[o+"tools/stone_hoe.png","stone_hoe"],[o+"tools/stone_shovel.png","stone_shovel"],[o+"tools/stone_pickaxe.png","stone_pickaxe"],[o+"tools/stone_axe.png","stone_axe"],[o+"tools/iron_sword.png","iron_sword"],[o+"tools/iron_hoe.png","iron_hoe"],[o+"tools/iron_shovel.png","iron_shovel"],[o+"tools/iron_pickaxe.png","iron_pickaxe"],[o+"tools/iron_axe.png","iron_axe"],[o+"tools/diamond_sword.png","diamond_sword"],[o+"tools/diamond_hoe.png","diamond_hoe"],[o+"tools/diamond_shovel.png","diamond_shovel"],[o+"tools/diamond_pickaxe.png","diamond_pickaxe"],[o+"tools/diamond_axe.png","diamond_axe"],[o+"tools/gold_sword.png","golden_sword"],[o+"tools/gold_hoe.png","golden_hoe"],[o+"tools/gold_shovel.png","golden_shovel"],[o+"tools/gold_pickaxe.png","golden_pickaxe"],[o+"tools/gold_axe.png","golden_axe"],[o+"tools/leather_helmet.png","leather_helmet"],[o+"tools/leather_chestplate.png","leather_chestplate"],[o+"tools/leather_leggings.png","leather_leggings"],[o+"tools/leather_boots.png","leather_boots"],[o+"tools/chainmail_helmet.png","chainmail_helmet"],[o+"tools/chainmail_chestplate.png","chainmail_chestplate"],[o+"tools/chainmail_leggings.png","chainmail_leggings"],[o+"tools/chainmail_boots.png","chainmail_boots"],[o+"tools/iron_helmet.png","iron_helmet"],[o+"tools/iron_chestplate.png","iron_chestplate"],[o+"tools/iron_leggings.png","iron_leggings"],[o+"tools/iron_boots.png","iron_boots"],[o+"tools/diamond_helmet.png","diamond_helmet"],[o+"tools/diamond_chestplate.png","diamond_chestplate"],[o+"tools/diamond_leggings.png","diamond_leggings"],[o+"tools/diamond_boots.png","diamond_boots"],[o+"tools/gold_helmet.png","golden_helmet"],[o+"tools/gold_chestplate.png","golden_chestplate"],[o+"tools/gold_leggings.png","golden_leggings"],[o+"tools/gold_boots.png","golden_boots"],[o+"tools/elytra.png","elytra"],[o+"tools/totem.png","totem"],[o+"tools/lever.png","lever"],[o+"tools/redstone_lamp.png","redstone_lamp"],[o+"tools/redstone_torch.png","redstone_torch"],[o+"tools/wooden_pressure_plate.png","wooden_pressure_plate"],[o+"tools/stone_pressure_plate.png","stone_pressure_plate"],[o+"tools/light_weighted_pressure_plate.png","light_weighted_pressure_plate"],[o+"tools/heavy_weighted_pressure_plate.png","heavy_weighted_pressure_plate"],[o+"tools/wooden_button.png","wooden_button"],[o+"tools/stone_button.png","stone_button"],[o+"tools/daylight_detector.png","daylight_detector"],[o+"tools/tripwire_hook.png","tripwire_hook"],[o+"tools/repeater.png","repeater"],[o+"tools/comparator.png","comparator"],[o+"tools/dispenser.png","dispenser"],[o+"tools/dropper.png","dropper"],[o+"tools/piston.png","piston"],[o+"tools/sticky_piston.png","sticky_piston"],[o+"tools/observer.png","observer"],[o+"tools/hopper.png","hopper"],[o+"tools/snowball.png","snowball"],[o+"tools/ender_pearl.png","ender_pearl"],[o+"tools/ender_eye.png","ender_eye"],[o+"tools/camera.png","camera"],[o+"tools/book_portfolio.png","portfolio"]],blocks:[[o+"blocks/air.png","air"],[o+"blocks/cobblestone.png","cobblestone"],[o+"blocks/stonebrick.png","stonebrick"],[o+"blocks/mossy_stonebrick.png","stonebrick,1"],[o+"blocks/cracked_stonebrick.png","stonebrick,2"],[o+"blocks/chiseled_stonebrick.png","stonebrick,3"],[o+"blocks/mossy_cobblestone.png","mossy_cobblestone"],[o+"blocks/planks_oak.png","planks"],[o+"blocks/planks_spruce.png","planks,1"],[o+"blocks/planks_birch.png","planks,2"],[o+"blocks/planks_jungle.png","planks,3"],[o+"blocks/planks_acacia.png","planks,4"],[o+"blocks/planks_dark_oak.png","planks,5"],[o+"blocks/bricks.png","brick_block"],[o+"blocks/stone.png","stone"],[o+"blocks/granite.png","stone,1"],[o+"blocks/polished_granite.png","stone,2"],[o+"blocks/diorite.png","stone,3"],[o+"blocks/polished_diorite.png","stone,4"],[o+"blocks/andesite.png","stone,5"],[o+"blocks/polished_andesite.png","stone,6"],[o+"blocks/dirt.png","dirt"],[o+"blocks/podzol.png","podzol"],[o+"blocks/grass.png","grass"],[o+"blocks/mycelium.png","mycelium"],[o+"blocks/clay.png","clay"],[o+"blocks/hardened_clay.png","hardened_clay"],[o+"blocks/stained_hardened_clay_white.png","stained_hardened_clay"],[o+"blocks/stained_hardened_clay_silver.png","stained_hardened_clay,8"],[o+"blocks/stained_hardened_clay_gray.png","stained_hardened_clay,7"],[o+"blocks/stained_hardened_clay_black.png","stained_hardened_clay,15"],[o+"blocks/stained_hardened_clay_brown.png","stained_hardened_clay,12"],[o+"blocks/stained_hardened_clay_red.png","stained_hardened_clay,14"],[o+"blocks/stained_hardened_clay_orange.png","stained_hardened_clay,1"],[o+"blocks/stained_hardened_clay_yellow.png","stained_hardened_clay,4"],[o+"blocks/stained_hardened_clay_lime.png","stained_hardened_clay,5"],[o+"blocks/stained_hardened_clay_green.png","stained_hardened_clay,13"],[o+"blocks/stained_hardened_clay_cyan.png","stained_hardened_clay,9"],[o+"blocks/stained_hardened_clay_light_blue.png","stained_hardened_clay,3"],[o+"blocks/stained_hardened_clay_blue.png","stained_hardened_clay,11"],[o+"blocks/stained_hardened_clay_purple.png","stained_hardened_clay,10"],[o+"blocks/stained_hardened_clay_magenta.png","stained_hardened_clay,2"],[o+"blocks/stained_hardened_clay_pink.png","stained_hardened_clay,6"],[o+"blocks/sandstone.png","sandstone"],[o+"blocks/chiseled_sandstone.png","sandstone,1"],[o+"blocks/smooth_sandstone.png","sandstone,1"],[o+"blocks/red_sandstone.png","red_sandstone"],[o+"blocks/chiseled_red_sandstone.png","red_sandstone,1"],[o+"blocks/smooth_red_sandstone.png","red_sandstone,1"],[o+"blocks/sand.png","sand"],[o+"blocks/red_sand.png","sand,1"],[o+"blocks/gravel.png","gravel"],[o+"blocks/log_oak.png","log"],[o+"blocks/log_spruce.png","log,1"],[o+"blocks/log_birch.png","log,2"],[o+"blocks/log_jungle.png","log,3"],[o+"blocks/log_acacia.png","log2,0"],[o+"blocks/log_dark_oak.png","log2,1"],[o+"blocks/nether_brick.png","nether_brick"],[o+"blocks/netherrack.png","netherrack"],[o+"blocks/soul_sand.png","soul_sand"],[o+"blocks/bedrock.png","bedrock"],[o+"blocks/stone_stairs.png","stone_stairs"],[o+"blocks/oak_stairs.png","oak_stairs"],[o+"blocks/spruce_stairs.png","spruce_stairs"],[o+"blocks/birch_stairs.png","birch_stairs"],[o+"blocks/jungle_stairs.png","jungle_stairs"],[o+"blocks/acacia_stairs.png","acacia_stairs"],[o+"blocks/dark_oak_stairs.png","dark_oak_stairs"],[o+"blocks/brick_stairs.png","brick_stairs"],[o+"blocks/sandstone_stairs.png","sandstone_stairs"],[o+"blocks/red_sandstone_stairs.png","red_sandstone_stairs"],[o+"blocks/stone_brick_stairs.png","stone_brick_stairs"],[o+"blocks/nether_brick_stairs.png","nether_brick_stairs"],[o+"blocks/quartz_stairs.png","quartz_stairs"],[o+"blocks/purpur_stairs.png","purpur_stairs"],[o+"blocks/stone_slab.png","stone_slab"],[o+"blocks/cobblestone_slab.png","stone_slab,3"],[o+"blocks/wooden_slab_oak.png","wooden_slab"],[o+"blocks/wooden_slab_spruce.png","wooden_slab,1"],[o+"blocks/wooden_slab_birch.png","wooden_slab,2"],[o+"blocks/wooden_slab_jungle.png","wooden_slab,3"],[o+"blocks/wooden_slab_acacia.png","wooden_slab,4"],[o+"blocks/wooden_slab_dark_oak.png","wooden_slab,5"],[o+"blocks/brick_slab.png","stone_slab,4"],[o+"blocks/sandstone_slab.png","stone_slab,1"],[o+"blocks/red_sandstone_slab.png","stone_slab2"],[o+"blocks/stonebrick_slab.png","stone_slab,5"],[o+"blocks/netherbrick_slab.png","stone_slab,7"],[o+"blocks/quartz_slab.png","stone_slab,6"],[o+"blocks/purpur_slab.png","stone_slab2,1"],[o+"blocks/quartz_block.png","quartz_block"],[o+"blocks/pillar_quartz_block.png","quartz_block,2"],[o+"blocks/chiseled_quartz_block.png","quartz_block,1"],[o+"blocks/prismarine.png","prismarine"],[o+"blocks/prismarinebrick.png","prismarine,2"],[o+"blocks/dark_prismarine.png","prismarine,1"],[o+"blocks/purpur_block.png","purpur_block"],[o+"blocks/pillar_purpur_block.png","purpur_block,2"],[o+"blocks/coal_ore.png","coal_ore"],[o+"blocks/iron_ore.png","iron_ore"],[o+"blocks/gold_ore.png","gold_ore"],[o+"blocks/diamond_ore.png","diamond_ore"],[o+"blocks/lapis_ore.png","lapis_ore"],[o+"blocks/redstone_ore.png","redstone_ore"],[o+"blocks/emerald_ore.png","emerald_ore"],[o+"blocks/quartz_ore.png","quartz_ore"],[o+"blocks/obsidian.png","obsidian"],[o+"blocks/ice.png","ice"],[o+"blocks/ice_packed.png","packed_ice"],[o+"blocks/snow.png","snow"],[o+"blocks/end_bricks.png","end_bricks"],[o+"blocks/end_stone.png","end_stone"],[o+"blocks/allow.png","allow"],[o+"blocks/deny.png","deny"],[o+"blocks/border_block.png","border_block"]]}),e.exports=t.default},2897:function(e,t,n){"use strict";var r=n(2522),o={bedrock:r.blockTypeBedrock(),bricks:r.blockTypeBricks(),clay:r.blockTypeClay(),oreCoal:r.blockTypeOreCoal(),dirtCoarse:r.blockTypeDirtCoarse(),cobblestone:r.blockTypeCobblestone(),oreDiamond:r.blockTypeOreDiamond(),dirt:r.blockTypeDirt(),oreEmerald:r.blockTypeOreEmerald(),farmlandWet:r.blockTypeFarmlandWet(),glass:r.blockTypeGlass(),oreGold:r.blockTypeOreGold(),grass:r.blockTypeGrass(),gravel:r.blockTypeGravel(),ice:r.blockTypeIce(),snow:r.blockTypeSnow(),netherrack:r.blockTypeNetherrack(),netherBrick:r.blockTypeNetherBrick(),clayHardened:r.blockTypeClayHardened(),oreIron:r.blockTypeOreIron(),oreLapis:r.blockTypeOreLapis(),lava:r.blockTypeLava(),logAcacia:r.blockTypeLogAcacia(),logBirch:r.blockTypeLogBirch(),logJungle:r.blockTypeLogJungle(),logOak:r.blockTypeLogOak(),logSpruce:r.blockTypeLogSpruce(),planksAcacia:r.blockTypePlanksAcacia(),planksBirch:r.blockTypePlanksBirch(),planksJungle:r.blockTypePlanksJungle(),planksOak:r.blockTypePlanksOak(),planksSpruce:r.blockTypePlanksSpruce(),oreRedstone:r.blockTypeOreRedstone(),rails:r.blockTypeRail(),sand:r.blockTypeSand(),sandstone:r.blockTypeSandstone(),stone:r.blockTypeStone(),tnt:r.blockTypeTnt(),tree:r.blockTypeTree(),water:r.blockTypeWater(),wool:r.blockTypeWool(),"":r.blockTypeEmpty()},l=["bedrock","bricks","clay","oreCoal","dirtCoarse","cobblestone","oreDiamond","dirt","oreEmerald","farmlandWet","glass","oreGold","grass","gravel","clayHardened","oreIron","oreLapis","lava","logAcacia","logBirch","logJungle","logOak","logSpruce","planksAcacia","planksBirch","planksJungle","planksOak","planksSpruce","oreRedstone","sand","sandstone","stone","tnt","tree","wool"];function s(e){return e.map(function(e){return[o[e]||e,e]})}t.install=function(n,e){var t=(e.level.availableBlocks||[]).concat(JSON.parse(window.localStorage.getItem("craftPlayerInventory"))||[]),o={};t.forEach(function(e){o[e]=!0});var i={inventoryBlocks:Object.keys(o),ifBlockOptions:e.level.ifBlockOptions,placeBlockOptions:e.level.placeBlockOptions},a=!i.inventoryBlocks||0===i.inventoryBlocks.length?l:i.inventoryBlocks;n.Blocks.craft_moveForward={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new n.FieldLabel(r.blockMoveForward())),this.setPreviousStatement(!0),this.setNextStatement(!0)}},n.Generator.get("JavaScript").craft_moveForward=function(){return"moveForward('block_id_"+this.id+"');\n"},n.Blocks.craft_turn={helpUrl:"http://code.google.com/p/blockly/wiki/Turn",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new n.FieldDropdown(this.DIRECTIONS),"DIR"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},n.Blocks.craft_turn.DIRECTIONS=[[r.blockTurnLeft()+" ↺","left"],[r.blockTurnRight()+" ↻","right"]],n.Generator.get("JavaScript").craft_turn=function(){return("left"===this.getTitleValue("DIR")?"turnLeft":"turnRight")+"('block_id_"+this.id+"');\n"},n.Blocks.craft_destroyBlock={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new n.FieldLabel(r.blockDestroyBlock())),this.setPreviousStatement(!0),this.setNextStatement(!0)}},n.Generator.get("JavaScript").craft_destroyBlock=function(){return"destroyBlock('block_id_"+this.id+"');\n"},n.Blocks.craft_shear={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new n.FieldLabel(r.blockShear())),this.setPreviousStatement(!0),this.setNextStatement(!0)}},n.Generator.get("JavaScript").craft_shear=function(){return"shear('block_id_"+this.id+"');\n"},n.Blocks.craft_ifBlockAhead={helpUrl:"",init:function(){var e=s(i.ifBlockOptions||a),t=new n.FieldDropdown(e);t.setValue(e[0][1]),this.setHSV(196,1,.79),this.appendDummyInput().appendTitle(r.blockIf()).appendTitle(t,"TYPE").appendTitle(r.blockWhileXAheadAhead()),this.appendStatementInput("DO").appendTitle(r.blockWhileXAheadDo()),this.setPreviousStatement(!0),this.setNextStatement(!0)}},n.Generator.get("JavaScript").craft_ifBlockAhead=function(){var e=n.Generator.get("JavaScript").statementToCode(this,"DO");return'ifBlockAhead("'+this.getTitleValue("TYPE")+'", function() {\n'+e+"}, 'block_id_"+this.id+"');\n"},n.Blocks.craft_ifLavaAhead={helpUrl:"",init:function(){this.setHSV(196,1,.79),this.appendDummyInput().appendTitle(r.blockIfLavaAhead()),this.appendStatementInput("DO").appendTitle(r.blockWhileXAheadDo()),this.setPreviousStatement(!0),this.setNextStatement(!0)}},n.Generator.get("JavaScript").craft_ifLavaAhead=function(){return"ifLavaAhead(function() {\n"+n.Generator.get("JavaScript").statementToCode(this,"DO")+"}, 'block_id_"+this.id+"');\n"},n.Blocks.craft_placeBlock={helpUrl:"",init:function(){var e=s(i.placeBlockOptions||a),t=new n.FieldDropdown(e);t.setValue(e[0][1]),this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(r.blockPlaceXPlace()).appendTitle(t,"TYPE"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},n.Generator.get("JavaScript").craft_placeBlock=function(){return'placeBlock("'+this.getTitleValue("TYPE")+"\", 'block_id_"+this.id+"');\n"},n.Blocks.craft_placeTorch={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(r.blockPlaceTorch()),this.setPreviousStatement(!0),this.setNextStatement(!0)}},n.Generator.get("JavaScript").craft_placeTorch=function(){return"placeTorch('block_id_"+this.id+"');\n"},n.Blocks.craft_plantCrop={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(r.blockPlantCrop()),this.setPreviousStatement(!0),this.setNextStatement(!0)}},n.Generator.get("JavaScript").craft_plantCrop=function(){return"plantCrop('block_id_"+this.id+"');\n"},n.Blocks.craft_tillSoil={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(r.blockTillSoil()),this.setPreviousStatement(!0),this.setNextStatement(!0)}},n.Generator.get("JavaScript").craft_tillSoil=function(){return"tillSoil('block_id_"+this.id+"');\n"},n.Blocks.craft_placeBlockAhead={helpUrl:"",init:function(){var e=s(i.placeBlockOptions||a),t=new n.FieldDropdown(e);t.setValue(e[0][1]),this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(r.blockPlaceXAheadPlace()).appendTitle(t,"TYPE").appendTitle(r.blockPlaceXAheadAhead()),this.setPreviousStatement(!0),this.setNextStatement(!0)}},n.Generator.get("JavaScript").craft_placeBlockAhead=function(){return'placeBlockAhead("'+this.getTitleValue("TYPE")+"\", 'block_id_"+this.id+"');\n"}}},2898:function(e,t,n){"use strict";var l=n(2541),o={bedrock:l.blockTypeBedrock(),bricks:l.blockTypeBricks(),clay:l.blockTypeClay(),oreCoal:l.blockTypeOreCoal(),dirtCoarse:l.blockTypeDirtCoarse(),doorIron:l.blockTypeDoorIron(),cobblestone:l.blockTypeCobblestone(),oreDiamond:l.blockTypeOreDiamond(),dirt:l.blockTypeDirt(),oreEmerald:l.blockTypeOreEmerald(),farmlandWet:l.blockTypeFarmlandWet(),glass:l.blockTypeGlass(),glowstone:l.blockTypeGlowstone(),oreGold:l.blockTypeOreGold(),grass:l.blockTypeGrass(),gravel:l.blockTypeGravel(),ice:l.blockTypeIce(),snow:l.blockTypeSnow(),netherrack:l.blockTypeNetherrack(),netherBrick:l.blockTypeNetherBrick(),clayHardened:l.blockTypeClayHardened(),oreIron:l.blockTypeOreIron(),oreLapis:l.blockTypeOreLapis(),lava:l.blockTypeLava(),logAcacia:l.blockTypeLogAcacia(),logBirch:l.blockTypeLogBirch(),logJungle:l.blockTypeLogJungle(),logOak:l.blockTypeLogOak(),logSpruce:l.blockTypeLogSpruce(),planksAcacia:l.blockTypePlanksAcacia(),planksBirch:l.blockTypePlanksBirch(),planksJungle:l.blockTypePlanksJungle(),planksOak:l.blockTypePlanksOak(),planksSpruce:l.blockTypePlanksSpruce(),pressurePlateUp:l.blockTypePressurePlateUp(),oreRedstone:l.blockTypeOreRedstone(),rails:l.blockTypeRail(),railsRedstoneTorch:l.blockTypeRailsRedstoneTorch(),redstoneWire:l.blockTypeRedstoneWire(),sand:l.blockTypeSand(),sandstone:l.blockTypeSandstone(),stone:l.blockTypeStone(),tnt:l.blockTypeTnt(),tree:l.blockTypeTree(),water:l.blockTypeWater(),wool:l.blockTypeWool(),wool_orange:l.blockTypeWoolOrange(),wool_blue:l.blockTypeWoolBlue(),wool_magenta:l.blockTypeWoolMagenta(),wool_pink:l.blockTypeWoolPink(),wool_red:l.blockTypeWoolRed(),wool_yellow:l.blockTypeWoolYellow(),"":l.blockTypeEmpty()},s=["bedrock","bricks","clay","oreCoal","dirtCoarse","cobblestone","oreDiamond","dirt","oreEmerald","farmlandWet","glass","oreGold","grass","gravel","clayHardened","oreIron","oreLapis","lava","logAcacia","logBirch","logJungle","logOak","logSpruce","planksAcacia","planksBirch","planksJungle","planksOak","planksSpruce","oreRedstone","sand","sandstone","stone","tnt","tree","wool"];function c(e){return e.map(function(e){return[o[e]||e,e]})}t.install=function(n,e){var t=(e.level.availableBlocks||[]).concat(JSON.parse(window.localStorage.getItem("craftPlayerInventory"))||[]),o={};t.forEach(function(e){o[e]=!0});var i={inventoryBlocks:Object.keys(o),ifBlockOptions:e.level.ifBlockOptions,placeBlockOptions:e.level.placeBlockOptions},a=!i.inventoryBlocks||0===i.inventoryBlocks.length?s:i.inventoryBlocks;n.Blocks.craft_moveForward={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new n.FieldLabel(l.blockMoveForward())),this.setPreviousStatement(!0),this.setNextStatement(!0)}},n.Generator.get("JavaScript").craft_moveForward=function(){return"moveForward('block_id_"+this.id+"');\n"},n.Blocks.craft_moveBackward={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new n.FieldLabel(l.blockMoveBackward())),this.setPreviousStatement(!0),this.setNextStatement(!0)}},n.Generator.get("JavaScript").craft_moveBackward=function(){return"moveBackward('block_id_"+this.id+"');\n"},n.Blocks.craft_turn={helpUrl:"http://code.google.com/p/blockly/wiki/Turn",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new n.FieldDropdown(this.DIRECTIONS),"DIR"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},n.Blocks.craft_turn.DIRECTIONS=[[l.blockTurnLeft()+" ↺","left"],[l.blockTurnRight()+" ↻","right"]],n.Generator.get("JavaScript").craft_turn=function(){return("left"===this.getTitleValue("DIR")?"turnLeft":"turnRight")+"('block_id_"+this.id+"');\n"},n.Blocks.craft_destroyBlock={helpUrl:"",init:function(){this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(new n.FieldLabel(l.blockDestroyBlock())),this.setPreviousStatement(!0),this.setNextStatement(!0)}},n.Generator.get("JavaScript").craft_destroyBlock=function(){return"destroyBlock('block_id_"+this.id+"');\n"},n.Blocks.craft_ifBlockAhead={helpUrl:"",init:function(){var e=c(i.ifBlockOptions||a),t=new n.FieldDropdown(e);t.setValue(e[0][1]),this.setHSV(196,1,.79),this.appendDummyInput().appendTitle(l.blockIf()).appendTitle(t,"TYPE").appendTitle(l.blockWhileXAheadAhead()),this.appendStatementInput("DO").appendTitle(l.blockWhileXAheadDo()),this.setPreviousStatement(!0),this.setNextStatement(!0)}},n.Generator.get("JavaScript").craft_ifBlockAhead=function(){var e=n.Generator.get("JavaScript").statementToCode(this,"DO");return'ifBlockAhead("'+this.getTitleValue("TYPE")+'", function() {\n'+e+"}, 'block_id_"+this.id+"');\n"},n.Blocks.craft_ifLavaAhead={helpUrl:"",init:function(){this.setHSV(196,1,.79),this.appendDummyInput().appendTitle(l.blockIfLavaAhead()),this.appendStatementInput("DO").appendTitle(l.blockWhileXAheadDo()),this.setPreviousStatement(!0),this.setNextStatement(!0)}},n.Generator.get("JavaScript").craft_ifLavaAhead=function(){return"ifLavaAhead(function() {\n"+n.Generator.get("JavaScript").statementToCode(this,"DO")+"}, 'block_id_"+this.id+"');\n"},n.Blocks.craft_placeBlock={helpUrl:"",init:function(){var e=c(i.placeBlockOptions||a),t=new n.FieldDropdown(e);t.setValue(e[0][1]),this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(l.blockPlaceXPlace()).appendTitle(t,"TYPE"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},n.Generator.get("JavaScript").craft_placeBlock=function(){return'placeBlock("'+this.getTitleValue("TYPE")+"\", 'block_id_"+this.id+"');\n"};var r=[[l.directionForward(),"0"],[l.directionBack(),"2"],[l.directionLeft(),"3"],[l.directionRight(),"1"]];n.Blocks.craft_placeBlockDirection={helpUrl:"",init:function(){var e=c(i.placeBlockOptions||a),t=new n.FieldDropdown(e);t.setValue(e[0][1]),this.setHSV(184,1,.74),this.appendDummyInput().appendTitle(l.blockPlaceXPlace()).appendTitle(t,"TYPE").appendTitle(" ").appendTitle(new n.FieldDropdown(r),"DIR"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},n.Generator.get("JavaScript").craft_placeBlockDirection=function(){return'placeDirection("'+this.getTitleValue("TYPE")+'", "'+this.getTitleValue("DIR")+"\", 'block_id_"+this.id+"');\n"}}},2899:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.install=void 0;var o,i=n(2691),v=(o=i)&&o.__esModule?o:{default:o};var _=n(2632);function y(e){return e.split(",")[0]}function k(e){var t=e.split(",")[1];return void 0===t&&(t="0"),t}var b="ITEM",w=[[_.directionForward(),"forward"],[_.directionBack(),"back"],[_.directionLeft(),"left"],[_.directionRight(),"right"],[_.directionUp(),"up"],[_.directionDown(),"down"]],S=[[_.directionForward(),"forward"],[_.directionBack(),"back"],[_.directionLeft(),"left"],[_.directionRight(),"right"]],C=[[_.directionLeft()+" ↺","left"],[_.directionRight()+" ↻","right"]],T=[[_.relative(),"~"],[_.absolute(),""]],P=[[_.timeDay(),"day"],[_.timeNight(),"night"]],A=[[_.weatherTypeClear(),"clear"],[_.weatherTypeRain(),"rain"],[_.weatherTypeThunder(),"thunder"]],E=[[_.oldBlockHandlingsReplace(),"replace"],[_.oldBlockHandlingsDestroy(),"destroy"],[_.oldBlockHandlingsKeep(),"keep"]],B=[[_.testModeAll(),"all"],[_.testModeMasked(),"masked"]],O=[[_.maskModeReplace(),"replace"],[_.maskModeMasked(),"masked"]],D=[[_.cloneModeNormal(),"normal"],[_.cloneModeForce(),"force"],[_.cloneModeMove(),"move"]];t.install=function(e,t){var n=90,o=.57,i=.7,a=358,r=.54,l=.7,s=42,c=.69,u=.76,p=359,d=.8,h=.8,f=300,g=.3,m=.7;e.Blocks.craft_vecThree={helpUrl:"",init:function(){this.setInputsInline(!0),this.setHSV(f,g,m),this.appendValueInput("X").setCheck("Number").appendTitle(new e.FieldLabel("X:")),this.appendValueInput("Y").setCheck("Number").appendTitle(new e.FieldLabel("Y:")),this.appendValueInput("Z").setCheck("Number").appendTitle(new e.FieldLabel("Z:")),this.setOutput(!0,"Number")}},e.JavaScript.craft_vecThree=function(){return["getVec3("+Blockly.JavaScript.valueToCode(this,"X",Blockly.JavaScript.ORDER_NONE)+", "+Blockly.JavaScript.valueToCode(this,"Y",Blockly.JavaScript.ORDER_NONE)+", "+Blockly.JavaScript.valueToCode(this,"Z",Blockly.JavaScript.ORDER_NONE)+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]},e.Blocks.craft_move={helpUrl:"",init:function(){this.setHSV(n,o,i),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockMove())).appendTitle(new e.FieldDropdown(w),"DIR"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_move=function(){var e=this.getTitleValue("DIR");return"move('block_id_"+this.id+"','"+e+"');"},e.Blocks.craft_turn={helpUrl:"",init:function(){this.setHSV(n,o,i),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockTurn())).appendTitle(new e.FieldDropdown(C),"DIR"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_turn=function(){var e=this.getTitleValue("DIR");return"turn('block_id_"+this.id+"','"+e+"');"},e.Blocks.craft_place={helpUrl:"",init:function(){this.setHSV(n,o,i),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockPlace())).appendTitle(new e.FieldDropdown(w),"DIR"),this.appendValueInput("SLOTNUM").setCheck("Number").appendTitle(new e.FieldLabel(_.inSlotNumber())),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_place=function(){var e=this.getTitleValue("DIR"),t=Blockly.JavaScript.valueToCode(this,"SLOTNUM",Blockly.JavaScript.ORDER_NONE);return"place('block_id_"+this.id+"',"+t+",'"+e+"');"},e.Blocks.craft_till={helpUrl:"",init:function(){this.setHSV(n,o,i),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockTill())).appendTitle(new e.FieldDropdown(w),"DIR"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_till=function(){var e=this.getTitleValue("DIR");return"till('block_id_"+this.id+"','"+e+"');"},e.Blocks.craft_attack={helpUrl:"",init:function(){this.setHSV(n,o,i),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockActionAttack())).appendTitle(new e.FieldDropdown(w),"DIR"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_attack=function(){var e=this.getTitleValue("DIR");return"attack('block_id_"+this.id+"','"+e+"');"},e.Blocks.craft_destroy={helpUrl:"",init:function(){this.setHSV(n,o,i),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockDestroyBlock())).appendTitle(new e.FieldDropdown(w),"DIR"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_destroy=function(){var e=this.getTitleValue("DIR");return"destroy('block_id_"+this.id+"','"+e+"');"},e.Blocks.craft_collectall={helpUrl:"",init:function(){this.setHSV(n,o,i),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockActionCollectAll())),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_collectall=function(){return"collectall('block_id_"+this.id+"');"},e.Blocks.craft_collect={helpUrl:"",init:function(){this.setHSV(n,o,i),this.appendValueInput("ITEM").setCheck(b).appendTitle(new e.FieldLabel(_.blockActionCollect())),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_collect=function(){var e=Blockly.JavaScript.valueToCode(this,"ITEM",Blockly.JavaScript.ORDER_NONE);return"collect('block_id_"+this.id+"',"+e+");"},e.Blocks.craft_drop={helpUrl:"",init:function(){this.setHSV(n,o,i),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockActionDrop())).appendTitle(new e.FieldDropdown(S),"DIR"),this.appendValueInput("SLOTNUM").setCheck("Number").appendTitle(new e.FieldLabel(_.inSlotNumber())),this.appendValueInput("QUANTITY").setCheck("Number").appendTitle(new e.FieldLabel(_.quantity())),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_drop=function(){var e=this.getTitleValue("DIR"),t=Blockly.JavaScript.valueToCode(this,"SLOTNUM",Blockly.JavaScript.ORDER_NONE),n=Blockly.JavaScript.valueToCode(this,"QUANTITY",Blockly.JavaScript.ORDER_NONE);return"drop('block_id_"+this.id+"',"+t+","+n+",'"+e+"');"},e.Blocks.craft_dropall={helpUrl:"",init:function(){this.setHSV(n,o,i),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockActionDropAll())).appendTitle(new e.FieldDropdown(S),"DIR"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_dropall=function(){var e=this.getTitleValue("DIR");return"dropall('block_id_"+this.id+"','"+e+"');"},e.Blocks.craft_detect={helpUrl:"",init:function(){this.setHSV(n,o,i),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockActionDetect())).appendTitle(new e.FieldDropdown(w),"DIR"),this.setOutput(!0,Blockly.BlockValueType.BOOLEAN)}},e.JavaScript.craft_detect=function(){var e=this.getTitleValue("DIR");return["detect('block_id_"+this.id+"','"+e+"')",Blockly.JavaScript.ORDER_FUNCTION_CALL]},e.Blocks.craft_inspect={helpUrl:"",init:function(){this.setHSV(n,o,i),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockActionInspect())).appendTitle(new e.FieldDropdown(w),"DIR"),this.setOutput(!0,Blockly.JavaScript.STRING)}},e.JavaScript.craft_inspect=function(){var e=this.getTitleValue("DIR");return["inspect('block_id_"+this.id+"','"+e+"')",Blockly.JavaScript.ORDER_FUNCTION_CALL]},e.Blocks.craft_inspectdata={helpUrl:"",init:function(){this.setHSV(n,o,i),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockActionInspectData())).appendTitle(new e.FieldDropdown(w),"DIR"),this.setOutput(!0,Blockly.BlockValueType.NUMBER)}},e.JavaScript.craft_inspectdata=function(){var e=this.getTitleValue("DIR");return["inspectdata('block_id_"+this.id+"','"+e+"')",Blockly.JavaScript.ORDER_FUNCTION_CALL]},e.Blocks.craft_detectredstone={helpUrl:"",init:function(){this.setHSV(n,o,i),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockActionDetectRedstone())).appendTitle(new e.FieldDropdown(w),"DIR"),this.setOutput(!0,Blockly.BlockValueType.BOOLEAN)}},e.JavaScript.craft_detectredstone=function(){var e=this.getTitleValue("DIR");return["detectredstone('block_id_"+this.id+"','"+e+"')",Blockly.JavaScript.ORDER_FUNCTION_CALL]},e.Blocks.craft_getitemdetail={helpUrl:"",init:function(){this.setHSV(n,o,i),this.appendValueInput("SLOTNUM").setCheck("Number").appendTitle(new e.FieldLabel(_.blockActionGetItemDetailInSlotNumber())),this.setOutput(!0,Blockly.BlockValueType.STRING)}},e.JavaScript.craft_getitemdetail=function(){var e=Blockly.JavaScript.valueToCode(this,"SLOTNUM",Blockly.JavaScript.ORDER_NONE);return["getitemdetail('block_id_"+this.id+"',"+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]},e.Blocks.craft_getitemspace={helpUrl:"",init:function(){this.setHSV(n,o,i),this.appendValueInput("SLOTNUM").setCheck("Number").appendTitle(new e.FieldLabel(_.blockActionGetItemSpaceInSlotNumber())),this.setOutput(!0,Blockly.BlockValueType.NUMBER)}},e.JavaScript.craft_getitemspace=function(){var e=Blockly.JavaScript.valueToCode(this,"SLOTNUM",Blockly.JavaScript.ORDER_NONE);return["getitemspace('block_id_"+this.id+"',"+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]},e.Blocks.craft_getitemcount={helpUrl:"",init:function(){this.setHSV(n,o,i),this.appendValueInput("SLOTNUM").setCheck("Number").appendTitle(new e.FieldLabel(_.blockActionGetItemCountInSlotNumber())),this.setOutput(!0,Blockly.BlockValueType.NUMBER)}},e.JavaScript.craft_getitemcount=function(){var e=Blockly.JavaScript.valueToCode(this,"SLOTNUM",Blockly.JavaScript.ORDER_NONE);return["getitemcount('block_id_"+this.id+"',"+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]},e.Blocks.craft_transfer={helpUrl:"",init:function(){this.setHSV(n,o,i),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockActionTransfer())),this.appendValueInput("SRCSLOTNUM").setCheck("Number").appendTitle(new e.FieldLabel(_.inSlotNumber())),this.appendValueInput("DSTSLOTNUM").setCheck("Number").appendTitle(new e.FieldLabel(_.toSlotNumber())),this.appendValueInput("QUANTITY").setCheck("Number").appendTitle(new e.FieldLabel(_.quantity())),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_transfer=function(){var e=Blockly.JavaScript.valueToCode(this,"SRCSLOTNUM",Blockly.JavaScript.ORDER_NONE),t=Blockly.JavaScript.valueToCode(this,"DSTSLOTNUM",Blockly.JavaScript.ORDER_NONE),n=Blockly.JavaScript.valueToCode(this,"QUANTITY",Blockly.JavaScript.ORDER_NONE);return"transfer('block_id_"+this.id+"',"+e+","+n+","+t+");"},e.Blocks.craft_tptoplayer={helpUrl:"",init:function(){this.setHSV(n,o,i),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockActionTeleportToPlayer())),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_tptoplayer=function(){return"tptoplayer('block_id_"+this.id+"');"},e.Blocks.craft_wait={helpUrl:"",init:function(){this.setHSV(p,d,h),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockActionWait())).appendTitle(new e.FieldTextInput("1000",e.FieldTextInput.numberValidator),"MILLISECONDS").appendTitle(new e.FieldLabel("ms")),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_wait=function(){var e=window.parseInt(this.getTitleValue("MILLISECONDS"),10);return"wait('block_id_"+this.id+"','"+e+"');"},e.Blocks.craft_executeasother={helpUrl:"",init:function(){this.setHSV(s,c,u),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockActionExecute())).appendTitle(new e.FieldTextInput(""),"COMMAND"),this.appendDummyInput().appendTitle(new e.FieldLabel(_.onBehalfOf())).appendTitle(new e.FieldTextInput(""),"TARGET"),this.appendValueInput("VEC3").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendTitle(new e.FieldLabel(_.at())).appendTitle(new e.FieldDropdown(T),"POSITIONTYPE"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_executeasother=function(){var e=encodeURIComponent(this.getTitleValue("TARGET")),t=this.getTitleValue("POSITIONTYPE"),n=Blockly.JavaScript.valueToCode(this,"VEC3",Blockly.JavaScript.ORDER_NONE),o=this.getTitleValue("COMMAND");return"executeasother('block_id_"+this.id+"','"+e+"',createBlockPosFromVec3("+n+', "'+t+"\"),'"+o+"');"},e.Blocks.craft_timesetbyname={helpUrl:"",init:function(){this.setHSV(s,c,u),this.appendDummyInput().appendTitle(new e.FieldLabel(_.timeSet())).appendTitle(new e.FieldDropdown(P),"TIME"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_timesetbyname=function(){var e=this.getTitleValue("TIME");return"timesetbyname('block_id_"+this.id+"','"+e+"');"},e.Blocks.craft_timesetbynumber={helpUrl:"",init:function(){this.setHSV(s,c,u),this.setInputsInline(!0),this.appendDummyInput().appendTitle(new e.FieldLabel(_.timeSet())),this.appendValueInput("TIME").setCheck("Number"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_timesetbynumber=function(){var e=Blockly.JavaScript.valueToCode(this,"TIME",Blockly.JavaScript.ORDER_NONE)||"0";return"timesetbynumber('block_id_"+this.id+"',"+e+");"},e.Blocks.craft_weather={helpUrl:"",init:function(){this.setHSV(s,c,u),this.appendDummyInput().appendTitle(new e.FieldLabel(_.weather())).appendTitle(new e.FieldDropdown(A),"WEATHER"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_weather=function(){var e=this.getTitleValue("WEATHER");return"weather('block_id_"+this.id+"','"+e+"');"},e.Blocks.craft_tptotarget={helpUrl:"",init:function(){this.setHSV(s,c,u),this.setInputsInline(!0),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockActionTeleport())).appendTitle(new e.FieldTextInput(""),"VICTIM"),this.appendDummyInput().appendTitle(new e.FieldLabel(_.to())).appendTitle(new e.FieldTextInput(""),"DESTINATION"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_tptotarget=function(){var e=encodeURIComponent(this.getTitleValue("VICTIM")),t=encodeURIComponent(this.getTitleValue("DESTINATION"));return"tptotarget('block_id_"+this.id+"','"+e+"','"+t+"');"},e.Blocks.craft_tptopos={helpUrl:"",init:function(){this.setHSV(s,c,u),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockActionTeleport())).appendTitle(new e.FieldTextInput(""),"VICTIM"),this.appendValueInput("VEC3").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendTitle(new e.FieldLabel(_.to())).appendTitle(new e.FieldDropdown(T),"POSITIONTYPE"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_tptopos=function(){var e=encodeURIComponent(this.getTitleValue("VICTIM")),t=this.getTitleValue("POSITIONTYPE"),n=Blockly.JavaScript.valueToCode(this,"VEC3",Blockly.JavaScript.ORDER_NONE);return"tptopos('block_id_"+this.id+"','"+e+"',createBlockPosFromVec3("+n+', "'+t+'"));'},e.Blocks.craft_fill={helpUrl:"",init:function(){this.setHSV(s,c,u),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockActionFill())),this.appendValueInput("FROM_VEC3").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendTitle(new e.FieldDropdown(T),"FROMPOSITIONTYPE"),this.appendValueInput("TO_VEC3").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendTitle(new e.FieldLabel(_.to())).appendTitle(new e.FieldDropdown(T),"TOPOSITIONTYPE"),this.appendValueInput("ITEM").setCheck(b).setAlign(Blockly.ALIGN_RIGHT).appendTitle(new e.FieldLabel(_.blockActionWith())),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_fill=function(){var e=this.getTitleValue("FROMPOSITIONTYPE"),t=Blockly.JavaScript.valueToCode(this,"FROM_VEC3",Blockly.JavaScript.ORDER_NONE),n=this.getTitleValue("TOPOSITIONTYPE"),o=Blockly.JavaScript.valueToCode(this,"TO_VEC3",Blockly.JavaScript.ORDER_NONE),i=Blockly.JavaScript.valueToCode(this,"ITEM",Blockly.JavaScript.ORDER_NONE);return"fill('block_id_"+this.id+"',createBlockPosFromVec3("+t+', "'+e+'"),createBlockPosFromVec3('+o+', "'+n+'"),'+i+"['name'],"+i+"['data']);"},e.Blocks.craft_give={helpUrl:"",init:function(){this.setHSV(s,c,u),this.appendValueInput("AMOUNT").setCheck("Number").appendTitle(new e.FieldLabel(_.blockActionGive())),this.appendValueInput("ITEM").setCheck(b).setAlign(Blockly.ALIGN_RIGHT).appendTitle(new e.FieldLabel(_.itemsOfBlockType())),this.appendDummyInput().appendTitle(new e.FieldLabel(_.to())).appendTitle(new e.FieldTextInput(""),"PLAYER"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_give=function(){var e=encodeURIComponent(this.getTitleValue("PLAYER")),t=Blockly.JavaScript.valueToCode(this,"ITEM",Blockly.JavaScript.ORDER_NONE),n=Blockly.JavaScript.valueToCode(this,"AMOUNT",Blockly.JavaScript.ORDER_NONE)||"0";return"give('block_id_"+this.id+"','"+e+"',"+t+","+n+");"},e.Blocks.craft_kill={helpUrl:"",init:function(){this.setHSV(s,c,u),this.setInputsInline(!0),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockActionKill())).appendTitle(new e.FieldTextInput(""),"TARGET"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_kill=function(){var e=encodeURIComponent(this.getTitleValue("TARGET"));return"kill('block_id_"+this.id+"','"+e+"');"},e.Blocks.craft_setblock={helpUrl:"",init:function(){this.setHSV(s,c,u),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockActionSetBlock())),this.appendDummyInput().appendTitle(new e.FieldDropdown(E),"OLDBLOCKHANDLING").appendTitle(new e.FieldLabel(_.oldBlockHandling())),this.appendValueInput("VEC3").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendTitle(new e.FieldDropdown(T),"POSITIONTYPE"),this.appendValueInput("ITEM").setCheck(b).setAlign(Blockly.ALIGN_RIGHT).appendTitle(new e.FieldLabel(_.blockActionWith())),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_setblock=function(){var e=this.getTitleValue("POSITIONTYPE"),t=this.getTitleValue("OLDBLOCKHANDLING"),n=Blockly.JavaScript.valueToCode(this,"VEC3",Blockly.JavaScript.ORDER_NONE),o=Blockly.JavaScript.valueToCode(this,"ITEM",Blockly.JavaScript.ORDER_NONE);return"setblock('block_id_"+this.id+"',createBlockPosFromVec3("+n+', "'+e+'"), '+o+", '"+t+"');"},e.Blocks.craft_summon={helpUrl:"",init:function(){this.setHSV(s,c,u),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockActionSummon())),this.appendDummyInput().appendTitle(new e.FieldLabel(_.entityType())).appendTitle(new e.FieldTextInput(""),"ENTITYTYPE"),this.appendValueInput("VEC3").setCheck("Number").appendTitle(new e.FieldLabel(_.at())).appendTitle(new e.FieldDropdown(T),"POSITIONTYPE"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_summon=function(){var e=this.getTitleValue("ENTITYTYPE"),t=this.getTitleValue("POSITIONTYPE"),n=Blockly.JavaScript.valueToCode(this,"VEC3",Blockly.JavaScript.ORDER_NONE);return"summon('block_id_"+this.id+"','"+e+"',createBlockPosFromVec3("+n+', "'+t+'"));'},e.Blocks.craft_testforblock={helpUrl:"",init:function(){this.setHSV(s,c,u),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockActionTestForBlock())),this.appendValueInput("VEC3").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendTitle(new e.FieldLabel(_.at())).appendTitle(new e.FieldDropdown(T),"POSITIONTYPE"),this.appendValueInput("ITEM").setCheck(b).setAlign(Blockly.ALIGN_RIGHT).appendTitle(new e.FieldLabel(_.blockIs())),this.setOutput(!0,Blockly.BlockValueType.BOOLEAN)}},e.JavaScript.craft_testforblock=function(){var e=this.getTitleValue("POSITIONTYPE"),t=Blockly.JavaScript.valueToCode(this,"VEC3",Blockly.JavaScript.ORDER_NONE),n=Blockly.JavaScript.valueToCode(this,"ITEM",Blockly.JavaScript.ORDER_NONE);return["testforblock('block_id_"+this.id+"',createBlockPosFromVec3("+t+', "'+e+'"),'+n+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]},e.Blocks.craft_testforblocks={helpUrl:"",init:function(){this.setHSV(s,c,u),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockActionTestForBlocks())),this.appendValueInput("FROM_VEC3").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendTitle(new e.FieldLabel(_.from())).appendTitle(new e.FieldDropdown(T),"FROMPOSITIONTYPE"),this.appendValueInput("TO_VEC3").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendTitle(new e.FieldLabel(_.to())).appendTitle(new e.FieldDropdown(T),"TOPOSITIONTYPE"),this.appendValueInput("VEC3").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendTitle(new e.FieldLabel(_.destination())).appendTitle(new e.FieldDropdown(T),"POSITIONTYPE"),this.appendDummyInput().setAlign(Blockly.ALIGN_RIGHT).appendTitle(new e.FieldDropdown(B),"TESTMODE"),this.setOutput(!0,Blockly.BlockValueType.BOOLEAN)}},e.JavaScript.craft_testforblocks=function(){var e=this.getTitleValue("FROMPOSITIONTYPE"),t=Blockly.JavaScript.valueToCode(this,"FROM_VEC3",Blockly.JavaScript.ORDER_NONE),n=this.getTitleValue("TOPOSITIONTYPE"),o=Blockly.JavaScript.valueToCode(this,"TO_VEC3",Blockly.JavaScript.ORDER_NONE),i=this.getTitleValue("POSITIONTYPE"),a=Blockly.JavaScript.valueToCode(this,"VEC3",Blockly.JavaScript.ORDER_NONE),r=this.getTitleValue("TESTMODE");return["testforblocks('block_id_"+this.id+"',createBlockPosFromVec3("+t+', "'+e+'"),createBlockPosFromVec3('+o+', "'+n+'"),createBlockPosFromVec3('+a+', "'+i+"\"),'"+r+"')",Blockly.JavaScript.ORDER_FUNCTION_CALL]},e.Blocks.craft_clone={helpUrl:"",init:function(){this.setHSV(s,c,u),this.appendDummyInput().appendTitle(new e.FieldLabel(_.blockActionClone())),this.appendValueInput("FROM_VEC3").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendTitle(new e.FieldLabel(_.from())).appendTitle(new e.FieldDropdown(T),"FROMPOSITIONTYPE"),this.appendValueInput("TO_VEC3").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendTitle(new e.FieldLabel(_.to())).appendTitle(new e.FieldDropdown(T),"TOPOSITIONTYPE"),this.appendValueInput("VEC3").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendTitle(new e.FieldLabel(_.destination())).appendTitle(new e.FieldDropdown(T),"POSITIONTYPE"),this.appendDummyInput().appendTitle(new e.FieldLabel(_.maskMode())).appendTitle(new e.FieldDropdown(O),"MASKMODE"),this.appendDummyInput().appendTitle(new e.FieldLabel(_.cloneMode())).appendTitle(new e.FieldDropdown(D),"CLONEMODE"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_clone=function(){var e=this.getTitleValue("FROMPOSITIONTYPE"),t=Blockly.JavaScript.valueToCode(this,"FROM_VEC3",Blockly.JavaScript.ORDER_NONE),n=this.getTitleValue("TOPOSITIONTYPE"),o=Blockly.JavaScript.valueToCode(this,"TO_VEC3",Blockly.JavaScript.ORDER_NONE),i=this.getTitleValue("POSITIONTYPE"),a=Blockly.JavaScript.valueToCode(this,"VEC3",Blockly.JavaScript.ORDER_NONE),r=this.getTitleValue("MASKMODE"),l=this.getTitleValue("CLONEMODE");return"clone('block_id_"+this.id+"',createBlockPosFromVec3("+t+', "'+e+'"),createBlockPosFromVec3('+o+', "'+n+'"),createBlockPosFromVec3('+a+', "'+i+"\"),'"+r+"','"+l+"');"},e.Blocks.craft_clonefiltered={helpUrl:"",init:function(){this.setHSV(s,c,u),this.appendValueInput("ITEM").setCheck(b).setAlign(Blockly.ALIGN_RIGHT).appendTitle(new e.FieldLabel(_.blockActionCloneFiltered())),this.appendValueInput("FROM_VEC3").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendTitle(new e.FieldLabel(_.from())).appendTitle(new e.FieldDropdown(T),"FROMPOSITIONTYPE"),this.appendValueInput("TO_VEC3").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendTitle(new e.FieldLabel(_.to())).appendTitle(new e.FieldDropdown(T),"TOPOSITIONTYPE"),this.appendValueInput("VEC3").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendTitle(new e.FieldLabel(_.destination())).appendTitle(new e.FieldDropdown(T),"POSITIONTYPE"),this.appendDummyInput().appendTitle(new e.FieldLabel(_.cloneMode())).appendTitle(new e.FieldDropdown(D),"CLONEMODE"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},e.JavaScript.craft_clonefiltered=function(){var e=this.getTitleValue("FROMPOSITIONTYPE"),t=Blockly.JavaScript.valueToCode(this,"FROM_VEC3",Blockly.JavaScript.ORDER_NONE),n=this.getTitleValue("TOPOSITIONTYPE"),o=Blockly.JavaScript.valueToCode(this,"TO_VEC3",Blockly.JavaScript.ORDER_NONE),i=this.getTitleValue("POSITIONTYPE"),a=Blockly.JavaScript.valueToCode(this,"VEC3",Blockly.JavaScript.ORDER_NONE),r=this.getTitleValue("CLONEMODE"),l=Blockly.JavaScript.valueToCode(this,"ITEM",Blockly.JavaScript.ORDER_NONE);return"clonefiltered('block_id_"+this.id+"',createBlockPosFromVec3("+t+', "'+e+'"),createBlockPosFromVec3('+o+', "'+n+'"),createBlockPosFromVec3('+a+', "'+i+"\")}','"+r+"',"+l+");"},e.Blocks.craft_createblock={init:function(){this.setHSV(a,r,l),this.appendValueInput("BLOCKTYPE").setCheck(Blockly.JavaScript.STRING).appendTitle(new e.FieldLabel(_.blockType())),this.appendValueInput("BLOCKDATA").setCheck(Blockly.JavaScript.STRING).appendTitle(new e.FieldLabel(_.blockData())),this.setOutput(!0,b)}},e.JavaScript.craft_createblock=function(){var e=Blockly.JavaScript.valueToCode(this,"BLOCKTYPE",Blockly.JavaScript.ORDER_NONE),t=Blockly.JavaScript.valueToCode(this,"BLOCKDATA",Blockly.JavaScript.ORDER_NONE);return["item('block_id_"+this.id+"',"+e+","+t+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]},e.Blocks.craft_block={init:function(){this.setHSV(a,r,l),this.appendDummyInput().appendTitle(new e.FieldLabel(_.itemTypeBlock())).appendTitle(new e.FieldImageDropdown(v.default.blocks,32,32),"BLOCK"),this.setOutput(!0,b)}},e.JavaScript.craft_block=function(){var e=this.getTitleValue("BLOCK");return["item('block_id_"+this.id+"','"+y(e)+"','"+k(e)+"')",Blockly.JavaScript.ORDER_FUNCTION_CALL]},e.Blocks.craft_miscellaneous={init:function(){this.setHSV(a,r,l),this.appendDummyInput().appendTitle(new e.FieldLabel(_.itemTypeMiscellaneous())).appendTitle(new e.FieldImageDropdown(v.default.miscellaneous,32,32),"ITEM"),this.setOutput(!0,b)}},e.JavaScript.craft_miscellaneous=function(){var e=this.getTitleValue("ITEM");return["item('block_id_"+this.id+"','"+y(e)+"','"+k(e)+"')",Blockly.JavaScript.ORDER_FUNCTION_CALL]},e.Blocks.craft_decoration={init:function(){this.setHSV(a,r,l),this.appendDummyInput().appendTitle(new e.FieldLabel(_.itemTypeDecoration())).appendTitle(new e.FieldImageDropdown(v.default.decorations,32,32),"ITEM"),this.setOutput(!0,b)}},e.JavaScript.craft_decoration=function(){var e=this.getTitleValue("ITEM");return["item('block_id_"+this.id+"','"+y(e)+"','"+k(e)+"')",Blockly.JavaScript.ORDER_FUNCTION_CALL]},e.Blocks.craft_tool={init:function(){this.setHSV(a,r,l),this.appendDummyInput().appendTitle(new e.FieldLabel(_.itemTypeTool())).appendTitle(new e.FieldImageDropdown(v.default.tools,32,32),"ITEM"),this.setOutput(!0,b)}},e.JavaScript.craft_tool=function(){var e=this.getTitleValue("ITEM");return["item('block_id_"+this.id+"','"+y(e)+"','"+k(e)+"')",Blockly.JavaScript.ORDER_FUNCTION_CALL]},e.Blocks.craft_getnameof={init:function(){this.setHSV(a,r,l),this.appendValueInput("ITEM").setCheck(b).appendTitle(new e.FieldLabel(_.getnameof())),this.setOutput(!0,Blockly.JavaScript.STRING)}},e.JavaScript.craft_getnameof=function(){return[Blockly.JavaScript.valueToCode(this,"ITEM",Blockly.JavaScript.ORDER_NONE)+"['name']",Blockly.JavaScript.ORDER_FUNCTION_CALL]},e.Blocks.craft_getdataof={init:function(){this.setHSV(a,r,l),this.appendValueInput("ITEM").setCheck(b).appendTitle(new e.FieldLabel(_.getdataof())),this.setOutput(!0,Blockly.JavaScript.STRING)}},e.JavaScript.craft_getdataof=function(){return[Blockly.JavaScript.valueToCode(this,"ITEM",Blockly.JavaScript.ORDER_NONE)+"['data']",Blockly.JavaScript.ORDER_FUNCTION_CALL]}}},2965:function(Ge,qe,ze){var Je;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(a,i,e,p){"use strict";var r,l=["","webkit","Moz","MS","ms","o"],t=i.createElement("div"),n="function",s=Math.round,d=Math.abs,h=Date.now;function c(e,t,n){return setTimeout(_(e,n),t)}function o(e,t,n){return!!Array.isArray(e)&&(u(e,n[t],n),!0)}function u(e,t,n){var o;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==p)for(o=0;o<e.length;)t.call(n,e[o],o,e),o++;else for(o in e)e.hasOwnProperty(o)&&t.call(n,e[o],o,e)}function f(o,e,t){var i="DEPRECATED METHOD: "+e+"\n"+t+" AT \n";return function(){var e=new Error("get-stack-trace"),t=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",n=a.console&&(a.console.warn||a.console.log);return n&&n.call(a.console,i,t),o.apply(this,arguments)}}r="function"!=typeof Object.assign?function(e){if(e===p||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(o!==p&&null!==o)for(var i in o)o.hasOwnProperty(i)&&(t[i]=o[i])}return t}:Object.assign;var g=f(function(e,t,n){for(var o=Object.keys(t),i=0;i<o.length;)(!n||n&&e[o[i]]===p)&&(e[o[i]]=t[o[i]]),i++;return e},"extend","Use `assign`."),m=f(function(e,t){return g(e,t,!0)},"merge","Use `assign`.");function v(e,t,n){var o,i=t.prototype;(o=e.prototype=Object.create(i)).constructor=e,o._super=i,n&&r(o,n)}function _(e,t){return function(){return e.apply(t,arguments)}}function y(e,t){return typeof e==n?e.apply(t&&t[0]||p,t):e}function k(e,t){return e===p?t:e}function b(t,e,n){u(T(e),function(e){t.addEventListener(e,n,!1)})}function w(t,e,n){u(T(e),function(e){t.removeEventListener(e,n,!1)})}function S(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function C(e,t){return-1<e.indexOf(t)}function T(e){return e.trim().split(/\s+/g)}function P(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var o=0;o<e.length;){if(n&&e[o][n]==t||!n&&e[o]===t)return o;o++}return-1}function A(e){return Array.prototype.slice.call(e,0)}function E(e,n,t){for(var o=[],i=[],a=0;a<e.length;){var r=n?e[a][n]:e[a];P(i,r)<0&&o.push(e[a]),i[a]=r,a++}return t&&(o=n?o.sort(function(e,t){return e[n]>t[n]}):o.sort()),o}function B(e,t){for(var n,o,i=t[0].toUpperCase()+t.slice(1),a=0;a<l.length;){if((o=(n=l[a])?n+i:t)in e)return o;a++}return p}var O=1;function D(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||a}var R="ontouchstart"in a,I=B(a,"PointerEvent")!==p,M=R&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),F="touch",N=25,L=1,x=4,V=8,U=1,W=2,j=4,H=8,G=16,q=W|j,z=H|G,J=q|z,Y=["x","y"],X=["clientX","clientY"];function K(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){y(t.options.enable,[t])&&n.handler(e)},this.init()}function Z(e,t,n){var o=n.pointers.length,i=n.changedPointers.length,a=t&L&&o-i==0,r=t&(x|V)&&o-i==0;n.isFirst=!!a,n.isFinal=!!r,a&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,o=t.pointers,i=o.length;n.firstInput||(n.firstInput=Q(t));1<i&&!n.firstMultiple?n.firstMultiple=Q(t):1===i&&(n.firstMultiple=!1);var a=n.firstInput,r=n.firstMultiple,l=r?r.center:a.center,s=t.center=$(o);t.timeStamp=h(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=oe(l,s),t.distance=ne(l,s),function(e,t){var n=t.center,o=e.offsetDelta||{},i=e.prevDelta||{},a=e.prevInput||{};t.eventType!==L&&a.eventType!==x||(i=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},o=e.offsetDelta={x:n.x,y:n.y});t.deltaX=i.x+(n.x-o.x),t.deltaY=i.y+(n.y-o.y)}(n,t),t.offsetDirection=te(t.deltaX,t.deltaY);var c=ee(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=c.x,t.overallVelocityY=c.y,t.overallVelocity=d(c.x)>d(c.y)?c.x:c.y,t.scale=r?function(e,t){return ne(t[0],t[1],X)/ne(e[0],e[1],X)}(r.pointers,o):1,t.rotation=r?function(e,t){return oe(t[1],t[0],X)+oe(e[1],e[0],X)}(r.pointers,o):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,o,i,a,r=e.lastInterval||t,l=t.timeStamp-r.timeStamp;if(t.eventType!=V&&(N<l||r.velocity===p)){var s=t.deltaX-r.deltaX,c=t.deltaY-r.deltaY,u=ee(l,s,c);o=u.x,i=u.y,n=d(u.x)>d(u.y)?u.x:u.y,a=te(s,c),e.lastInterval=t}else n=r.velocity,o=r.velocityX,i=r.velocityY,a=r.direction;t.velocity=n,t.velocityX=o,t.velocityY=i,t.direction=a}(n,t);var u=e.element;S(t.srcEvent.target,u)&&(u=t.srcEvent.target);t.target=u}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function Q(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:s(e.pointers[n].clientX),clientY:s(e.pointers[n].clientY)},n++;return{timeStamp:h(),pointers:t,center:$(t),deltaX:e.deltaX,deltaY:e.deltaY}}function $(e){var t=e.length;if(1===t)return{x:s(e[0].clientX),y:s(e[0].clientY)};for(var n=0,o=0,i=0;i<t;)n+=e[i].clientX,o+=e[i].clientY,i++;return{x:s(n/t),y:s(o/t)}}function ee(e,t,n){return{x:t/e||0,y:n/e||0}}function te(e,t){return e===t?U:d(e)>=d(t)?e<0?W:j:t<0?H:G}function ne(e,t,n){var o=t[(n=n||Y)[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(o*o+i*i)}function oe(e,t,n){var o=t[(n=n||Y)[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,o)/Math.PI}K.prototype={handler:function(){},init:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(D(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(D(this.element),this.evWin,this.domHandler)}};var ie={mousedown:L,mousemove:2,mouseup:x},ae="mousedown",re="mousemove mouseup";function le(){this.evEl=ae,this.evWin=re,this.pressed=!1,K.apply(this,arguments)}v(le,K,{handler:function(e){var t=ie[e.type];t&L&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=x),this.pressed&&(t&x&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var se={pointerdown:L,pointermove:2,pointerup:x,pointercancel:V,pointerout:V},ce={2:F,3:"pen",4:"mouse",5:"kinect"},ue="pointerdown",pe="pointermove pointerup pointercancel";function de(){this.evEl=ue,this.evWin=pe,K.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}a.MSPointerEvent&&!a.PointerEvent&&(ue="MSPointerDown",pe="MSPointerMove MSPointerUp MSPointerCancel"),v(de,K,{handler:function(e){var t=this.store,n=!1,o=e.type.toLowerCase().replace("ms",""),i=se[o],a=ce[e.pointerType]||e.pointerType,r=a==F,l=P(t,e.pointerId,"pointerId");i&L&&(0===e.button||r)?l<0&&(t.push(e),l=t.length-1):i&(x|V)&&(n=!0),l<0||(t[l]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:a,srcEvent:e}),n&&t.splice(l,1))}});var he={touchstart:L,touchmove:2,touchend:x,touchcancel:V};function fe(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,K.apply(this,arguments)}v(fe,K,{handler:function(e){var t=he[e.type];if(t===L&&(this.started=!0),this.started){var n=function(e,t){var n=A(e.touches),o=A(e.changedTouches);t&(x|V)&&(n=E(n.concat(o),"identifier",!0));return[n,o]}.call(this,e,t);t&(x|V)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:F,srcEvent:e})}}});var ge={touchstart:L,touchmove:2,touchend:x,touchcancel:V},me="touchstart touchmove touchend touchcancel";function ve(){this.evTarget=me,this.targetIds={},K.apply(this,arguments)}v(ve,K,{handler:function(e){var t=ge[e.type],n=function(e,t){var n=A(e.touches),o=this.targetIds;if(t&(2|L)&&1===n.length)return o[n[0].identifier]=!0,[n,n];var i,a,r=A(e.changedTouches),l=[],s=this.target;if(a=n.filter(function(e){return S(e.target,s)}),t===L)for(i=0;i<a.length;)o[a[i].identifier]=!0,i++;i=0;for(;i<r.length;)o[r[i].identifier]&&l.push(r[i]),t&(x|V)&&delete o[r[i].identifier],i++;return l.length?[E(a.concat(l),"identifier",!0),l]:void 0}.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:F,srcEvent:e})}});var _e=2500;function ye(){K.apply(this,arguments);var e=_(this.handler,this);this.touch=new ve(this.manager,e),this.mouse=new le(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function ke(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var o=this.lastTouches;setTimeout(function(){var e=o.indexOf(n);-1<e&&o.splice(e,1)},_e)}}v(ye,K,{handler:function(e,t,n){var o=n.pointerType==F,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(o)(function(e,t){e&L?(this.primaryTouch=t.changedPointers[0].identifier,ke.call(this,t)):e&(x|V)&&ke.call(this,t)}).call(this,t,n);else if(i&&function(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,o=0;o<this.lastTouches.length;o++){var i=this.lastTouches[o],a=Math.abs(t-i.x),r=Math.abs(n-i.y);if(a<=25&&r<=25)return!0}return!1}.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var be=B(t.style,"touchAction"),we=be!==p,Se="manipulation",Ce="none",Te="pan-x",Pe="pan-y",Ae=function(){if(!we)return!1;var t={},n=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(e){t[e]=!n||a.CSS.supports("touch-action",e)}),t}();function Ee(e,t){this.manager=e,this.set(t)}Ee.prototype={set:function(e){"compute"==e&&(e=this.compute()),we&&this.manager.element.style&&Ae[e]&&(this.manager.element.style[be]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return u(this.manager.recognizers,function(e){y(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(e){if(C(e,Ce))return Ce;var t=C(e,Te),n=C(e,Pe);if(t&&n)return Ce;if(t||n)return t?Te:Pe;if(C(e,Se))return Se;return"auto"}(t.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var o=this.actions,i=C(o,Ce)&&!Ae.none,a=C(o,Pe)&&!Ae[Pe],r=C(o,Te)&&!Ae[Te];if(i){var l=1===e.pointers.length,s=e.distance<2,c=e.deltaTime<250;if(l&&s&&c)return}if(!r||!a)return i||a&&n&q||r&&n&z?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Be=1;function Oe(e){this.options=r({},this.defaults,e||{}),this.id=O++,this.manager=null,this.options.enable=k(this.options.enable,!0),this.state=Be,this.simultaneous={},this.requireFail=[]}function De(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function Re(e){return e==G?"down":e==H?"up":e==W?"left":e==j?"right":""}function Ie(e,t){var n=t.manager;return n?n.get(e):e}function Me(){Oe.apply(this,arguments)}function Fe(){Me.apply(this,arguments),this.pX=null,this.pY=null}function Ne(){Me.apply(this,arguments)}function Le(){Oe.apply(this,arguments),this._timer=null,this._input=null}function xe(){Me.apply(this,arguments)}function Ve(){Me.apply(this,arguments)}function Ue(){Oe.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function We(e,t){return(t=t||{}).recognizers=k(t.recognizers,We.defaults.preset),new je(e,t)}Oe.prototype={defaults:{},set:function(e){return r(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(o(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Ie(e,this)).id]||(t[e.id]=e).recognizeWith(this),this},dropRecognizeWith:function(e){return o(e,"dropRecognizeWith",this)||(e=Ie(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(o(e,"requireFailure",this))return this;var t=this.requireFail;return-1===P(t,e=Ie(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(o(e,"dropRequireFailure",this))return this;e=Ie(e,this);var t=P(this.requireFail,e);return-1<t&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(t){var n=this,e=this.state;function o(e){n.manager.emit(e,t)}e<8&&o(n.options.event+De(e)),o(n.options.event),t.additionalEvent&&o(t.additionalEvent),8<=e&&o(n.options.event+De(e))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|Be)))return!1;e++}return!0},recognize:function(e){var t=r({},e);if(!y(this.options.enable,[this,t]))return this.reset(),void(this.state=32);56&this.state&&(this.state=Be),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},v(Me,Oe,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,o=6&t,i=this.attrTest(e);return o&&(n&V||!i)?16|t:o||i?n&x?8|t:2&t?4|t:2:32}}),v(Fe,Me,{defaults:{event:"pan",threshold:10,pointers:1,direction:J},getTouchAction:function(){var e=this.options.direction,t=[];return e&q&&t.push(Pe),e&z&&t.push(Te),t},directionTest:function(e){var t=this.options,n=!0,o=e.distance,i=e.direction,a=e.deltaX,r=e.deltaY;return i&t.direction||(o=t.direction&q?(i=0===a?U:a<0?W:j,n=a!=this.pX,Math.abs(e.deltaX)):(i=0===r?U:r<0?H:G,n=r!=this.pY,Math.abs(e.deltaY))),e.direction=i,n&&o>t.threshold&&i&t.direction},attrTest:function(e){return Me.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Re(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),v(Ne,Me,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ce]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),v(Le,Oe,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,o=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!o||!n||e.eventType&(x|V)&&!i)this.reset();else if(e.eventType&L)this.reset(),this._timer=c(function(){this.state=8,this.tryEmit()},t.time,this);else if(e.eventType&x)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&e.eventType&x?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=h(),this.manager.emit(this.options.event,this._input)))}}),v(xe,Me,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ce]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),v(Ve,Me,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:q|z,pointers:1},getTouchAction:function(){return Fe.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(q|z)?t=e.overallVelocity:n&q?t=e.overallVelocityX:n&z&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&d(t)>this.options.velocity&&e.eventType&x},emit:function(e){var t=Re(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),v(Ue,Oe,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Se]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,o=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),e.eventType&L&&0===this.count)return this.failTimeout();if(o&&i&&n){if(e.eventType!=x)return this.failTimeout();var a=!this.pTime||e.timeStamp-this.pTime<t.interval,r=!this.pCenter||ne(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,r&&a?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=c(function(){this.state=8,this.tryEmit()},t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=c(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),We.VERSION="2.0.7",We.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[xe,{enable:!1}],[Ne,{enable:!1},["rotate"]],[Ve,{direction:q}],[Fe,{direction:q},["swipe"]],[Ue],[Ue,{event:"doubletap",taps:2},["tap"]],[Le]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function je(e,t){this.options=r({},We.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=function(e){var t=e.options.inputClass;return new(t||(I?de:M?ve:R?ye:le))(e,Z)}(this),this.touchAction=new Ee(this,this.options.touchAction),He(this,!0),u(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function He(n,o){var i,a=n.element;a.style&&(u(n.options.cssProps,function(e,t){i=B(a.style,t),o?(n.oldCssProps[i]=a.style[i],a.style[i]=e):a.style[i]=n.oldCssProps[i]||""}),o||(n.oldCssProps={}))}je.prototype={set:function(e){return r(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var o=this.recognizers,i=t.curRecognizer;(!i||i&&8&i.state)&&(i=t.curRecognizer=null);for(var a=0;a<o.length;)n=o[a],2===t.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&14&n.state&&(i=t.curRecognizer=n),a++}},get:function(e){if(e instanceof Oe)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(o(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),(e.manager=this).touchAction.update(),e},remove:function(e){if(o(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=P(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==p&&t!==p){var n=this.handlers;return u(T(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==p){var n=this.handlers;return u(T(e),function(e){t?n[e]&&n[e].splice(P(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=i.createEvent("Event");n.initEvent(e,!0,!0),(n.gesture=t).target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var o=0;o<n.length;)n[o](t),o++}},destroy:function(){this.element&&He(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},r(We,{INPUT_START:L,INPUT_MOVE:2,INPUT_END:x,INPUT_CANCEL:V,STATE_POSSIBLE:Be,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:U,DIRECTION_LEFT:W,DIRECTION_RIGHT:j,DIRECTION_UP:H,DIRECTION_DOWN:G,DIRECTION_HORIZONTAL:q,DIRECTION_VERTICAL:z,DIRECTION_ALL:J,Manager:je,Input:K,TouchAction:Ee,TouchInput:ve,MouseInput:le,PointerEventInput:de,TouchMouseInput:ye,SingleTouchInput:fe,Recognizer:Oe,AttrRecognizer:Me,Tap:Ue,Pan:Fe,Swipe:Ve,Pinch:Ne,Rotate:xe,Press:Le,on:b,off:w,each:u,merge:m,extend:g,assign:r,inherit:v,bindFn:_,prefixed:B}),(void 0!==a?a:"undefined"!=typeof self?self:{}).Hammer=We,(Je=function(){return We}.call(qe,ze,qe,Ge))===p||(Ge.exports=Je)}(window,document)},2966:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _jquery=__webpack_require__(9),_jquery2=_interopRequireDefault(_jquery),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(7),_reactDom2=_interopRequireDefault(_reactDom),_hammerjs=__webpack_require__(2965),_hammerjs2=_interopRequireDefault(_hammerjs),_trackEvent=__webpack_require__(125),_trackEvent2=_interopRequireDefault(_trackEvent),_utils=__webpack_require__(11),_StudioApp=__webpack_require__(240),_locale=__webpack_require__(2541),_locale2=_interopRequireDefault(_locale),_CustomMarshalingInterpreter=__webpack_require__(914),_CustomMarshalingInterpreter2=_interopRequireDefault(_CustomMarshalingInterpreter),_craft=__webpack_require__(2521),_dom=__webpack_require__(145),_dom2=_interopRequireDefault(_dom),_MusicController=__webpack_require__(2631),_MusicController2=_interopRequireDefault(_MusicController),_reactRedux=__webpack_require__(8),_AppView=__webpack_require__(1794),_AppView2=_interopRequireDefault(_AppView),_CraftVisualizationColumn=__webpack_require__(3298),_CraftVisualizationColumn2=_interopRequireDefault(_CraftVisualizationColumn),_redux=__webpack_require__(51),_Sounds=__webpack_require__(365),_Sounds2=_interopRequireDefault(_Sounds),_constants=__webpack_require__(46),_thumbnail=__webpack_require__(1618),_currentUserRedux=__webpack_require__(332);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var MEDIA_URL="/blockly/media/craft/",ArrowIds={LEFT:"leftButton",UP:"upButton",RIGHT:"rightButton",DOWN:"downButton"},interfaceImages={DEFAULT:[MEDIA_URL+"Sliced_Parts/MC_Loading_Spinner.gif",MEDIA_URL+"Sliced_Parts/Frame_Large_Plus_Logo.png",MEDIA_URL+"Sliced_Parts/Pop_Up_Slice.png",MEDIA_URL+"Sliced_Parts/X_Button.png",MEDIA_URL+"Sliced_Parts/Button_Grey_Slice.png",MEDIA_URL+"Sliced_Parts/Run_Button_Up_Slice.png",MEDIA_URL+"Sliced_Parts/MC_Run_Arrow_Icon_Smaller.png",MEDIA_URL+"Sliced_Parts/Run_Button_Down_Slice.png",MEDIA_URL+"Sliced_Parts/Reset_Button_Up_Slice.png",MEDIA_URL+"Sliced_Parts/MC_Reset_Arrow_Icon.png",MEDIA_URL+"Sliced_Parts/Reset_Button_Down_Slice.png",MEDIA_URL+"Sliced_Parts/Callout_Tail.png"],1:[MEDIA_URL+"Sliced_Parts/Steve_Character_Select.png",MEDIA_URL+"Sliced_Parts/Alex_Character_Select.png",MEDIA_URL+"Sliced_Parts/Agent_Fail.png",MEDIA_URL+"Sliced_Parts/Agent_Neutral.png",MEDIA_URL+"Sliced_Parts/Agent_Success.png"]},MUSIC_METADATA=[{volume:1,hasOgg:!0,name:"vignette1"},{volume:1,hasOgg:!0,name:"vignette2-quiet"},{volume:1,hasOgg:!0,name:"vignette3"},{volume:1,hasOgg:!0,name:"vignette4-intro"},{volume:1,hasOgg:!0,name:"vignette5-shortpiano"},{volume:1,hasOgg:!0,name:"vignette7-funky-chirps-short"},{volume:1,hasOgg:!0,name:"vignette8-free-play"},{volume:1,hasOgg:!0,name:"nether2"}],CHARACTER_STEVE="Steve",CHARACTER_ALEX="Alex",DEFAULT_CHARACTER=CHARACTER_STEVE,directionToFacing={upButton:_craft.FacingDirection.North,downButton:_craft.FacingDirection.South,leftButton:_craft.FacingDirection.West,rightButton:_craft.FacingDirection.East},Craft=function(){function Craft(){_classCallCheck(this,Craft)}return Craft.init=function(l){1===l.level.puzzle_number&&1===l.level.stage_total&&(l.level.puzzle_number=999),l.level.isTestLevel&&(l.level.customSlowMotion=.1),l.level.disableFinalStageMessage=!0,l.showInstructionsInTopPane=!0;var e=document.documentMode;e&&(0,_jquery2.default)("body").addClass("ieVersion"+e),l.level.isAgentLevel&&(0,_jquery2.default)("body").addClass("minecraft-agent");var t=document.body;t.className=t.className+" minecraft",l.level.afterVideoBeforeInstructionsFn=function(t){Craft.beginBackgroundMusic(),l.level.showPopupOnLoad?"playerSelection"===l.level.showPopupOnLoad&&Craft.showPlayerSelectionPopup(function(e){(0,_trackEvent2.default)("Minecraft","ChoseCharacter",e),Craft.clearPlayerState(),(0,_utils.trySetLocalStorage)("craftSelectedPlayer",e),Craft.initializeAppLevel(l.level),t()}):t()},Craft.initialConfig=l,(0,_StudioApp.singleton)().reset=Craft.reset.bind(Craft),(0,_StudioApp.singleton)().runButtonClick=Craft.runButtonClick.bind(Craft),(0,_StudioApp.singleton)().setCheckForEmptyBlocks(!0),Craft.level=l.level,Craft.skin=l.skin;var n=[];Craft.level.songs&&MUSIC_METADATA&&(n=MUSIC_METADATA.filter(function(e){return-1!==Craft.level.songs.indexOf(e.name)})),Craft.musicController=new _MusicController2.default(_Sounds2.default.getSingleton(),function(e){return l.skin.assetUrl("music/"+e)},n,1<n.length?7500:null),l.skin.staticAvatar=MEDIA_URL+"Sliced_Parts/Agent_Neutral.png",l.skin.smallStaticAvatar=MEDIA_URL+"Sliced_Parts/Agent_Neutral.png",l.skin.failureAvatar=MEDIA_URL+"Sliced_Parts/Agent_Fail.png",l.skin.winAvatar=MEDIA_URL+"Sliced_Parts/Agent_Success.png";(0,_StudioApp.singleton)().setPageConstants(l,{isMinecraft:!0,hideRunButton:"agentSpawn"===l.level.specialLevelType}),_reactDom2.default.render(_react2.default.createElement(_reactRedux.Provider,{store:(0,_redux.getStore)()},_react2.default.createElement(_AppView2.default,{visualizationColumn:_react2.default.createElement(_CraftVisualizationColumn2.default,{showFinishButton:!l.level.isProjectLevel}),onMount:function(){(0,_StudioApp.singleton)().init(Object.assign({},l,{forceInsertTopBlock:"when_run",appStrings:{generatedCodeDescription:_locale2.default.generatedCodeDescription()},loadAudio:function(){},afterInject:function(){var e;l.level.showMovementBanner&&(0,_StudioApp.singleton)().displayWorkspaceAlert("warning",_react2.default.createElement("div",null,_locale2.default.useArrowKeys()));var t=parseFloat((location.search.split("customSlowMotion=")[1]||"").split("&")[0]);Craft.gameController=new _craft.GameController({Phaser:window.Phaser,containerId:"phaser-game",assetRoot:Craft.skin.assetUrl(""),audioPlayer:{register:(0,_StudioApp.singleton)().registerAudio.bind((0,_StudioApp.singleton)()),play:(0,_StudioApp.singleton)().playAudio.bind((0,_StudioApp.singleton)())},debug:!1,customSlowMotion:l.level.isTestLevel?.5:t,earlyLoadAssetPacks:Craft.earlyLoadAssetsForLevel(l.level.puzzle_number),afterAssetsLoaded:function(){window.addEventListener("displayHintPath",function(e){Craft.gameController.levelView.drawHintPath(e.detail)}),window.addEventListener("craftCollectibleCollected",function(e){"diamondMiniblock"===e.blockType&&Craft.setSessionDiamondCollected()}),Craft.musicController.preload()},earlyLoadNiceToHaveAssetPacks:Craft.niceToHaveAssetsForLevel(l.level.puzzle_number)}),l.level.showPopupOnLoad||Craft.initializeAppLevel(l.level),(0,_StudioApp.singleton)().hideSource&&(document.getElementById("visualizationColumn").style.width=this.nativeVizWidth+"px");for(var n in ArrowIds)_dom2.default.addMouseUpTouchEvent(document.getElementById(ArrowIds[n]),function(e){return function(){Craft.onArrowButtonUp(ArrowIds[e])}}(n)),_dom2.default.addMouseDownTouchEvent(document.getElementById(ArrowIds[n]),function(t){return function(e){Craft.onArrowButtonDown(e,ArrowIds[t])}}(n));_dom2.default.addMouseUpTouchEvent(document,Craft.onDocumentMouseUp,!1),(0,_jquery2.default)("#soft-buttons").removeClass("soft-buttons-none").addClass("soft-buttons-4"),(0,_jquery2.default)(".arrow").prop("disabled",!1);var o=document.getElementById("resetButton");_dom2.default.addClickTouchEvent(o,Craft.resetButtonClick);var i=document.getElementById("phaser-game"),a=(_defineProperty(e={},_hammerjs2.default.DIRECTION_LEFT,"leftButton"),_defineProperty(e,_hammerjs2.default.DIRECTION_RIGHT,"rightButton"),_defineProperty(e,_hammerjs2.default.DIRECTION_UP,"upButton"),_defineProperty(e,_hammerjs2.default.DIRECTION_DOWN,"downButton"),e),r=new _hammerjs2.default.Manager(i);r.add(new _hammerjs2.default.Pan({direction:_hammerjs2.default.DIRECTION_ALL})),r.add(new _hammerjs2.default.Press({time:150})),r.add(new _hammerjs2.default.Tap),r.on("pan",function(e){a[e.direction]&&Craft.gameController.codeOrgAPI.arrowDown(directionToFacing[a[e.direction]]),e.preventDefault()}),r.on("panend pancancel",function(e){a[e.direction]&&Craft.gameController.codeOrgAPI.arrowUp(directionToFacing[a[e.direction]]),e.preventDefault()}),r.on("press",function(){return Craft.gameController.codeOrgAPI.clickDown(function(){})}),r.on("tap",function(){Craft.gameController.codeOrgAPI.clickDown(function(){}),Craft.gameController.codeOrgAPI.clickUp(function(){})}),r.on("pressup",function(){return Craft.gameController.codeOrgAPI.clickUp(function(){})})},twitter:{text:"Share on Twitter",hashtag:"Craft"}}));var e=[];e=e.concat(interfaceImages.DEFAULT),l.level.puzzle_number&&interfaceImages[l.level.puzzle_number]&&(e=e.concat(interfaceImages[l.level.puzzle_number])),e.forEach(function(e){(new Image).src=e});var t=(0,_jquery2.default)(".mc-share-button");t.length&&_dom2.default.addClickTouchEvent(t[0],function(){Craft.reportResult(!0)})}})),document.getElementById(l.containerId))},Craft.beginBackgroundMusic=function(){_Sounds2.default.getSingleton().whenAudioUnlocked(function(){var e=Craft.level.songs&&1<Craft.level.songs.length?Craft.level.songs[0]:null;Craft.musicController.play(e)})},Craft.onArrowButtonDown=function(e,t){Craft.gameController.codeOrgAPI.arrowDown(directionToFacing[t]),e.preventDefault()},Craft.onArrowButtonUp=function(e){Craft.gameController.codeOrgAPI.arrowUp(directionToFacing[e])},Craft.onDocumentMouseUp=function(){if(Craft.phaserLoaded()&&Craft.levelInitialized())for(var e in directionToFacing)Craft.gameController.codeOrgAPI.arrowUp(directionToFacing[e])},Craft.characterAssetPackName=function(e){return"player"+e},Craft.getCurrentCharacter=function(){return window.localStorage.getItem("craftSelectedPlayer")||DEFAULT_CHARACTER},Craft.getSessionDiamondCollectedLevels=function(){return JSON.parse((0,_utils.tryGetLocalStorage)("craftSessionDiamondCollectedLevels","[]"))||[]},Craft.setSessionDiamondCollected=function(){var e=Craft.getSessionDiamondCollectedLevels();return!e.includes(Craft.initialConfig.serverLevelId)&&(e.push(Craft.initialConfig.serverLevelId),(0,_utils.trySetLocalStorage)("craftSessionDiamondCollectedLevels",JSON.stringify(e)),!0)},Craft.showPlayerSelectionPopup=function(e){var t=DEFAULT_CHARACTER,n=document.createElement("div");n.innerHTML=__webpack_require__(3299)({image:(0,_StudioApp.singleton)().assetUrl()});var o=(0,_StudioApp.singleton)().createModalDialog({contentDiv:n,defaultBtnSelector:"#choose-steve",onHidden:function(){e(t)},id:"craft-popup-player-selection"});_dom2.default.addClickTouchEvent((0,_jquery2.default)("#close-character-select")[0],function(){o.hide()}),_dom2.default.addClickTouchEvent((0,_jquery2.default)("#choose-steve")[0],function(){t=CHARACTER_STEVE,(0,_trackEvent2.default)("MinecraftAgent","ClickedCharacter",t),o.hide()}),_dom2.default.addClickTouchEvent((0,_jquery2.default)("#choose-alex")[0],function(){t=CHARACTER_ALEX,(0,_trackEvent2.default)("MinecraftAgent","ClickedCharacter",t),o.hide()}),o.show()},Craft.clearPlayerState=function(){window.localStorage.removeItem("craftSelectedPlayer")},Craft.initializeAppLevel=function initializeAppLevel(levelConfig){_craft.utils.convertActionPlaneEntitiesToConfig(levelConfig);for(var fluffPlane=[],i=0;i<(levelConfig.gridWidth||10)*(levelConfig.gridHeight||10);i++)fluffPlane.push("");var levelAssetPacks={beforeLoad:Craft.minAssetsForLevelWithCharacter(levelConfig.puzzle_number),afterLoad:Craft.afterLoadAssetsForLevel(levelConfig.puzzle_number)};Craft.gameController.loadLevel({isDaytime:levelConfig.isDaytime,groundPlane:levelConfig.groundPlane,groundDecorationPlane:levelConfig.groundDecorationPlane,actionPlane:levelConfig.actionPlane,fluffPlane:fluffPlane,entities:levelConfig.entities,useAgent:!!levelConfig.agentStartPosition,usePlayer:!!levelConfig.playerStartPosition,playerStartPosition:levelConfig.playerStartPosition,playerStartDirection:levelConfig.playerStartDirection,agentStartPosition:levelConfig.agentStartPosition,agentStartDirection:levelConfig.agentStartDirection,playerName:Craft.getCurrentCharacter(),assetPacks:levelAssetPacks,specialLevelType:levelConfig.specialLevelType,isAgentLevel:levelConfig.isAgentLevel,gridDimensions:levelConfig.gridWidth&&levelConfig.gridHeight?[levelConfig.gridWidth,levelConfig.gridHeight]:null,levelVerificationTimeout:levelConfig.levelVerificationTimeout,verificationFunction:eval("["+levelConfig.verificationFunction+"]")[0],failureCheckFunction:eval("["+levelConfig.failureCheckFunction+"]")[0],timeoutResult:eval("["+(levelConfig.timeoutVerificationFunction||"function() { return false; }")+"]")[0]})},Craft.minAssetsForLevelWithCharacter=function(e){return Craft.minAssetsForLevelNumber(e).concat([Craft.characterAssetPackName(Craft.getCurrentCharacter())])},Craft.minAssetsForLevelNumber=function(e){return["heroAllAssetsMinusPlayer","playerAgent"]},Craft.afterLoadAssetsForLevel=function(e){return["heroAllAssetsMinusPlayer","playerAgent"]},Craft.earlyLoadAssetsForLevel=function(e){return Craft.minAssetsForLevelWithCharacter(e)},Craft.niceToHaveAssetsForLevel=function(e){switch(e){case 1:return["playerSteve","playerAlex"];default:return["heroAllAssetsMinusPlayer"]}},Craft.reset=function(e){e||((0,_thumbnail.captureThumbnailFromCanvas)((0,_jquery2.default)("#minecraft-frame canvas")[0]),Craft.gameController.codeOrgAPI.resetAttempt())},Craft.phaserLoaded=function(){return Craft.gameController&&Craft.gameController.game&&Craft.gameController.game.load&&!Craft.gameController.game.load.isLoading},Craft.levelInitialized=function(){return Craft.gameController&&Craft.gameController.levelModel},Craft.resetButtonClick=function(){(0,_jquery2.default)(".arrow").prop("disabled",!1)},Craft.isPreAnimationFailure=function(e){switch(e){case _constants.TestResults.QUESTION_MARKS_IN_NUMBER_FIELD:case _constants.TestResults.EMPTY_FUNCTIONAL_BLOCK:case _constants.TestResults.EXTRA_TOP_BLOCKS_FAIL:case _constants.TestResults.EXAMPLE_FAILED:case _constants.TestResults.EMPTY_BLOCK_FAIL:case _constants.TestResults.EMPTY_FUNCTION_NAME:return!0;default:return!1}},Craft.runButtonClick=function(){if(Craft.phaserLoaded()&&((0,_StudioApp.singleton)().toggleRunReset("reset"),Blockly.mainBlockSpace.traceOn(!0),(0,_StudioApp.singleton)().attempts++,Craft.executeUserCode(),Craft.level.freePlay&&!(0,_StudioApp.singleton)().hideSource)){var e=(0,_jquery2.default)("#right-button-cell");if(e.length&&!e.hasClass("right-button-cell-enabled")){e.addClass("right-button-cell-enabled"),(0,_StudioApp.singleton)().onResize();var t=document.createEvent("Event");t.initEvent("finishButtonShown",!0,!0),document.dispatchEvent(t)}}},Craft.executeUserCode=function(){if(Craft.initialConfig.level.edit_blocks)Craft.reportResult(!0);else{var e=(0,_StudioApp.singleton)().getTestResults(!1);if(Craft.isPreAnimationFailure(e))Craft.reportResult(!1);else{(0,_StudioApp.singleton)().playAudio("start"),Blockly.mainBlockSpace.traceOn(!0);var i=Craft.gameController.codeOrgAPI;i.startCommandCollection(),i.registerEventCallback(null,function(e){e.eventType===_craft.EventType.WhenUsed&&"sheep"===e.targetType&&i.drop(null,"wool",e.targetIdentifier),e.eventType===_craft.EventType.WhenTouched&&"creeper"===e.targetType&&(i.flashEntity(null,e.targetIdentifier),i.explodeEntity(null,e.targetIdentifier))});var t,n=Blockly.mainBlockSpace.getTopBlocks(!0);(0,_StudioApp.singleton)().initializationBlocks&&(n=(0,_StudioApp.singleton)().initializationBlocks.concat(n)),t=Blockly.Generator.blocksToCode("JavaScript",n),_CustomMarshalingInterpreter2.default.evalWith(t,{moveForward:function(e){i.moveForward((0,_StudioApp.singleton)().highlight.bind((0,_StudioApp.singleton)(),e),"PlayerAgent")},moveBackward:function(e){i.moveBackward((0,_StudioApp.singleton)().highlight.bind((0,_StudioApp.singleton)(),e),"PlayerAgent")},turnLeft:function(e){i.turnLeft((0,_StudioApp.singleton)().highlight.bind((0,_StudioApp.singleton)(),e),"PlayerAgent")},turnRight:function(e){i.turnRight((0,_StudioApp.singleton)().highlight.bind((0,_StudioApp.singleton)(),e),"PlayerAgent")},destroyBlock:function(e){i.destroyBlock((0,_StudioApp.singleton)().highlight.bind((0,_StudioApp.singleton)(),e),"PlayerAgent")},ifLavaAhead:function(e,t){i.ifBlockAhead((0,_StudioApp.singleton)().highlight.bind((0,_StudioApp.singleton)(),t),"lava","PlayerAgent",e)},ifBlockAhead:function(e,t,n){i.ifBlockAhead((0,_StudioApp.singleton)().highlight.bind((0,_StudioApp.singleton)(),n),e,"PlayerAgent",t)},placeBlock:function(e,t){i.placeBlock((0,_StudioApp.singleton)().highlight.bind((0,_StudioApp.singleton)(),t),e,"PlayerAgent")},placeDirection:function(e,t,n){i.placeDirection((0,_StudioApp.singleton)().highlight.bind((0,_StudioApp.singleton)(),n),e,"PlayerAgent",t)},moveDirection:function(e,t,n){var o={up:_craft.FacingDirection.North,down:_craft.FacingDirection.South,left:_craft.FacingDirection.West,right:_craft.FacingDirection.East};i.moveDirection((0,_StudioApp.singleton)().highlight.bind((0,_StudioApp.singleton)(),n),o[e],t)}}),Craft.gameController.codeOrgAPI.startAttempt(function(e){Craft.level.freePlay||Craft.reportResult(e)})}}},Craft.getTestResultFrom=function(e,t){return t===_constants.TestResults.LEVEL_INCOMPLETE_FAIL?_constants.TestResults.APP_SPECIFIC_FAIL:Craft.initialConfig.level.freePlay?_constants.TestResults.FREE_PLAY:t},Craft.reportResult=function(e){var t=(0,_StudioApp.singleton)().getTestResults(e),o=Craft.getTestResultFrom(e,t),i=Craft.initialConfig.level.freePlay?Craft.gameController.getScreenshot():null,n=i?encodeURIComponent(i.split(",")[1]):null,a=void 0;if(o===_constants.TestResults.APP_SPECIFIC_FAIL)a=_locale2.default.agentGenericFailureMessage();else if(o===_constants.TestResults.TOO_FEW_BLOCKS_FAIL)a=_locale2.default.agentTooFewBlocksFailureMessage();else if(o===_constants.TestResults.ALL_PASS){var r=Craft.getSessionDiamondCollectedLevels();r.includes(Craft.initialConfig.serverLevelId)&&(a=_locale2.default.agentDiamondPathCongrats({count:r.length}))}(0,_StudioApp.singleton)().report({app:"craft",level:Craft.initialConfig.level.id,result:!!Craft.initialConfig.level.freePlay||e,testResult:o,image:n,program:encodeURIComponent(Blockly.Xml.domToText(Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace))),onComplete:function(e){var t=Craft.initialConfig.level.freePlay;t&&e.level_source&&(0,_utils.trySetLocalStorage)("craftHeroShareLink",e.level_source);var n=(0,_redux.getStore)().getState().currentUser.signInState===_currentUserRedux.SignInState.SignedIn;(0,_StudioApp.singleton)().displayFeedback({feedbackType:o,response:e,level:Craft.initialConfig.level,defaultToContinue:Craft.shouldDefaultToContinue(o),message:a,appStrings:{reinfFeedbackMsg:_locale2.default.reinfFeedbackMsg(),nextLevelMsg:_locale2.default.nextLevelMsg({puzzleNumber:Craft.initialConfig.level.puzzle_number}),tooManyBlocksFailMsgFunction:_locale2.default.tooManyBlocksFail,generatedCodeDescription:_locale2.default.generatedCodeDescription()},feedbackImage:i,showingSharing:t,saveToProjectGallery:!0,disableSaveToGallery:!n})}})},Craft.shouldDefaultToContinue=function(e){var t=e===_constants.TestResults.FREE_PLAY;return e>_constants.TestResults.APP_SPECIFIC_ACCEPTABLE_FAIL&&!t},Craft}();exports.default=Craft,module.exports=exports.default},3296:function(e,t,n){"use strict";var o=n(820);t.load=function(e,t){return o.load(e,t)}},3297:function(e,t,n){"use strict";var o=n(820);t.load=function(e,t){return o.load(e,t)}},3298:function(e,t,n){"use strict";var o=l(n(0)),i=l(n(1)),a=l(n(1764)),r=l(n(762));function l(e){return e&&e.__esModule?e:{default:e}}function s(e){return i.default.createElement("span",null,i.default.createElement(r.default,null,i.default.createElement("div",{id:"minecraft-frame"},i.default.createElement("div",{id:"phaser-game"}))),i.default.createElement(u,null,i.default.createElement(a.default,null),e.showFinishButton&&i.default.createElement("div",{id:"right-button-cell"},i.default.createElement("button",{type:"button",id:"finishButton",className:"share mc-share-button"},i.default.createElement("div",null,c.finish())))),i.default.createElement(p,null))}var c=n(5),u=n(1074).default,p=n(1116);s.propTypes={showFinishButton:o.default.bool.isRequired},e.exports=s},3299:function(module,exports,__webpack_require__){module.exports=function anonymous(locals,escapeFn,include,rethrow){rethrow=rethrow||function(e,t,n,o,i){var a=t.split("\n"),r=Math.max(o-3,0),l=Math.min(a.length,o+3),s=i(n),c=a.slice(r,l).map(function(e,t){var n=t+r+1;return(n==o?" >> ":"    ")+n+"| "+e}).join("\n");throw e.path=s,e.message=(s||"ejs")+":"+o+"\n"+c+"\n\n"+e.message,e},escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __line=1,__lines='<% var i18n = require(\'../locale\'); %>\n<h1 class="minecraft-big-yellow-header" id="getting-started-header"><%= i18n.playerSelectLetsGetStarted() %></h1>\n\n<h2 id="select-character-text"><%= i18n.playerSelectChooseCharacter() %></h2>\n\n<div id="choose-character-container">\n  <div class="minecraft-character" id="choose-steve">\n    <h1 class="minecraft-big-yellow-header">Steve</h1>\n    <div class="character-portrait" id="steve-portrait"></div>\n    <div class="choose-character-button" id="choose-steve-select"><%= i18n.selectChooseButton() %></div>\n  </div>\n  <div class="minecraft-character" id="choose-alex">\n    <h1 class="minecraft-big-yellow-header">Alex</h1>\n    <div class="character-portrait" id="alex-portrait"></div>\n    <div class="choose-character-button" id="choose-alex-select"><%= i18n.selectChooseButton() %></div>\n  </div>\n</div>\n\n<div id="close-character-select"></div>\n',__filename="src/craft/agent/dialogs/playerSelection.html.ejs";try{var __output=[],__append=__output.push.bind(__output);with(locals||{}){var i18n=__webpack_require__(2541);__append('\n<h1 class="minecraft-big-yellow-header" id="getting-started-header">'),__line=2,__append(escapeFn(i18n.playerSelectLetsGetStarted())),__append('</h1>\n\n<h2 id="select-character-text">'),__line=4,__append(escapeFn(i18n.playerSelectChooseCharacter())),__append('</h2>\n\n<div id="choose-character-container">\n  <div class="minecraft-character" id="choose-steve">\n    <h1 class="minecraft-big-yellow-header">Steve</h1>\n    <div class="character-portrait" id="steve-portrait"></div>\n    <div class="choose-character-button" id="choose-steve-select">'),__line=10,__append(escapeFn(i18n.selectChooseButton())),__append('</div>\n  </div>\n  <div class="minecraft-character" id="choose-alex">\n    <h1 class="minecraft-big-yellow-header">Alex</h1>\n    <div class="character-portrait" id="alex-portrait"></div>\n    <div class="choose-character-button" id="choose-alex-select">'),__line=15,__append(escapeFn(i18n.selectChooseButton())),__append('</div>\n  </div>\n</div>\n\n<div id="close-character-select"></div>\n'),__line=20}return __output.join("")}catch(e){rethrow(e,__lines,__filename,__line,escapeFn)}}},3300:function(e,t,n){"use strict";var o=a(n(820)),i=a(n(2966));function a(e){return e&&e.__esModule?e:{default:e}}t.load=function(e,t){var n=o.default.load(e,t);return n.replaceInstructions=function(e){return e?e.replace(/{currentPlayerName}/g,i.default.getCurrentCharacter()):e},n.instructions2ImageSubstitutions={agent:"/blockly/media/craft/instructions/agent.png",NetherPortal:"/blockly/media/craft/instructions/NetherPortal.png",PressurePlate_Up:"/blockly/media/craft/instructions/PressurePlate_Up.png",Rails_Vertical:"/blockly/media/craft/instructions/Rails_Vertical.png",cactus:"/blockly/media/craft/instructions/cactus.png",door_iron:"/blockly/media/craft/instructions/door_iron.png",book_enchanted:"/blockly/media/craft/instructions/book_enchanted.png",compass:"/blockly/media/craft/instructions/compass.png",diamond_axe:"/blockly/media/craft/instructions/diamond_axe.png",diamond_pickaxe:"/blockly/media/craft/instructions/diamond_pickaxe.png",diamond_shovel:"/blockly/media/craft/instructions/diamond_shovel.png",flint_and_steel:"/blockly/media/craft/instructions/flint_and_steel.png",flint:"/blockly/media/craft/instructions/flint.png",map_empty:"/blockly/media/craft/instructions/map_empty.png",chest:"/blockly/media/craft/instructions/chest.png",bucket_empty:"/blockly/media/craft/instructions/bucket_empty.png",redstone_torch:"/blockly/media/craft/instructions/redstone_torch.png",minecart_normal:"/blockly/media/craft/instructions/minecart_normal.png"},n}},3301:function(e,t,n){"use strict";var o=n(820);t.load=function(e,t){return o.load(e,t)}},3418:function(e,t,n){"use strict";var o=r(n(0)),i=r(n(1)),a=r(n(762));function r(e){return e&&e.__esModule?e:{default:e}}function l(e){return i.default.createElement("span",null,i.default.createElement(a.default,null,i.default.createElement("div",{id:"minecraft-frame"},i.default.createElement("div",{id:"phaser-game"}))),i.default.createElement(c,null,e.showFinishButton&&i.default.createElement("div",{id:"right-button-cell"},i.default.createElement("button",{type:"button",id:"rightButton",className:"share mc-share-button"},i.default.createElement("div",null,s.finish())))),i.default.createElement(u,null))}var s=n(5),c=n(1074).default,u=n(1116);l.propTypes={showFinishButton:o.default.bool.isRequired},e.exports=l},3419:function(module,exports,__webpack_require__){module.exports=function anonymous(locals,escapeFn,include,rethrow){rethrow=rethrow||function(e,t,n,o,i){var a=t.split("\n"),r=Math.max(o-3,0),l=Math.min(a.length,o+3),s=i(n),c=a.slice(r,l).map(function(e,t){var n=t+r+1;return(n==o?" >> ":"    ")+n+"| "+e}).join("\n");throw e.path=s,e.message=(s||"ejs")+":"+o+"\n"+c+"\n\n"+e.message,e},escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __line=1,__lines='<% var i18n = require(\'../locale\'); %>\n<h1 class="minecraft-big-yellow-header" id="getting-started-header"><%= i18n.playerSelectLetsGetStarted() %></h1>\n\n<h2 id="select-character-text"><%= i18n.playerSelectChooseCharacter() %></h2>\n\n<div id="choose-character-container">\n  <div class="minecraft-character" id="choose-steve">\n    <h1 class="minecraft-big-yellow-header">Steve</h1>\n    <div class="character-portrait" id="steve-portrait"></div>\n    <div class="choose-character-button" id="choose-steve-select"><%= i18n.selectChooseButton() %></div>\n  </div>\n  <div class="minecraft-character" id="choose-alex">\n    <h1 class="minecraft-big-yellow-header">Alex</h1>\n    <div class="character-portrait" id="alex-portrait"></div>\n    <div class="choose-character-button" id="choose-alex-select"><%= i18n.selectChooseButton() %></div>\n  </div>\n</div>\n\n<div id="close-character-select"></div>\n',__filename="src/craft/simple/dialogs/playerSelection.html.ejs";try{var __output=[],__append=__output.push.bind(__output);with(locals||{}){var i18n=__webpack_require__(2522);__append('\n<h1 class="minecraft-big-yellow-header" id="getting-started-header">'),__line=2,__append(escapeFn(i18n.playerSelectLetsGetStarted())),__append('</h1>\n\n<h2 id="select-character-text">'),__line=4,__append(escapeFn(i18n.playerSelectChooseCharacter())),__append('</h2>\n\n<div id="choose-character-container">\n  <div class="minecraft-character" id="choose-steve">\n    <h1 class="minecraft-big-yellow-header">Steve</h1>\n    <div class="character-portrait" id="steve-portrait"></div>\n    <div class="choose-character-button" id="choose-steve-select">'),__line=10,__append(escapeFn(i18n.selectChooseButton())),__append('</div>\n  </div>\n  <div class="minecraft-character" id="choose-alex">\n    <h1 class="minecraft-big-yellow-header">Alex</h1>\n    <div class="character-portrait" id="alex-portrait"></div>\n    <div class="choose-character-button" id="choose-alex-select">'),__line=15,__append(escapeFn(i18n.selectChooseButton())),__append('</div>\n  </div>\n</div>\n\n<div id="close-character-select"></div>\n'),__line=20}return __output.join("")}catch(e){rethrow(e,__lines,__filename,__line,escapeFn)}}},3574:function(e,t,n){n(72),n(73),e.exports=n(3575)},3575:function(e,t,n){"use strict";var o=i(n(3576));function i(e){return e&&e.__esModule?e:{default:e}}(0,i(n(1513)).default)().then(o.default)},3576:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.nativeVizWidth=434,e.vizAspectRatio=434/477,e.maxVisualizationWidth=600,e.level.isConnectionLevel?(window.Craft=v.default,e.skinsModule=k.default,e.blocksModule=_,(0,o.default)(window.Craft,y.default,e)):e.level.isAgentLevel?(window.Craft=h.default,e.skinsModule=m.default,e.blocksModule=f,(0,o.default)(window.Craft,g.default,e)):e.level.isEventLevel?(window.Craft=c.default,e.skinsModule=d.default,e.blocksModule=u,(0,o.default)(window.Craft,p.default,e)):(e.level.isAquaticLevel?(window.Craft=s.default,e.skinsModule=l.default,e.blocksModule={install:function(){}}):(window.Craft=i.default,e.skinsModule=l.default,e.blocksModule=a.default),(0,o.default)(window.Craft,r.default,e))};var o=w(n(1739)),i=w(n(3577)),a=w(n(2897)),r=w(n(3581)),l=w(n(3296)),s=w(n(3582)),c=w(n(3583)),u=b(n(2690)),p=w(n(3587)),d=w(n(3297)),h=w(n(2966)),f=b(n(2898)),g=w(n(3588)),m=w(n(3300)),v=w(n(3589)),_=b(n(2899)),y=w(n(3595)),k=w(n(3301));function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function w(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},3577:function(module,exports,__webpack_require__){"use strict";var _jquery=__webpack_require__(9),_jquery2=_interopRequireDefault(_jquery),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(7),_reactDom2=_interopRequireDefault(_reactDom),_trackEvent=__webpack_require__(125),_trackEvent2=_interopRequireDefault(_trackEvent),_CustomMarshalingInterpreter=__webpack_require__(914),_CustomMarshalingInterpreter2=_interopRequireDefault(_CustomMarshalingInterpreter),_craft=__webpack_require__(2521),_AppView=__webpack_require__(1794),_AppView2=_interopRequireDefault(_AppView),_redux=__webpack_require__(51),_Sounds=__webpack_require__(365),_Sounds2=_interopRequireDefault(_Sounds),_constants=__webpack_require__(46),_thumbnail=__webpack_require__(1618),_currentUserRedux=__webpack_require__(332);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var studioApp=__webpack_require__(240).singleton,craftMsg=__webpack_require__(2522),dom=__webpack_require__(145),houseLevels=__webpack_require__(3578),levelbuilderOverrides=__webpack_require__(3579),MusicController=__webpack_require__(2631),Provider=__webpack_require__(8).Provider,CraftVisualizationColumn=__webpack_require__(3418),MEDIA_URL="/blockly/media/craft/",Craft=module.exports,characters={Steve:{name:"Steve",staticAvatar:MEDIA_URL+"Sliced_Parts/Pop_Up_Character_Steve_Neutral.png",smallStaticAvatar:MEDIA_URL+"Sliced_Parts/Pop_Up_Character_Steve_Neutral.png",failureAvatar:MEDIA_URL+"Sliced_Parts/Pop_Up_Character_Steve_Fail.png",winAvatar:MEDIA_URL+"Sliced_Parts/Pop_Up_Character_Steve_Win.png"},Alex:{name:"Alex",staticAvatar:MEDIA_URL+"Sliced_Parts/Pop_Up_Character_Alex_Neutral.png",smallStaticAvatar:MEDIA_URL+"Sliced_Parts/Pop_Up_Character_Alex_Neutral.png",failureAvatar:MEDIA_URL+"Sliced_Parts/Pop_Up_Character_Alex_Fail.png",winAvatar:MEDIA_URL+"Sliced_Parts/Pop_Up_Character_Alex_Win.png"}},interfaceImages={DEFAULT:[MEDIA_URL+"Sliced_Parts/MC_Loading_Spinner.gif",MEDIA_URL+"Sliced_Parts/Frame_Large_Plus_Logo.png",MEDIA_URL+"Sliced_Parts/Pop_Up_Slice.png",MEDIA_URL+"Sliced_Parts/X_Button.png",MEDIA_URL+"Sliced_Parts/Button_Grey_Slice.png",MEDIA_URL+"Sliced_Parts/Run_Button_Up_Slice.png",MEDIA_URL+"Sliced_Parts/MC_Run_Arrow_Icon_Smaller.png",MEDIA_URL+"Sliced_Parts/Run_Button_Down_Slice.png",MEDIA_URL+"Sliced_Parts/Reset_Button_Up_Slice.png",MEDIA_URL+"Sliced_Parts/MC_Reset_Arrow_Icon.png",MEDIA_URL+"Sliced_Parts/Reset_Button_Down_Slice.png",MEDIA_URL+"Sliced_Parts/Callout_Tail.png"],1:[MEDIA_URL+"Sliced_Parts/Steve_Character_Select.png",MEDIA_URL+"Sliced_Parts/Alex_Character_Select.png",characters.Steve.staticAvatar,characters.Steve.smallStaticAvatar,characters.Alex.staticAvatar,characters.Alex.smallStaticAvatar],2:[characters.Alex.winAvatar,characters.Steve.winAvatar,characters.Alex.failureAvatar,characters.Steve.failureAvatar],6:[MEDIA_URL+"Sliced_Parts/House_Option_A_v3.png",MEDIA_URL+"Sliced_Parts/House_Option_B_v3.png",MEDIA_URL+"Sliced_Parts/House_Option_C_v3.png"]},MUSIC_METADATA=[{volume:1,hasOgg:!0,name:"vignette1"},{volume:1,hasOgg:!0,name:"vignette2-quiet"},{volume:1,hasOgg:!0,name:"vignette3"},{volume:1,hasOgg:!0,name:"vignette4-intro"},{volume:1,hasOgg:!0,name:"vignette5-shortpiano"},{volume:1,hasOgg:!0,name:"vignette7-funky-chirps-short"},{volume:1,hasOgg:!0,name:"vignette8-free-play"}],CHARACTER_STEVE="Steve",CHARACTER_ALEX="Alex",DEFAULT_CHARACTER=CHARACTER_STEVE;function trySetLocalStorageItem(t,e){try{window.localStorage.setItem(t,e)}catch(e){console&&console.log&&console.log("Couldn't set local storage item for key "+t)}}Craft.init=function(o){1===o.level.puzzle_number&&1===o.level.stage_total&&(o.level.puzzle_number=999),o.level.isTestLevel&&(o.level.customSlowMotion=.1),o.level.disableFinalStageMessage=!0;var e=document.documentMode;e&&(0,_jquery2.default)("body").addClass("ieVersion"+e);var t=document.body;t.className=t.className+" minecraft",o.level.afterVideoBeforeInstructionsFn=function(n){Craft.beginBackgroundMusic(),o.level.showPopupOnLoad?"playerSelection"===o.level.showPopupOnLoad?Craft.showPlayerSelectionPopup(function(e){(0,_trackEvent2.default)("Minecraft","ChoseCharacter",e),Craft.clearPlayerState(),trySetLocalStorageItem("craftSelectedPlayer",e),Craft.updateUIForCharacter(e),Craft.initializeAppLevel(o.level),n()}):"houseLayoutSelection"===o.level.showPopupOnLoad&&Craft.showHouseSelectionPopup(function(e){(0,_trackEvent2.default)("Minecraft","ChoseHouse",e),a.edit_blocks||(Object.assign(o.level,houseLevels[e]),Blockly.mainBlockSpace.clear(),studioApp().setStartBlocks_(o,!0)),Craft.initializeAppLevel(o.level);var t=document.createEvent("Event");t.initEvent("houseLayoutSelected",!0,!0),document.dispatchEvent(t),n()}):n()},o.level.puzzle_number&&levelbuilderOverrides[o.level.puzzle_number]&&Object.assign(o.level,levelbuilderOverrides[o.level.puzzle_number]),Craft.initialConfig=o,studioApp().reset=this.reset.bind(this),studioApp().runButtonClick=this.runButtonClick.bind(this),Craft.level=o.level,Craft.skin=o.skin;var n=[];Craft.level.songs&&MUSIC_METADATA&&(n=MUSIC_METADATA.filter(function(e){return-1!==Craft.level.songs.indexOf(e.name)})),Craft.musicController=new MusicController(_Sounds2.default.getSingleton(),function(e){return o.skin.assetUrl("music/"+e)},n,1<n.length?7500:null),Craft.beginBackgroundMusic=function(){_Sounds2.default.getSingleton().whenAudioUnlocked(function(){var e=Craft.level.songs&&1<Craft.level.songs.length?Craft.level.songs[0]:null;Craft.musicController.play(e)})};var i=characters[Craft.getCurrentCharacter()];o.skin.staticAvatar=i.staticAvatar,o.skin.smallStaticAvatar=i.smallStaticAvatar,o.skin.failureAvatar=i.failureAvatar,o.skin.winAvatar=i.winAvatar;var a=o.level;switch(a.specialLevelType){case"houseWallBuild":a.blocksToStore=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","houseBottomA","houseBottomB","houseBottomC","houseBottomD","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]}studioApp().setPageConstants(o,{isMinecraft:!0}),_reactDom2.default.render(_react2.default.createElement(Provider,{store:(0,_redux.getStore)()},_react2.default.createElement(_AppView2.default,{visualizationColumn:_react2.default.createElement(CraftVisualizationColumn,{showFinishButton:!o.level.isProjectLevel}),onMount:function(){studioApp().init(Object.assign({},o,{forceInsertTopBlock:"when_run",appStrings:{generatedCodeDescription:craftMsg.generatedCodeDescription()},loadAudio:function(){},afterInject:function(){var e=parseFloat((location.search.split("customSlowMotion=")[1]||"").split("&")[0]);Craft.gameController=new _craft.GameController({Phaser:window.Phaser,containerId:"phaser-game",assetRoot:Craft.skin.assetUrl(""),audioPlayer:{register:studioApp().registerAudio.bind(studioApp()),play:studioApp().playAudio.bind(studioApp())},debug:!1,customSlowMotion:o.level.isTestLevel?.5:e,earlyLoadAssetPacks:Craft.earlyLoadAssetsForLevel(a.puzzle_number),afterAssetsLoaded:function(){Craft.musicController.preload()},earlyLoadNiceToHaveAssetPacks:Craft.niceToHaveAssetsForLevel(a.puzzle_number)}),o.level.showPopupOnLoad||Craft.initializeAppLevel(o.level),studioApp().hideSource&&(document.getElementById("visualizationColumn").style.width=this.nativeVizWidth+"px")},twitter:{text:"Share on Twitter",hashtag:"Craft"}}));var e=[];e=e.concat(interfaceImages.DEFAULT),o.level.puzzle_number&&interfaceImages[o.level.puzzle_number]&&(e=e.concat(interfaceImages[o.level.puzzle_number])),e.forEach(function(e){preloadImage(e)});var t=(0,_jquery2.default)(".mc-share-button");t.length&&dom.addClickTouchEvent(t[0],function(){Craft.reportResult(!0)})}})),document.getElementById(o.containerId))};var preloadImage=function(e){(new Image).src=e};Craft.characterAssetPackName=function(e){return"player"+e},Craft.getCurrentCharacter=function(){return window.localStorage.getItem("craftSelectedPlayer")||DEFAULT_CHARACTER},Craft.updateUIForCharacter=function(e){Craft.initialConfig.skin.staticAvatar=characters[e].staticAvatar,Craft.initialConfig.skin.smallStaticAvatar=characters[e].smallStaticAvatar,Craft.initialConfig.skin.failureAvatar=characters[e].failureAvatar,Craft.initialConfig.skin.winAvatar=characters[e].winAvatar,studioApp().setIconsFromSkin(Craft.initialConfig.skin),(0,_jquery2.default)("#prompt-icon").attr("src",characters[e].smallStaticAvatar)},Craft.showPlayerSelectionPopup=function(e){var t=DEFAULT_CHARACTER,n=document.createElement("div");n.innerHTML=__webpack_require__(3419)({image:studioApp().assetUrl()});var o=studioApp().createModalDialog({contentDiv:n,defaultBtnSelector:"#choose-steve",onHidden:function(){e(t)},id:"craft-popup-player-selection"});dom.addClickTouchEvent((0,_jquery2.default)("#close-character-select")[0],function(){o.hide()}.bind(this)),dom.addClickTouchEvent((0,_jquery2.default)("#choose-steve")[0],function(){t=CHARACTER_STEVE,(0,_trackEvent2.default)("Minecraft","ClickedCharacter",t),o.hide()}.bind(this)),dom.addClickTouchEvent((0,_jquery2.default)("#choose-alex")[0],function(){t=CHARACTER_ALEX,(0,_trackEvent2.default)("Minecraft","ClickedCharacter",t),o.hide()}.bind(this)),o.show()},Craft.showHouseSelectionPopup=function(e){var t=document.createElement("div");t.innerHTML=__webpack_require__(3580)({image:studioApp().assetUrl()});var n="houseA",o=studioApp().createModalDialog({contentDiv:t,defaultBtnSelector:"#choose-house-a",onHidden:function(){e(n)},id:"craft-popup-house-selection",icon:characters[Craft.getCurrentCharacter()].staticAvatar});dom.addClickTouchEvent((0,_jquery2.default)("#close-house-select")[0],function(){o.hide()}.bind(this)),dom.addClickTouchEvent((0,_jquery2.default)("#choose-house-a")[0],function(){n="houseA",(0,_trackEvent2.default)("Minecraft","ClickedHouse",n),o.hide()}.bind(this)),dom.addClickTouchEvent((0,_jquery2.default)("#choose-house-b")[0],function(){n="houseB",(0,_trackEvent2.default)("Minecraft","ClickedHouse",n),o.hide()}.bind(this)),dom.addClickTouchEvent((0,_jquery2.default)("#choose-house-c")[0],function(){n="houseC",(0,_trackEvent2.default)("Minecraft","ClickedHouse",n),o.hide()}.bind(this)),o.show()},Craft.clearPlayerState=function(){window.localStorage.removeItem("craftHouseBlocks"),window.localStorage.removeItem("craftPlayerInventory"),window.localStorage.removeItem("craftSelectedPlayer"),window.localStorage.removeItem("craftSelectedHouse")},Craft.onHouseSelected=function(e){trySetLocalStorageItem("craftSelectedHouse",e)},Craft.initializeAppLevel=function(levelConfig){_craft.utils.convertActionPlaneEntitiesToConfig(levelConfig);var houseBlocks=JSON.parse(window.localStorage.getItem("craftHouseBlocks"));Craft.foldInCustomHouseBlocks(houseBlocks,levelConfig);for(var fluffPlane=[],i=0;i<(levelConfig.gridWidth||10)*(levelConfig.gridHeight||10);i++)fluffPlane.push("");var levelAssetPacks={beforeLoad:Craft.minAssetsForLevelWithCharacter(levelConfig.puzzle_number),afterLoad:Craft.afterLoadAssetsForLevel(levelConfig.puzzle_number)};Craft.gameController.loadLevel({isDaytime:levelConfig.isDaytime,groundPlane:levelConfig.groundPlane,groundDecorationPlane:levelConfig.groundDecorationPlane,actionPlane:levelConfig.actionPlane,fluffPlane:fluffPlane,entities:levelConfig.entities,playerStartPosition:levelConfig.playerStartPosition,playerStartDirection:levelConfig.playerStartDirection,playerName:Craft.getCurrentCharacter(),assetPacks:levelAssetPacks,specialLevelType:levelConfig.specialLevelType,houseBottomRight:levelConfig.houseBottomRight,gridDimensions:levelConfig.gridWidth&&levelConfig.gridHeight?[levelConfig.gridWidth,levelConfig.gridHeight]:null,verificationFunction:eval("["+levelConfig.verificationFunction+"]")[0]})},Craft.minAssetsForLevelWithCharacter=function(e){return Craft.minAssetsForLevelNumber(e).concat([Craft.characterAssetPackName(Craft.getCurrentCharacter())])},Craft.minAssetsForLevelNumber=function(e){switch(e){case 1:return["adventurerLevelOneAssets"];case 2:return["adventurerLevelTwoAssets"];case 3:return["adventurerLevelThreeAssets"];default:return["adventurerAllAssetsMinusPlayer"]}},Craft.afterLoadAssetsForLevel=function(e){switch(e){case 1:return Craft.minAssetsForLevelNumber(2);case 2:return Craft.minAssetsForLevelNumber(3);default:return["adventurerAllAssetsMinusPlayer"]}},Craft.earlyLoadAssetsForLevel=function(e){switch(e){case 1:return Craft.minAssetsForLevelNumber(e);default:return Craft.minAssetsForLevelWithCharacter(e)}},Craft.niceToHaveAssetsForLevel=function(e){switch(e){case 1:return["playerSteve","playerAlex"];default:return["adventurerAllAssetsMinusPlayer"]}},Craft.foldInCustomHouseBlocks=function(o,e){[e.groundPlane,e.actionPlane].forEach(function(e){for(var t=0;t<e.length;t++){var n=e[t];n.match(/house/)&&(e[t]=o&&o[n]?o[n]:"planksBirch")}})},Craft.reset=function(e){e||((0,_thumbnail.captureThumbnailFromCanvas)((0,_jquery2.default)("#minecraft-frame canvas")[0]),Craft.gameController.codeOrgAPI.resetAttempt())},Craft.phaserLoaded=function(){return Craft.gameController&&Craft.gameController.game&&!Craft.gameController.game.load.isLoading},Craft.runButtonClick=function(){if(Craft.phaserLoaded()){var e=document.getElementById("runButton"),t=document.getElementById("resetButton");if(t.style.minWidth||(t.style.minWidth=e.offsetWidth+"px"),studioApp().toggleRunReset("reset"),Blockly.mainBlockSpace.traceOn(!0),studioApp().attempts++,Craft.executeUserCode(),Craft.level.freePlay&&!studioApp().hideSource){var n=(0,_jquery2.default)("#right-button-cell");if(n.length&&!n.hasClass("right-button-cell-enabled")){n.addClass("right-button-cell-enabled"),studioApp().onResize();var o=document.createEvent("Event");o.initEvent("finishButtonShown",!0,!0),document.dispatchEvent(o)}}}},Craft.executeUserCode=function(){if(Craft.initialConfig.level.edit_blocks)this.reportResult(!0);else if(studioApp().hasUnwantedExtraTopBlocks())this.reportResult(!1);else{studioApp().playAudio("start"),Blockly.mainBlockSpace.traceOn(!0);var o=Craft.gameController.codeOrgAPI;o.startCommandCollection(),o.registerEventCallback(null,function(e){e.eventType===_craft.EventType.WhenUsed&&"sheep"===e.targetType&&o.drop(null,"wool",e.targetIdentifier),e.eventType===_craft.EventType.WhenTouched&&"creeper"===e.targetType&&(o.flashEntity(null,e.targetIdentifier),o.explodeEntity(null,e.targetIdentifier))});var e,t=Blockly.mainBlockSpace.getTopBlocks(!0);studioApp().initializationBlocks&&(t=studioApp().initializationBlocks.concat(t)),e=Blockly.Generator.blocksToCode("JavaScript",t),_CustomMarshalingInterpreter2.default.evalWith(e,{moveForward:function(e){o.moveForward(studioApp().highlight.bind(studioApp(),e),"Player")},turnLeft:function(e){o.turnLeft(studioApp().highlight.bind(studioApp(),e),"Player")},turnRight:function(e){o.turnRight(studioApp().highlight.bind(studioApp(),e),"Player")},destroyBlock:function(e){o.destroyBlock(studioApp().highlight.bind(studioApp(),e),"Player")},shear:function(e){o.use(studioApp().highlight.bind(studioApp(),e),"Player")},tillSoil:function(e){o.tillSoil(studioApp().highlight.bind(studioApp(),e),"Player")},ifLavaAhead:function(e,t){o.ifBlockAhead(studioApp().highlight.bind(studioApp(),t),"lava","Player",e)},ifBlockAhead:function(e,t,n){o.ifBlockAhead(studioApp().highlight.bind(studioApp(),n),e,"Player",t)},placeBlock:function(e,t){o.placeBlock(studioApp().highlight.bind(studioApp(),t),e,"Player")},plantCrop:function(e){o.placeBlock(studioApp().highlight.bind(studioApp(),e),"cropWheat","Player")},placeTorch:function(e){o.placeBlock(studioApp().highlight.bind(studioApp(),e),"torch","Player")},placeBlockAhead:function(e,t){o.placeInFront(studioApp().highlight.bind(studioApp(),t),e,"Player")}},{legacy:!0}),o.startAttempt(function(e,t){if(!Craft.level.freePlay){this.reportResult(e);var n=Craft.initialConfig.level.blocksToStore;if(e&&n){for(var o=JSON.parse(window.localStorage.getItem("craftHouseBlocks"))||{},i=0;i<t.actionPlane.length;i++)""!==n[i]&&(o[n[i]]=t.actionPlane[i].blockType);trySetLocalStorageItem("craftHouseBlocks",JSON.stringify(o))}var a=t.getInventoryTypes(),r=JSON.parse(window.localStorage.getItem("craftPlayerInventory"))||[],l={};a.concat(r).forEach(function(e){l[e]=!0}),trySetLocalStorageItem("craftPlayerInventory",JSON.stringify(Object.keys(l)))}}.bind(this))}},Craft.getTestResultFrom=function(e,t){return t===_constants.TestResults.LEVEL_INCOMPLETE_FAIL?_constants.TestResults.APP_SPECIFIC_FAIL:Craft.initialConfig.level.freePlay?_constants.TestResults.FREE_PLAY:t},Craft.reportResult=function(e){var t=studioApp().getTestResults(e),n=Craft.getTestResultFrom(e,t),o=Craft.initialConfig.level.freePlay?Craft.gameController.getScreenshot():null,i=o?encodeURIComponent(o.split(",")[1]):null;studioApp().report({app:"craft",level:Craft.initialConfig.level.id,result:!!Craft.initialConfig.level.freePlay||e,testResult:n,image:i,program:encodeURIComponent(Blockly.Xml.domToText(Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace))),onComplete:function(e){var t=(0,_redux.getStore)().getState().currentUser.signInState===_currentUserRedux.SignInState.SignedIn;studioApp().displayFeedback({feedbackType:n,response:e,level:Craft.initialConfig.level,defaultToContinue:Craft.shouldDefaultToContinue(n),appStrings:{reinfFeedbackMsg:craftMsg.reinfFeedbackMsg(),nextLevelMsg:craftMsg.nextLevelMsg({puzzleNumber:Craft.initialConfig.level.puzzle_number}),tooManyBlocksFailMsgFunction:craftMsg.tooManyBlocksFail,generatedCodeDescription:craftMsg.generatedCodeDescription()},feedbackImage:o,showingSharing:Craft.initialConfig.level.freePlay,saveToProjectGallery:!0,disableSaveToGallery:!t})}})},Craft.shouldDefaultToContinue=function(e){var t=e===_constants.TestResults.FREE_PLAY;return e>_constants.TestResults.APP_SPECIFIC_ACCEPTABLE_FAIL&&!t}},3578:function(e,t,n){"use strict";e.exports={houseA:{groundPlane:["grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","dirtCoarse","dirtCoarse","dirtCoarse","dirtCoarse","grass","grass","grass","grass","grass","grass","dirtCoarse","grass","grass","dirtCoarse","grass","grass","grass","grass","grass","grass","dirtCoarse","grass","grass","dirtCoarse","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass"],verificationFunction:function(e){return e.solutionMapMatchesResultMap(["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","any","any","any","any","","","","","","","any","","","any","","","","","","","any","","","any","","","","","","","any","any","any","any","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""])}.toString(),blocksToStore:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","houseRightC","","","","","","","","","","houseRightB","","","","","","","houseLeftA","","","houseRightA","","","","","","","houseBottomA","houseBottomB","houseBottomC","houseBottomD","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],houseBottomRight:[5,5]},houseC:{groundPlane:["grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","dirtCoarse","dirtCoarse","dirtCoarse","dirtCoarse","grass","grass","grass","grass","grass","grass","dirtCoarse","grass","grass","grass","dirtCoarse","grass","grass","grass","grass","grass","dirtCoarse","dirtCoarse","grass","grass","dirtCoarse","grass","grass","grass","grass","grass","grass","dirtCoarse","grass","grass","dirtCoarse","grass","grass","grass","grass","grass","grass","dirtCoarse","dirtCoarse","dirtCoarse","dirtCoarse","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass"],groundDecorationPlane:["","","","","","tallGrass","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","tallGrass","","","","","","","","",""],actionPlane:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","houseBottomA","houseBottomB","houseBottomC","houseBottomD","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],verificationFunction:'function (verificationAPI) {\r\n      return verificationAPI.solutionMapMatchesResultMap(\r\n            [\r\n              "", "", "", "", "", "", "", "", "", "",\r\n              "", "", "", "", "", "", "", "", "", "",\r\n              "", "", "any", "any", "any", "any", "", "", "", "",\r\n              "", "", "any", "", "", "", "any", "", "", "",\r\n              "", "", "any", "any", "", "", "any", "", "", "",\r\n              "", "", "", "any", "", "", "any", "", "", "",\r\n              "", "", "", "any", "any", "any", "any", "", "", "",\r\n              "", "", "", "", "", "", "", "", "", "",\r\n              "", "", "", "", "", "", "", "", "", "",\r\n              "", "", "", "", "", "", "", "", "", ""\r\n            ]);\r\n}',startBlocks:'<xml><block type="when_run" deletable="false" movable="false"><next><block type="controls_repeat_dropdown"><title name="TIMES" config="2-10">2</title><statement name="DO"><block type="craft_moveForward"><next><block type="craft_placeBlock"><title name="TYPE">planksBirch</title></block></next></block></statement><next><block type="craft_turn"><title name="DIR">left</title><next><block type="craft_moveForward"><next><block type="craft_placeBlock"><title name="TYPE">planksBirch</title><next><block type="craft_turn"><title name="DIR">right</title></block></next></block></next></block></next></block></next></block></next></block></xml>',blocksToStore:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","houseRightC","","","","","","","","","","houseRightB","","","","","","","houseLeftA","","","houseRightA","","","","","","","houseBottomA","houseBottomB","houseBottomC","houseBottomD","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],houseBottomRight:[5,5]},houseB:{groundPlane:["grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","dirtCoarse","dirtCoarse","dirtCoarse","grass","grass","grass","grass","grass","grass","grass","dirtCoarse","grass","dirtCoarse","grass","grass","grass","grass","grass","grass","grass","dirtCoarse","grass","dirtCoarse","grass","grass","grass","grass","grass","grass","grass","dirtCoarse","grass","dirtCoarse","dirtCoarse","grass","grass","grass","grass","grass","grass","dirtCoarse","grass","grass","dirtCoarse","grass","grass","grass","grass","grass","grass","dirtCoarse","grass","grass","dirtCoarse","grass","grass","grass","grass","grass","grass","dirtCoarse","dirtCoarse","dirtCoarse","dirtCoarse","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass"],verificationFunction:'function (verificationAPI) {\r\n      return verificationAPI.solutionMapMatchesResultMap(\r\n            [\r\n              "", "", "", "", "", "", "", "", "", "",\r\n              "", "", "", "any", "any", "any", "", "", "", "",\r\n              "", "", "", "any", "", "any", "", "", "", "",\r\n              "", "", "", "any", "", "any", "", "", "", "",\r\n              "", "", "", "any", "", "any", "any", "", "", "",\r\n              "", "", "", "any", "", "", "any", "", "", "",\r\n              "", "", "", "any", "", "", "any", "", "", "",\r\n              "", "", "", "any", "any", "any", "any", "", "", "",\r\n              "", "", "", "", "", "", "", "", "", "",\r\n              "", "", "", "", "", "", "", "", "", ""\r\n            ]);\r\n}',startBlocks:'<xml><block type="when_run" deletable="false" movable="false"><next><block type="controls_repeat_dropdown"><title name="TIMES" config="2-10">6</title><statement name="DO"><block type="craft_moveForward"><next><block type="craft_placeBlock"><title name="TYPE">planksBirch</title></block></next></block></statement></block></next></block></xml>',blocksToStore:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","houseRightC","","","","","","","","","","houseRightB","","","","","","","houseLeftA","","","houseRightA","","","","","","","houseBottomA","houseBottomB","houseBottomC","houseBottomD","","","","","","","","","","","","","","","","","","","","","","",""],actionPlane:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","houseBottomA","houseBottomB","houseBottomC","houseBottomD","","","","","","","","","","","","","","","","","","","","","","",""],playerStartPosition:[3,7],houseBottomRight:[5,6]}}},3579:function(e,t,n){"use strict";var o=n(2522);e.exports={1:{appSpecificFailError:o.level1FailureMessage(),tooFewBlocksMsg:o.level1TooFewBlocksMessage(),songs:["vignette4-intro"]},2:{appSpecificFailError:o.level2FailureMessage(),tooFewBlocksMsg:o.level2TooFewBlocksMessage(),songs:["vignette5-shortpiano"]},3:{appSpecificFailError:o.level3FailureMessage(),tooFewBlocksMsg:o.level3TooFewBlocksMessage(),songs:["vignette2-quiet","vignette5-shortpiano","vignette4-intro"]},4:{appSpecificFailError:o.level4FailureMessage(),tooFewBlocksMsg:o.level4FailureMessage(),songs:["vignette3","vignette2-quiet","vignette5-shortpiano","vignette4-intro"],songDelay:4e3},5:{appSpecificFailError:o.level5FailureMessage(),tooFewBlocksMsg:o.level5FailureMessage(),songs:["vignette7-funky-chirps-short","vignette2-quiet","vignette4-intro","vignette3"]},6:{appSpecificFailError:o.level6FailureMessage(),tooFewBlocksMsg:o.level6FailureMessage(),songs:["vignette1","vignette2-quiet","vignette4-intro","vignette3"],songDelay:4e3},7:{appSpecificFailError:o.level7FailureMessage(),tooFewBlocksMsg:o.level7FailureMessage(),songs:["vignette2-quiet","vignette7-funky-chirps-short","vignette4-intro","vignette1","vignette3"]},8:{appSpecificFailError:o.level8FailureMessage(),tooFewBlocksMsg:o.level8FailureMessage(),songs:["vignette5-shortpiano","vignette2-quiet","vignette1","vignette4-intro","vignette3"]},9:{appSpecificFailError:o.level9FailureMessage(),tooFewBlocksMsg:o.level9FailureMessage(),songs:["vignette3","vignette5-shortpiano","vignette7-funky-chirps-short","vignette2-quiet","vignette4-intro","vignette1"]},10:{appSpecificFailError:o.level10FailureMessage(),tooFewBlocksMsg:o.level10FailureMessage(),songs:["vignette4-intro","vignette3","vignette5-shortpiano","vignette2-quiet","vignette7-funky-chirps-short"]},11:{appSpecificFailError:o.level11FailureMessage(),tooFewBlocksMsg:o.level11FailureMessage(),songs:["vignette7-funky-chirps-short","vignette3","vignette2-quiet"]},12:{appSpecificFailError:o.level12FailureMessage(),tooFewBlocksMsg:o.level12FailureMessage(),songs:["vignette5-shortpiano","vignette2-quiet","vignette4-intro","vignette1"]},13:{appSpecificFailError:o.level13FailureMessage(),tooFewBlocksMsg:o.level13FailureMessage(),songs:["vignette1","vignette3","vignette2-quiet","vignette4-intro"]},14:{songs:["vignette8-free-play","vignette3","vignette2-quiet","vignette4-intro","vignette1"]}}},3580:function(module,exports,__webpack_require__){module.exports=function anonymous(locals,escapeFn,include,rethrow){rethrow=rethrow||function(e,t,n,o,i){var a=t.split("\n"),r=Math.max(o-3,0),l=Math.min(a.length,o+3),s=i(n),c=a.slice(r,l).map(function(e,t){var n=t+r+1;return(n==o?" >> ":"    ")+n+"| "+e}).join("\n");throw e.path=s,e.message=(s||"ejs")+":"+o+"\n"+c+"\n\n"+e.message,e},escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __line=1,__lines='<% var i18n = require(\'../locale\'); %>\n<h1 class="minecraft-big-yellow-header" id="getting-started-header"><%= i18n.houseSelectLetsBuild() %></h1>\n\n<h2 id="select-house-text"><%= i18n.houseSelectChooseFloorPlan() %></h2>\n\n<div id="choose-house-container">\n  <div class="minecraft-house" id="choose-house-a">\n    <h1 class="minecraft-big-yellow-header"><%= i18n.houseSelectEasy() %></h1>\n    <div class="house-outline-container">\n      <div class="house-photo" id="house-a-picture"></div>\n    </div>\n    <div class="choose-house-button"><%= i18n.selectChooseButton() %></div>\n  </div>\n  <div class="minecraft-house" id="choose-house-b">\n    <h1 class="minecraft-big-yellow-header"><%= i18n.houseSelectMedium() %></h1>\n    <div class="house-outline-container">\n      <div class="house-photo" id="house-b-picture"></div>\n    </div>\n    <div class="choose-house-button"><%= i18n.selectChooseButton() %></div>\n  </div>\n  <div class="minecraft-house" id="choose-house-c">\n    <h1 class="minecraft-big-yellow-header"><%= i18n.houseSelectHard() %></h1>\n    <div class="house-outline-container">\n      <div class="house-photo" id="house-c-picture"></div>\n    </div>\n    <div class="choose-house-button"><%= i18n.selectChooseButton() %></div>\n  </div>\n</div>\n\n<div id="close-house-select"></div>\n',__filename="src/craft/simple/dialogs/houseSelection.html.ejs";try{var __output=[],__append=__output.push.bind(__output);with(locals||{}){var i18n=__webpack_require__(2522);__append('\n<h1 class="minecraft-big-yellow-header" id="getting-started-header">'),__line=2,__append(escapeFn(i18n.houseSelectLetsBuild())),__append('</h1>\n\n<h2 id="select-house-text">'),__line=4,__append(escapeFn(i18n.houseSelectChooseFloorPlan())),__append('</h2>\n\n<div id="choose-house-container">\n  <div class="minecraft-house" id="choose-house-a">\n    <h1 class="minecraft-big-yellow-header">'),__line=8,__append(escapeFn(i18n.houseSelectEasy())),__append('</h1>\n    <div class="house-outline-container">\n      <div class="house-photo" id="house-a-picture"></div>\n    </div>\n    <div class="choose-house-button">'),__line=12,__append(escapeFn(i18n.selectChooseButton())),__append('</div>\n  </div>\n  <div class="minecraft-house" id="choose-house-b">\n    <h1 class="minecraft-big-yellow-header">'),__line=15,__append(escapeFn(i18n.houseSelectMedium())),__append('</h1>\n    <div class="house-outline-container">\n      <div class="house-photo" id="house-b-picture"></div>\n    </div>\n    <div class="choose-house-button">'),__line=19,__append(escapeFn(i18n.selectChooseButton())),__append('</div>\n  </div>\n  <div class="minecraft-house" id="choose-house-c">\n    <h1 class="minecraft-big-yellow-header">'),__line=22,__append(escapeFn(i18n.houseSelectHard())),__append('</h1>\n    <div class="house-outline-container">\n      <div class="house-photo" id="house-c-picture"></div>\n    </div>\n    <div class="choose-house-button">'),__line=26,__append(escapeFn(i18n.selectChooseButton())),__append('</div>\n  </div>\n</div>\n\n<div id="close-house-select"></div>\n'),__line=31}return __output.join("")}catch(e){rethrow(e,__lines,__filename,__line,escapeFn)}}},3581:function(e,t,n){"use strict";var o=n(394);e.exports={custom:{requiredBlocks:[],freePlay:!1,toolbox:(0,o.createToolbox)('<block type="craft_moveForward"></block>\n  <block type="craft_turn">\n    <title name="DIR">left</title>\n  </block>\n  <block type="craft_turn">\n    <title name="DIR">right</title>\n  </block>')}}},3582:function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_jquery=__webpack_require__(9),_jquery2=_interopRequireDefault(_jquery),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(7),_reactDom2=_interopRequireDefault(_reactDom),_trackEvent=__webpack_require__(125),_trackEvent2=_interopRequireDefault(_trackEvent),_StudioApp=__webpack_require__(240),_locale=__webpack_require__(2522),_locale2=_interopRequireDefault(_locale),_CustomMarshalingInterpreter=__webpack_require__(914),_CustomMarshalingInterpreter2=_interopRequireDefault(_CustomMarshalingInterpreter),_craft=__webpack_require__(2521),_dom=__webpack_require__(145),_dom2=_interopRequireDefault(_dom),_MusicController=__webpack_require__(2631),_MusicController2=_interopRequireDefault(_MusicController),_AppView=__webpack_require__(1794),_AppView2=_interopRequireDefault(_AppView),_redux=__webpack_require__(51),_Sounds=__webpack_require__(365),_Sounds2=_interopRequireDefault(_Sounds),_constants=__webpack_require__(46),_thumbnail=__webpack_require__(1618),_currentUserRedux=__webpack_require__(332);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var Provider=__webpack_require__(8).Provider,CraftVisualizationColumn=__webpack_require__(3418),MEDIA_URL="/blockly/media/craft/",Craft=module.exports,characters={Steve:{name:"Steve",staticAvatar:MEDIA_URL+"Sliced_Parts/Pop_Up_Character_Steve_Neutral.png",smallStaticAvatar:MEDIA_URL+"Sliced_Parts/Pop_Up_Character_Steve_Neutral.png",failureAvatar:MEDIA_URL+"Sliced_Parts/Pop_Up_Character_Steve_Fail.png",winAvatar:MEDIA_URL+"Sliced_Parts/Pop_Up_Character_Steve_Win.png"},Alex:{name:"Alex",staticAvatar:MEDIA_URL+"Sliced_Parts/Pop_Up_Character_Alex_Neutral.png",smallStaticAvatar:MEDIA_URL+"Sliced_Parts/Pop_Up_Character_Alex_Neutral.png",failureAvatar:MEDIA_URL+"Sliced_Parts/Pop_Up_Character_Alex_Fail.png",winAvatar:MEDIA_URL+"Sliced_Parts/Pop_Up_Character_Alex_Win.png"}},interfaceImages={DEFAULT:[MEDIA_URL+"Sliced_Parts/MC_Loading_Spinner.gif",MEDIA_URL+"Sliced_Parts/Frame_Large_Plus_Logo.png",MEDIA_URL+"Sliced_Parts/Pop_Up_Slice.png",MEDIA_URL+"Sliced_Parts/X_Button.png",MEDIA_URL+"Sliced_Parts/Button_Grey_Slice.png",MEDIA_URL+"Sliced_Parts/Run_Button_Up_Slice.png",MEDIA_URL+"Sliced_Parts/MC_Run_Arrow_Icon_Smaller.png",MEDIA_URL+"Sliced_Parts/Run_Button_Down_Slice.png",MEDIA_URL+"Sliced_Parts/Reset_Button_Up_Slice.png",MEDIA_URL+"Sliced_Parts/MC_Reset_Arrow_Icon.png",MEDIA_URL+"Sliced_Parts/Reset_Button_Down_Slice.png",MEDIA_URL+"Sliced_Parts/Callout_Tail.png"],1:[MEDIA_URL+"Sliced_Parts/Steve_Character_Select.png",MEDIA_URL+"Sliced_Parts/Alex_Character_Select.png",characters.Steve.staticAvatar,characters.Steve.smallStaticAvatar,characters.Alex.staticAvatar,characters.Alex.smallStaticAvatar],2:[characters.Alex.winAvatar,characters.Steve.winAvatar,characters.Alex.failureAvatar,characters.Steve.failureAvatar],6:[MEDIA_URL+"Sliced_Parts/House_Option_A_v3.png",MEDIA_URL+"Sliced_Parts/House_Option_B_v3.png",MEDIA_URL+"Sliced_Parts/House_Option_C_v3.png"]},MUSIC_METADATA=[{volume:1,hasOgg:!0,name:"vignette1"},{volume:1,hasOgg:!0,name:"vignette2-quiet"},{volume:1,hasOgg:!0,name:"vignette3"},{volume:1,hasOgg:!0,name:"vignette4-intro"},{volume:1,hasOgg:!0,name:"vignette5-shortpiano"},{volume:1,hasOgg:!0,name:"vignette7-funky-chirps-short"},{volume:1,hasOgg:!0,name:"vignette8-free-play"}],CHARACTER_STEVE="Steve",CHARACTER_ALEX="Alex",DEFAULT_CHARACTER=CHARACTER_STEVE;function trySetLocalStorageItem(t,e){try{window.localStorage.setItem(t,e)}catch(e){console&&console.log&&console.log("Couldn't set local storage item for key "+t)}}Craft.init=function(n){1===n.level.puzzle_number&&1===n.level.stage_total&&(n.level.puzzle_number=999),n.level.isTestLevel&&(n.level.customSlowMotion=.1),n.level.disableFinalStageMessage=!0;var e=document.documentMode;e&&(0,_jquery2.default)("body").addClass("ieVersion"+e);var t=document.body;t.className=t.className+" minecraft",n.level.afterVideoBeforeInstructionsFn=function(t){Craft.beginBackgroundMusic(),n.level.showPopupOnLoad?"playerSelection"===n.level.showPopupOnLoad&&Craft.showPlayerSelectionPopup(function(e){(0,_trackEvent2.default)("Minecraft","ChoseCharacter",e),Craft.clearPlayerState(),trySetLocalStorageItem("craftSelectedPlayer",e),Craft.updateUIForCharacter(e),Craft.initializeAppLevel(n.level),t()}):t()},Craft.initialConfig=n,(0,_StudioApp.singleton)().reset=this.reset.bind(this),(0,_StudioApp.singleton)().runButtonClick=this.runButtonClick.bind(this),Craft.level=n.level,Craft.skin=n.skin;var o=[];Craft.level.songs&&MUSIC_METADATA&&(o=MUSIC_METADATA.filter(function(e){return-1!==Craft.level.songs.indexOf(e.name)})),Craft.musicController=new _MusicController2.default(_Sounds2.default.getSingleton(),function(e){return n.skin.assetUrl("music/"+e)},o,1<o.length?7500:null),Craft.beginBackgroundMusic=function(){_Sounds2.default.getSingleton().whenAudioUnlocked(function(){var e=Craft.level.songs&&1<Craft.level.songs.length?Craft.level.songs[0]:null;Craft.musicController.play(e)})};var i=characters[Craft.getCurrentCharacter()];n.skin.staticAvatar=i.staticAvatar,n.skin.smallStaticAvatar=i.smallStaticAvatar,n.skin.failureAvatar=i.failureAvatar,n.skin.winAvatar=i.winAvatar;var a=n.level;(0,_StudioApp.singleton)().setPageConstants(n,{isMinecraft:!0}),_reactDom2.default.render(_react2.default.createElement(Provider,{store:(0,_redux.getStore)()},_react2.default.createElement(_AppView2.default,{visualizationColumn:_react2.default.createElement(CraftVisualizationColumn,{showFinishButton:!n.level.isProjectLevel}),onMount:function(){(0,_StudioApp.singleton)().init(Object.assign({},n,{forceInsertTopBlock:"when_run",appStrings:{generatedCodeDescription:_locale2.default.generatedCodeDescription()},loadAudio:function(){},afterInject:function(){var e=parseFloat((location.search.split("customSlowMotion=")[1]||"").split("&")[0]);Craft.gameController=new _craft.GameController({Phaser:window.Phaser,containerId:"phaser-game",assetRoot:Craft.skin.assetUrl(""),audioPlayer:{register:(0,_StudioApp.singleton)().registerAudio.bind((0,_StudioApp.singleton)()),play:(0,_StudioApp.singleton)().playAudio.bind((0,_StudioApp.singleton)())},debug:!1,customSlowMotion:n.level.isTestLevel?.5:e,earlyLoadAssetPacks:Craft.earlyLoadAssetsForLevel(a.puzzle_number),afterAssetsLoaded:function(){Craft.musicController.preload()},earlyLoadNiceToHaveAssetPacks:Craft.niceToHaveAssetsForLevel(a.puzzle_number)}),n.level.showPopupOnLoad||Craft.initializeAppLevel(n.level),(0,_StudioApp.singleton)().hideSource&&(document.getElementById("visualizationColumn").style.width=this.nativeVizWidth+"px")},twitter:{text:"Share on Twitter",hashtag:"Craft"}}));var e=[];e=e.concat(interfaceImages.DEFAULT),n.level.puzzle_number&&interfaceImages[n.level.puzzle_number]&&(e=e.concat(interfaceImages[n.level.puzzle_number])),e.forEach(function(e){preloadImage(e)});var t=(0,_jquery2.default)(".mc-share-button");t.length&&_dom2.default.addClickTouchEvent(t[0],function(){Craft.reportResult(!0)})}})),document.getElementById(n.containerId))};var preloadImage=function(e){(new Image).src=e};Craft.characterAssetPackName=function(e){return"player"+e+"Aquatic"},Craft.getCurrentCharacter=function(){return window.localStorage.getItem("craftSelectedPlayer")||DEFAULT_CHARACTER},Craft.updateUIForCharacter=function(e){Craft.initialConfig.skin.staticAvatar=characters[e].staticAvatar,Craft.initialConfig.skin.smallStaticAvatar=characters[e].smallStaticAvatar,Craft.initialConfig.skin.failureAvatar=characters[e].failureAvatar,Craft.initialConfig.skin.winAvatar=characters[e].winAvatar,(0,_StudioApp.singleton)().setIconsFromSkin(Craft.initialConfig.skin),(0,_jquery2.default)("#prompt-icon").attr("src",characters[e].smallStaticAvatar)},Craft.showPlayerSelectionPopup=function(e){var t=DEFAULT_CHARACTER,n=document.createElement("div");n.innerHTML=__webpack_require__(3419)({image:(0,_StudioApp.singleton)().assetUrl()});var o=(0,_StudioApp.singleton)().createModalDialog({contentDiv:n,defaultBtnSelector:"#choose-steve",onHidden:function(){e(t)},id:"craft-popup-player-selection"});_dom2.default.addClickTouchEvent((0,_jquery2.default)("#close-character-select")[0],function(){o.hide()}.bind(this)),_dom2.default.addClickTouchEvent((0,_jquery2.default)("#choose-steve")[0],function(){t=CHARACTER_STEVE,(0,_trackEvent2.default)("Minecraft","ClickedCharacter",t),o.hide()}.bind(this)),_dom2.default.addClickTouchEvent((0,_jquery2.default)("#choose-alex")[0],function(){t=CHARACTER_ALEX,(0,_trackEvent2.default)("Minecraft","ClickedCharacter",t),o.hide()}.bind(this)),o.show()},Craft.clearPlayerState=function(){window.localStorage.removeItem("craftSelectedPlayer")},Craft.initializeAppLevel=function(levelConfig){_craft.utils.convertActionPlaneEntitiesToConfig(levelConfig);for(var fluffPlane=[],i=0;i<(levelConfig.gridWidth||10)*(levelConfig.gridHeight||10);i++)fluffPlane.push("");var levelAssetPacks={beforeLoad:Craft.minAssetsForLevelWithCharacter(levelConfig.puzzle_number),afterLoad:Craft.afterLoadAssetsForLevel(levelConfig.puzzle_number)};Craft.gameController.loadLevel({isAquaticLevel:levelConfig.isAquaticLevel,boat:levelConfig.boat,ocean:levelConfig.ocean,isDaytime:levelConfig.isDaytime,groundPlane:levelConfig.groundPlane,groundDecorationPlane:levelConfig.groundDecorationPlane,actionPlane:levelConfig.actionPlane,fluffPlane:fluffPlane,entities:levelConfig.entities,playerStartPosition:levelConfig.playerStartPosition,playerStartDirection:levelConfig.playerStartDirection,playerName:Craft.getCurrentCharacter()+"Aquatic",assetPacks:levelAssetPacks,specialLevelType:levelConfig.specialLevelType,houseBottomRight:levelConfig.houseBottomRight,gridDimensions:levelConfig.gridWidth&&levelConfig.gridHeight?[levelConfig.gridWidth,levelConfig.gridHeight]:null,verificationFunction:eval("["+levelConfig.verificationFunction+"]")[0]})},Craft.minAssetsForLevelWithCharacter=function(e){return Craft.minAssetsForLevelNumber(e).concat([Craft.characterAssetPackName(Craft.getCurrentCharacter())])},Craft.minAssetsForLevelNumber=function(e){switch(e){case 1:case 2:return["aquaticIslandAssets"];case 3:case 4:return["aquaticLevelThreeAndFourAssets"];default:return["aquaticAllAssetsMinusPlayer"]}},Craft.afterLoadAssetsForLevel=function(e){return[]},Craft.earlyLoadAssetsForLevel=function(e){switch(e){case 1:return Craft.minAssetsForLevelNumber(e);default:return Craft.minAssetsForLevelWithCharacter(e)}},Craft.niceToHaveAssetsForLevel=function(e){switch(e){case 1:return["playerSteve","playerAlex"];default:return["adventurerAllAssetsMinusPlayer"]}},Craft.reset=function(e){e||((0,_thumbnail.captureThumbnailFromCanvas)((0,_jquery2.default)("#minecraft-frame canvas")[0]),Craft.gameController.codeOrgAPI.resetAttempt())},Craft.phaserLoaded=function(){return Craft.gameController&&Craft.gameController.game&&!Craft.gameController.game.load.isLoading},Craft.runButtonClick=function(){if(Craft.phaserLoaded()){var e=document.getElementById("runButton"),t=document.getElementById("resetButton");if(t.style.minWidth||(t.style.minWidth=e.offsetWidth+"px"),(0,_StudioApp.singleton)().toggleRunReset("reset"),Blockly.mainBlockSpace.traceOn(!0),(0,_StudioApp.singleton)().attempts++,Craft.executeUserCode(),Craft.level.freePlay&&!(0,_StudioApp.singleton)().hideSource){var n=(0,_jquery2.default)("#right-button-cell");if(n.length&&!n.hasClass("right-button-cell-enabled")){n.addClass("right-button-cell-enabled"),(0,_StudioApp.singleton)().onResize();var o=document.createEvent("Event");o.initEvent("finishButtonShown",!0,!0),document.dispatchEvent(o)}}}},Craft.executeUserCode=function(){if(Craft.initialConfig.level.edit_blocks)this.reportResult(!0);else if((0,_StudioApp.singleton)().hasUnwantedExtraTopBlocks())this.reportResult(!1);else{(0,_StudioApp.singleton)().playAudio("start");var t=void 0;Blockly.mainBlockSpace.traceOn(!0);var n=Craft.gameController.codeOrgAPI;n.startCommandCollection(),n.registerEventCallback(null,function(e){e.eventType===_craft.EventType.WhenUsed&&"sheep"===e.targetType&&n.drop(null,"wool",e.targetIdentifier),e.eventType===_craft.EventType.WhenTouched&&"creeper"===e.targetType&&(n.flashEntity(null,e.targetIdentifier),n.explodeEntity(null,e.targetIdentifier))});var e="";this.level.sharedBlocks&&(e+=this.level.sharedBlocks.map(function(e){return e.helperCode}).filter(function(e){return e}).join("\n")+"\n");var o=function(e){return function(){e(),t.run()}},i={moveForward:function(e){n.moveForward(null,"Player",o(e))},turnLeft:function(e){n.turnLeft(null,"Player",o(e))},turnRight:function(e){n.turnRight(null,"Player",o(e))}},a=Blockly.mainBlockSpace.getTopBlocks(!0);e+=Blockly.Generator.blocksToCode("JavaScript",a),t=_CustomMarshalingInterpreter2.default.evalWith(e,_extends({console:{log:console.log}},i,{api:n,walkableAhead:function(){return Craft.gameController.levelModel.canMoveForward()[0]},walkableToRight:function(){Craft.gameController.levelModel.turnRight();var e=Craft.gameController.levelModel.canMoveForward()[0];return Craft.gameController.levelModel.turnLeft(),e},walkableToLeft:function(){Craft.gameController.levelModel.turnLeft();var e=Craft.gameController.levelModel.canMoveForward()[0];return Craft.gameController.levelModel.turnRight(),e},getStandingOnBlockType:function(){return Craft.gameController.levelModel.groundPlane.getBlockAt(Craft.gameController.getEntity().position).blockType},isStandingOnMiniBlock:function(){return Craft.gameController.levelModel.actionPlane.getBlockAt(Craft.gameController.getEntity().position).getIsMiniblock()},isFinished:function(){return Craft.gameController.levelModel.isFailed()||Craft.gameController.levelModel.isSolved()}}),{asyncFunctionList:Object.values(i)}),n.startAttempt(function(e,t){Craft.level.freePlay||this.reportResult(e)}.bind(this))}},Craft.getTestResultFrom=function(e,t){return t===_constants.TestResults.LEVEL_INCOMPLETE_FAIL?_constants.TestResults.APP_SPECIFIC_FAIL:Craft.initialConfig.level.freePlay?_constants.TestResults.FREE_PLAY:t},Craft.reportResult=function(e){var t=(0,_StudioApp.singleton)().getTestResults(e),n=Craft.getTestResultFrom(e,t),o=Craft.initialConfig.level.freePlay?Craft.gameController.getScreenshot():null,i=o?encodeURIComponent(o.split(",")[1]):null;(0,_StudioApp.singleton)().report({app:"craft",level:Craft.initialConfig.level.id,result:!!Craft.initialConfig.level.freePlay||e,testResult:n,image:i,program:encodeURIComponent(Blockly.Xml.domToText(Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace))),onComplete:function(e){var t=(0,_redux.getStore)().getState().currentUser.signInState===_currentUserRedux.SignInState.SignedIn;(0,_StudioApp.singleton)().displayFeedback({feedbackType:n,response:e,level:Craft.initialConfig.level,defaultToContinue:Craft.shouldDefaultToContinue(n),appStrings:{reinfFeedbackMsg:_locale2.default.reinfFeedbackMsg(),nextLevelMsg:_locale2.default.nextLevelMsg({puzzleNumber:Craft.initialConfig.level.puzzle_number}),tooManyBlocksFailMsgFunction:_locale2.default.tooManyBlocksFail,generatedCodeDescription:_locale2.default.generatedCodeDescription()},feedbackImage:o,showingSharing:Craft.initialConfig.level.freePlay,saveToProjectGallery:!0,disableSaveToGallery:!t})}})},Craft.shouldDefaultToContinue=function(e){var t=e===_constants.TestResults.FREE_PLAY;return e>_constants.TestResults.APP_SPECIFIC_ACCEPTABLE_FAIL&&!t}},3583:function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_jquery=__webpack_require__(9),_jquery2=_interopRequireDefault(_jquery),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(7),_reactDom2=_interopRequireDefault(_reactDom),_lodash=__webpack_require__(16),_lodash2=_interopRequireDefault(_lodash),_hammerjs=__webpack_require__(2965),_hammerjs2=_interopRequireDefault(_hammerjs),_StudioApp=__webpack_require__(240),_locale=__webpack_require__(2592),_locale2=_interopRequireDefault(_locale),_CustomMarshalingInterpreter=__webpack_require__(914),_CustomMarshalingInterpreter2=_interopRequireDefault(_CustomMarshalingInterpreter),_craft=__webpack_require__(2521),_dom=__webpack_require__(145),_dom2=_interopRequireDefault(_dom),_eventsLevelbuilderOverrides=__webpack_require__(3584),_eventsLevelbuilderOverrides2=_interopRequireDefault(_eventsLevelbuilderOverrides),_MusicController=__webpack_require__(2631),_MusicController2=_interopRequireDefault(_MusicController),_reactRedux=__webpack_require__(8),_AppView=__webpack_require__(1794),_AppView2=_interopRequireDefault(_AppView),_CraftVisualizationColumn=__webpack_require__(3585),_CraftVisualizationColumn2=_interopRequireDefault(_CraftVisualizationColumn),_blocks=__webpack_require__(2690),_redux=__webpack_require__(51),_Sounds=__webpack_require__(365),_Sounds2=_interopRequireDefault(_Sounds),_constants=__webpack_require__(46),_trackEvent=__webpack_require__(125),_trackEvent2=_interopRequireDefault(_trackEvent),_thumbnail=__webpack_require__(1618),_currentUserRedux=__webpack_require__(332);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var MEDIA_URL="/blockly/media/craft/",FIRST_CHARACTER_LEVEL=4,ArrowIds={LEFT:"leftButton",UP:"upButton",RIGHT:"rightButton",DOWN:"downButton"},Craft=module.exports;window.Craft=Craft,window.Blockly=Blockly;var eventsCharacters={Steve:{name:"Steve",staticAvatar:MEDIA_URL+"Events/Pop_Up_Character_Steve_Neutral.png",smallStaticAvatar:MEDIA_URL+"Events/Pop_Up_Character_Steve_Neutral.png",failureAvatar:MEDIA_URL+"Events/Pop_Up_Character_Steve_Fail.png",winAvatar:MEDIA_URL+"Events/Pop_Up_Character_Steve_Win.png"},Alex:{name:"Alex",staticAvatar:MEDIA_URL+"Events/Pop_Up_Character_Alex_Neutral.png",smallStaticAvatar:MEDIA_URL+"Events/Pop_Up_Character_Alex_Neutral.png",failureAvatar:MEDIA_URL+"Events/Pop_Up_Character_Alex_Fail.png",winAvatar:MEDIA_URL+"Events/Pop_Up_Character_Alex_Win.png"},Chicken:{staticAvatar:MEDIA_URL+"Events/Pop_Up_Character_Chicken_Neutral.png",smallStaticAvatar:MEDIA_URL+"Events/Pop_Up_Character_Chicken_Neutral.png",failureAvatar:MEDIA_URL+"Events/Pop_Up_Character_Chicken_Fail.png",winAvatar:MEDIA_URL+"Events/Pop_Up_Character_Chicken_Win.png"}},CHICKEN_ASSETS=[eventsCharacters.Chicken.staticAvatar,eventsCharacters.Chicken.smallStaticAvatar,eventsCharacters.Chicken.winAvatar,eventsCharacters.Chicken.failureAvatar],CHARACTER_ASSETS=[MEDIA_URL+"Events/Steve_Character_Select.png",MEDIA_URL+"Events/Alex_Character_Select.png",eventsCharacters.Steve.staticAvatar,eventsCharacters.Steve.smallStaticAvatar,eventsCharacters.Alex.staticAvatar,eventsCharacters.Alex.smallStaticAvatar],COMMON_UI_ASSETS=[MEDIA_URL+"Sliced_Parts/MC_Loading_Spinner.gif",MEDIA_URL+"Sliced_Parts/Frame_Large_Plus_Logo.png",MEDIA_URL+"Sliced_Parts/Pop_Up_Slice.png",MEDIA_URL+"Sliced_Parts/X_Button.png",MEDIA_URL+"Sliced_Parts/Button_Grey_Slice.png",MEDIA_URL+"Sliced_Parts/MC_Button_Pressed.png",MEDIA_URL+"Sliced_Parts/Run_Button_Up_Slice.png",MEDIA_URL+"Sliced_Parts/Run_Button_Down_Slice.png",MEDIA_URL+"Sliced_Parts/MC_Run_Arrow_Icon_Smaller.png",MEDIA_URL+"Sliced_Parts/MC_Up_Arrow_Icon.png",MEDIA_URL+"Sliced_Parts/MC_Down_Arrow_Icon.png",MEDIA_URL+"Sliced_Parts/Reset_Button_Up_Slice.png",MEDIA_URL+"Sliced_Parts/MC_Reset_Arrow_Icon.png",MEDIA_URL+"Sliced_Parts/Reset_Button_Down_Slice.png",MEDIA_URL+"Sliced_Parts/Callout_Tail.png"],interfaceImages={DEFAULT:COMMON_UI_ASSETS,1:CHICKEN_ASSETS,2:CHICKEN_ASSETS,3:CHICKEN_ASSETS,4:CHARACTER_ASSETS,5:CHARACTER_ASSETS,6:CHARACTER_ASSETS,7:CHARACTER_ASSETS,8:CHARACTER_ASSETS,9:CHARACTER_ASSETS,10:CHARACTER_ASSETS,11:CHARACTER_ASSETS,12:CHARACTER_ASSETS},MUSIC_METADATA=[{volume:1,hasOgg:!0,name:"vignette1",group:"day"},{volume:1,hasOgg:!0,name:"vignette2-quiet",group:"night"},{volume:1,hasOgg:!0,name:"vignette3",group:"night"},{volume:1,hasOgg:!0,name:"vignette4-intro",group:"day"},{volume:1,hasOgg:!0,name:"vignette5-shortpiano",group:"day"},{volume:1,hasOgg:!0,name:"vignette7-funky-chirps-short",group:"day"},{volume:1,hasOgg:!0,name:"vignette8-free-play",group:"day"}],CHARACTER_STEVE="Steve",CHARACTER_ALEX="Alex",DEFAULT_CHARACTER=CHARACTER_ALEX;function trySetLocalStorageItem(t,e){try{window.localStorage.setItem(t,e)}catch(e){console&&console.log&&console.log("Couldn't set local storage item for key "+t)}}Craft.init=function(r){1===r.level.puzzle_number&&1===r.level.stage_total&&(r.level.puzzle_number=999),r.level.isTestLevel&&(r.level.customSlowMotion=.1),r.level.disableFinalStageMessage=!0,r.showInstructionsInTopPane=!0;var e=document.documentMode;e&&(0,_jquery2.default)("body").addClass("ieVersion"+e),r.level.useScore&&(0,_jquery2.default)("body").addClass("minecraft-scoring"),r.level.isEventLevel&&(0,_jquery2.default)("body").addClass("minecraft-events");var t=document.body;t.className=t.className+" minecraft",r.level.afterVideoBeforeInstructionsFn=function(t){Craft.beginBackgroundMusic(),r.level.showPopupOnLoad?"playerSelection"===r.level.showPopupOnLoad&&Craft.showPlayerSelectionPopup(function(e){(0,_trackEvent2.default)("MinecraftDesigner","ChoseCharacter",e),Craft.clearPlayerState(),trySetLocalStorageItem("craftSelectedPlayer",e),Craft.updateUIForCharacter(e),Craft.initializeAppLevel(r.level),t()}):t()},r.level.puzzle_number&&_eventsLevelbuilderOverrides2.default[r.level.puzzle_number]&&Object.assign(r.level,_eventsLevelbuilderOverrides2.default[r.level.puzzle_number]),Craft.initialConfig=r,(0,_StudioApp.singleton)().reset=this.reset.bind(this),(0,_StudioApp.singleton)().runButtonClick=this.runButtonClick.bind(this),Craft.level=r.level,Craft.skin=r.skin;var n=[];Craft.level.songs&&MUSIC_METADATA&&(n=MUSIC_METADATA.filter(function(e){return-1!==Craft.level.songs.indexOf(e.name)})),Craft.musicController=new _MusicController2.default(_Sounds2.default.getSingleton(),function(e){return r.skin.assetUrl("music/"+e)},n,r.level.dayNightCycleTime?100:1<n.length?7500:null),Craft.beginBackgroundMusic=function(){_Sounds2.default.getSingleton().whenAudioUnlocked(function(){var e=Craft.level.songs&&1<Craft.level.songs.length?Craft.level.songs[0]:null;Craft.musicController.play(e)})};var o=r.level.usePlayer?eventsCharacters[Craft.getCurrentCharacter()]:eventsCharacters.Chicken;r.skin.staticAvatar=o.staticAvatar,r.skin.smallStaticAvatar=o.smallStaticAvatar,r.skin.failureAvatar=o.failureAvatar,r.skin.winAvatar=o.winAvatar;(0,_StudioApp.singleton)().setPageConstants(r,{isMinecraft:!0}),_reactDom2.default.render(_react2.default.createElement(_reactRedux.Provider,{store:(0,_redux.getStore)()},_react2.default.createElement(_AppView2.default,{visualizationColumn:_react2.default.createElement(_CraftVisualizationColumn2.default,{showFinishButton:!r.level.isProjectLevel,showScore:!!r.level.useScore}),onMount:function(){(0,_StudioApp.singleton)().init(_extends({},r,{forceInsertTopBlock:null,appStrings:{generatedCodeDescription:_locale2.default.generatedCodeDescription()},enableShowCode:!1,enableShowBlockCount:!1,loadAudio:function(){},afterInject:function(){var e;r.level.showMovementBanner&&(0,_StudioApp.singleton)().displayWorkspaceAlert("warning",_react2.default.createElement("div",null,_locale2.default.useArrowKeys()));var t=parseFloat((location.search.split("customSlowMotion=")[1]||"").split("&")[0]);Craft.gameController=new _craft.GameController({Phaser:window.Phaser,containerId:"phaser-game",onScoreUpdate:r.level.useScore?function(e){return(0,_jquery2.default)("#score-number").text(e)}:null,assetRoot:Craft.skin.assetUrl(""),audioPlayer:{register:(0,_StudioApp.singleton)().registerAudio.bind((0,_StudioApp.singleton)()),play:(0,_StudioApp.singleton)().playAudio.bind((0,_StudioApp.singleton)())},debug:!1,customSlowMotion:t,earlyLoadAssetPacks:Craft.earlyLoadAssetsForLevel(r.level.puzzle_number),afterAssetsLoaded:function(){Craft.musicController.preload()},earlyLoadNiceToHaveAssetPacks:Craft.niceToHaveAssetsForLevel(r.level.puzzle_number)}),r.level.showPopupOnLoad||Craft.initializeAppLevel(r.level),(0,_StudioApp.singleton)().hideSource&&(document.getElementById("visualizationColumn").style.width=this.nativeVizWidth+"px");for(var n in ArrowIds)_dom2.default.addMouseUpTouchEvent(document.getElementById(ArrowIds[n]),function(e){return function(){Craft.onArrowButtonUp(ArrowIds[e])}}(n)),_dom2.default.addMouseDownTouchEvent(document.getElementById(ArrowIds[n]),function(t){return function(e){Craft.onArrowButtonDown(e,ArrowIds[t])}}(n));_dom2.default.addMouseUpTouchEvent(document,Craft.onDocumentMouseUp,!1),(0,_jquery2.default)("#soft-buttons").removeClass("soft-buttons-none").addClass("soft-buttons-4"),Craft.hideSoftButtons();var o=document.getElementById("phaser-game"),i=(_defineProperty(e={},_hammerjs2.default.DIRECTION_LEFT,"leftButton"),_defineProperty(e,_hammerjs2.default.DIRECTION_RIGHT,"rightButton"),_defineProperty(e,_hammerjs2.default.DIRECTION_UP,"upButton"),_defineProperty(e,_hammerjs2.default.DIRECTION_DOWN,"downButton"),e),a=new _hammerjs2.default.Manager(o);a.add(new _hammerjs2.default.Pan({direction:_hammerjs2.default.DIRECTION_ALL})),a.add(new _hammerjs2.default.Press({time:150})),a.add(new _hammerjs2.default.Tap),a.on("pan",function(e){i[e.direction]&&Craft.gameController.codeOrgAPI.arrowDown(directionToFacing[i[e.direction]]),e.preventDefault()}),a.on("panend pancancel",function(e){i[e.direction]&&Craft.gameController.codeOrgAPI.arrowUp(directionToFacing[i[e.direction]]),e.preventDefault()}),a.on("press",function(){return Craft.gameController.codeOrgAPI.clickDown(function(){})}),a.on("tap",function(){Craft.gameController.codeOrgAPI.clickDown(function(){}),Craft.gameController.codeOrgAPI.clickUp(function(){})}),a.on("pressup",function(){return Craft.gameController.codeOrgAPI.clickUp(function(){})})},twitter:{text:"Share on Twitter",hashtag:"Craft"}}));var e=[];e=e.concat(interfaceImages.DEFAULT),r.level.puzzle_number&&interfaceImages[r.level.puzzle_number]&&(e=e.concat(interfaceImages[r.level.puzzle_number])),e.forEach(function(e){preloadImage(e)});var t=(0,_jquery2.default)(".mc-share-button");t.length&&_dom2.default.addClickTouchEvent(t[0],function(){Craft.reportResult(!0)})}})),document.getElementById(r.containerId))};var directionToFacing={upButton:_craft.FacingDirection.North,downButton:_craft.FacingDirection.South,leftButton:_craft.FacingDirection.West,rightButton:_craft.FacingDirection.East};Craft.onArrowButtonDown=function(e,t){Craft.gameController.codeOrgAPI.arrowDown(directionToFacing[t]),e.preventDefault()},Craft.onArrowButtonUp=function(e){Craft.gameController.codeOrgAPI.arrowUp(directionToFacing[e])},Craft.onDocumentMouseUp=function(){if(Craft.phaserLoaded()&&Craft.levelInitialized())for(var e in directionToFacing)Craft.gameController.codeOrgAPI.arrowUp(directionToFacing[e])};var preloadImage=function(e){(new Image).src=e};Craft.characterAssetPackName=function(e){return"player"+e+"Events"},Craft.getCurrentCharacter=function(){return window.localStorage.getItem("craftSelectedPlayer")||DEFAULT_CHARACTER},Craft.updateUIForCharacter=function(e){var t=eventsCharacters;Craft.initialConfig.skin.staticAvatar=t[e].staticAvatar,Craft.initialConfig.skin.smallStaticAvatar=t[e].smallStaticAvatar,Craft.initialConfig.skin.failureAvatar=t[e].failureAvatar,Craft.initialConfig.skin.winAvatar=t[e].winAvatar,(0,_StudioApp.singleton)().setIconsFromSkin(Craft.initialConfig.skin),(0,_jquery2.default)("#prompt-icon").attr("src",t[e].smallStaticAvatar)},Craft.showPlayerSelectionPopup=function(e){var t=DEFAULT_CHARACTER,n=document.createElement("div");n.innerHTML=__webpack_require__(3586)({image:(0,_StudioApp.singleton)().assetUrl()});var o=(0,_StudioApp.singleton)().createModalDialog({contentDiv:n,defaultBtnSelector:"#choose-steve",onHidden:function(){e(t)},id:"craft-popup-player-selection"});_dom2.default.addClickTouchEvent((0,_jquery2.default)("#close-character-select")[0],function(){o.hide()}.bind(this)),_dom2.default.addClickTouchEvent((0,_jquery2.default)("#choose-steve")[0],function(){t=CHARACTER_STEVE,(0,_trackEvent2.default)("MinecraftDesigner","ClickedCharacter",t),o.hide()}.bind(this)),_dom2.default.addClickTouchEvent((0,_jquery2.default)("#choose-alex")[0],function(){t=CHARACTER_ALEX,(0,_trackEvent2.default)("MinecraftDesigner","ClickedCharacter",t),o.hide()}.bind(this)),o.show()},Craft.clearPlayerState=function(){window.localStorage.removeItem("craftSelectedPlayer")},Craft.initializeAppLevel=function(levelConfig){_craft.utils.convertActionPlaneEntitiesToConfig(levelConfig);for(var fluffPlane=[],i=0;i<(levelConfig.gridWidth||10)*(levelConfig.gridHeight||10);i++)fluffPlane.push("");var levelAssetPacks={beforeLoad:Craft.minAssetsForLevelWithCharacter(levelConfig.puzzle_number),afterLoad:Craft.afterLoadAssetsForLevel(levelConfig.puzzle_number)},doNotShowPlayer=!1===levelConfig.usePlayer;Craft.gameController.loadLevel({onDayCallback:function(){Craft.musicController.setGroup("day"),Craft.musicController.fadeOut()},onNightCallback:function(){Craft.musicController.setGroup("night"),Craft.musicController.fadeOut()},levelVerificationTimeout:levelConfig.levelVerificationTimeout,isDaytime:levelConfig.isDaytime,groundPlane:levelConfig.groundPlane,usePlayer:!doNotShowPlayer,useScore:levelConfig.useScore,entities:levelConfig.entities,isEventLevel:levelConfig.isEventLevel,groundDecorationPlane:levelConfig.groundDecorationPlane,actionPlane:levelConfig.actionPlane,fluffPlane:fluffPlane,playerStartPosition:levelConfig.playerStartPosition,playerStartDirection:levelConfig.playerStartDirection,playerName:Craft.getCurrentCharacter()+"Events",assetPacks:levelAssetPacks,gridDimensions:levelConfig.gridWidth&&levelConfig.gridHeight?[levelConfig.gridWidth,levelConfig.gridHeight]:null,verificationFunction:eval("["+levelConfig.verificationFunction+"]")[0],failureCheckFunction:eval("["+levelConfig.failureCheckFunction+"]")[0],timeoutResult:eval("["+(levelConfig.timeoutVerificationFunction||"function() { return false; }")+"]")[0]})},Craft.minAssetsForLevelWithCharacter=function(e){var t=FIRST_CHARACTER_LEVEL<=e?[Craft.characterAssetPackName(Craft.getCurrentCharacter())]:[];return Craft.minAssetsForLevelNumber(e).concat(t)},Craft.minAssetsForLevelNumber=function(e){switch(e){case 1:return["levelOneAssets"];case 2:return["levelTwoAssets"];case 3:return["levelThreeAssets"];default:return["designerAllAssetsMinusPlayer"]}},Craft.afterLoadAssetsForLevel=function(e){switch(e){case 1:return Craft.minAssetsForLevelNumber(2);default:return["designerAllAssetsMinusPlayer"]}},Craft.earlyLoadAssetsForLevel=function(e){return e<=FIRST_CHARACTER_LEVEL?Craft.minAssetsForLevelNumber(e):Craft.minAssetsForLevelWithCharacter(e)},Craft.niceToHaveAssetsForLevel=function(e){return e===FIRST_CHARACTER_LEVEL?["playerSteveEvents","playerAlexEvents"]:["designerAllAssetsMinusPlayer"]},Craft.hideSoftButtons=function(){(0,_jquery2.default)("#soft-buttons").hide(),(0,_StudioApp.singleton)().resizePinnedBelowVisualizationArea()},Craft.showSoftButtons=function(){(0,_jquery2.default)("#soft-buttons").show(),(0,_StudioApp.singleton)().resizePinnedBelowVisualizationArea()},Craft.reset=function(e){e||(Craft.level.usePlayer&&Craft.hideSoftButtons(),(0,_thumbnail.captureThumbnailFromCanvas)((0,_jquery2.default)("#minecraft-frame canvas")[0]),Craft.gameController.codeOrgAPI.resetAttempt())},Craft.phaserLoaded=function(){return Craft.gameController&&Craft.gameController.game&&Craft.gameController.game.load&&!Craft.gameController.game.load.isLoading},Craft.levelInitialized=function(){return Craft.gameController&&Craft.gameController.levelModel},Craft.runButtonClick=function(){if(Craft.phaserLoaded()){Craft.level.usePlayer&&Craft.showSoftButtons(),Craft.gameController.game.input.touch.preventDefault=!1;var e=document.getElementById("runButton"),t=document.getElementById("resetButton");if(t.style.minWidth||(t.style.minWidth=e.offsetWidth+"px"),(0,_StudioApp.singleton)().toggleRunReset("reset"),Blockly.mainBlockSpace.traceOn(!0),(0,_StudioApp.singleton)().attempts++,Craft.executeUserCode(),Craft.level.freePlay&&!(0,_StudioApp.singleton)().hideSource){var n=(0,_jquery2.default)("#right-button-cell");if(n.length&&!n.hasClass("right-button-cell-enabled")){n.addClass("right-button-cell-enabled"),(0,_StudioApp.singleton)().onResize();var o=document.createEvent("Event");o.initEvent("finishButtonShown",!0,!0),document.dispatchEvent(o)}}}},Craft.executeUserCode=function(){if(Craft.initialConfig.level.edit_blocks)this.reportResult(!0);else if((0,_StudioApp.singleton)().hasUnwantedExtraTopBlocks())this.reportResult(!1);else{(0,_StudioApp.singleton)().playAudio("start"),Blockly.mainBlockSpace.traceOn(!0);var i=Craft.gameController.codeOrgAPI;i.startCommandCollection();var e=Blockly.mainBlockSpace.getTopBlocks(!0);(0,_StudioApp.singleton)().initializationBlocks&&(e=(0,_StudioApp.singleton)().initializationBlocks.concat(e));var t=Blockly.Generator.blocksToCode("JavaScript",e),a={moveForward:function(e){i.moveForward((0,_StudioApp.singleton)().highlight.bind((0,_StudioApp.singleton)(),e))},drop:function(e,t,n){i.drop((0,_StudioApp.singleton)().highlight.bind((0,_StudioApp.singleton)(),n),e,t)},turnLeft:function(e){i.turn((0,_StudioApp.singleton)().highlight.bind((0,_StudioApp.singleton)(),e),"left")},turnRight:function(e){i.turn((0,_StudioApp.singleton)().highlight.bind((0,_StudioApp.singleton)(),e),"right")},destroyBlock:function(e){i.destroyBlock((0,_StudioApp.singleton)().highlight.bind((0,_StudioApp.singleton)(),e))},repeat:function(e,t,n,o){i.repeat((0,_StudioApp.singleton)().highlight.bind((0,_StudioApp.singleton)(),e),t.bind(null,{targetIdentifier:o}),n,o)},repeatRandom:function(e,t,n){i.repeatRandom((0,_StudioApp.singleton)().highlight.bind((0,_StudioApp.singleton)(),e),t,n)},playSound:function(e,t,n){i.playSound((0,_StudioApp.singleton)().highlight.bind((0,_StudioApp.singleton)(),n),e,t)},addScore:function(e,t){i.addScore((0,_StudioApp.singleton)().highlight.bind((0,_StudioApp.singleton)(),t),parseInt(e))},moveDirection:function(e,t,n){var o={up:_craft.FacingDirection.North,down:_craft.FacingDirection.South,left:_craft.FacingDirection.West,right:_craft.FacingDirection.East};i.moveDirection((0,_StudioApp.singleton)().highlight.bind((0,_StudioApp.singleton)(),n),o[e],t)},spawnEntity:function(e,t,n){i.spawnEntity((0,_StudioApp.singleton)().highlight.bind((0,_StudioApp.singleton)(),n),e,t)},wait:function(e,t,n){i.wait((0,_StudioApp.singleton)().highlight.bind((0,_StudioApp.singleton)(),n),"random"===e?_lodash2.default.random(.1,3,!0):e,t)},spawnEntityRandom:function(e,t){var n=_lodash2.default.sample(["up","middle","right","down","left"]);i.spawnEntity((0,_StudioApp.singleton)().highlight.bind((0,_StudioApp.singleton)(),t),e,n)}};_blocks.ENTITY_ACTION_BLOCKS.concat(["turnLeft","turnRight","turnRandom"]).forEach(function(n){a[n]=function(e,t){i[n]((0,_StudioApp.singleton)().highlight.bind((0,_StudioApp.singleton)(),t),e)}}),_blocks.ENTITY_TARGET_ACTION_BLOCKS.forEach(function(o){a[o]=function(e,t,n){i[o]((0,_StudioApp.singleton)().highlight.bind((0,_StudioApp.singleton)(),n),e,t)}});var r={},n={onEventTriggered:function(e,t,n,o){r["event-"+e+"-"+t]={code:n,args:["event"]}},onGlobalEventTriggered:function(e,t,n){r["event--"+e]={code:t,args:["event"]}}};_CustomMarshalingInterpreter2.default.evalWith(t,n);var o=[{instance:a.repeat,methodOpts:{nativeCallsBackInterpreter:!0,run:!0}}],l={};_CustomMarshalingInterpreter2.default.evalWithEvents(a,r,"",o).hooks.forEach(function(e){l[e.name]=e.func}),i.registerEventCallback(function(){},function(t){var e=t.targetType||"[^-]*",n=t.eventType,o=new RegExp("^event-"+e+"-"+n+"$");Object.keys(l).forEach(function(e){o.test(e)&&l[e](t)})}),i.startAttempt(function(e){Craft.hideSoftButtons(),Craft.level.freePlay||this.reportResult(e)}.bind(this)),Craft.initialConfig.level.dayNightCycleTime&&i.setDayNightCycle(Craft.initialConfig.level.dayNightCycleStart,Craft.initialConfig.level.dayNightCycleTime||0,Craft.initialConfig.level.isDaytime?"night":"day")}},Craft.getTestResultFrom=function(e,t){return t===_constants.TestResults.LEVEL_INCOMPLETE_FAIL?_constants.TestResults.APP_SPECIFIC_FAIL:Craft.initialConfig.level.freePlay?_constants.TestResults.FREE_PLAY:t},Craft.reportResult=function(e){var t=(0,_StudioApp.singleton)().getTestResults(e),n=Craft.getTestResultFrom(e,t),o=Craft.initialConfig.level.freePlay?Craft.gameController.getScreenshot():null,i=o?encodeURIComponent(o.split(",")[1]):null;(0,_StudioApp.singleton)().report({app:"craft",level:Craft.initialConfig.level.id,result:!!Craft.initialConfig.level.freePlay||e,testResult:n,image:i,program:encodeURIComponent(Blockly.Xml.domToText(Blockly.Xml.blockSpaceToDom(Blockly.mainBlockSpace))),onComplete:function(e){var t=(0,_redux.getStore)().getState().currentUser.signInState===_currentUserRedux.SignInState.SignedIn;(0,_StudioApp.singleton)().displayFeedback({feedbackType:n,response:e,level:Craft.initialConfig.level,defaultToContinue:Craft.shouldDefaultToContinue(n),appStrings:{reinfFeedbackMsg:_locale2.default.reinfFeedbackMsg(),nextLevelMsg:_locale2.default.nextLevelMsg({puzzleNumber:Craft.initialConfig.level.puzzle_number}),tooManyBlocksFailMsgFunction:_locale2.default.tooManyBlocksFail,generatedCodeDescription:_locale2.default.generatedCodeDescription()},feedbackImage:o,showingSharing:Craft.initialConfig.level.freePlay,saveToProjectGallery:!0,disableSaveToGallery:!t})}})},Craft.shouldDefaultToContinue=function(e){var t=e===_constants.TestResults.FREE_PLAY;return e>_constants.TestResults.APP_SPECIFIC_ACCEPTABLE_FAIL&&!t}},3584:function(e,t,n){"use strict";e.exports={1:{songs:["vignette4-intro"]},2:{songs:["vignette5-shortpiano"]},3:{songs:["vignette5-shortpiano","vignette4-intro"]},4:{songs:["vignette5-shortpiano","vignette4-intro"],songDelay:4e3,showMovementBanner:!0},5:{songs:["vignette7-funky-chirps-short","vignette4-intro"]},6:{songs:["vignette1","vignette4-intro"],songDelay:4e3},7:{songs:["vignette7-funky-chirps-short","vignette4-intro","vignette1"]},8:{songs:["vignette5-shortpiano","vignette1","vignette4-intro","vignette2-quiet","vignette3"]},9:{songs:["vignette5-shortpiano","vignette7-funky-chirps-short","vignette4-intro","vignette1"]},10:{songs:["vignette4-intro","vignette5-shortpiano","vignette7-funky-chirps-short","vignette2-quiet","vignette3"]}}},3585:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=p(n(0)),i=p(n(1)),a=p(n(5)),r=p(n(2592)),l=p(n(1074)),s=p(n(1116)),c=p(n(1764)),u=p(n(762));function p(e){return e&&e.__esModule?e:{default:e}}var d,h=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,d=i.default.Component),f.prototype.render=function(){return i.default.createElement("span",null,i.default.createElement(u.default,null,i.default.createElement("div",{id:"minecraft-frame"},i.default.createElement("div",{id:"phaser-game"}),this.props.showScore&&i.default.createElement("div",{id:"score-container"},i.default.createElement("div",{id:"score-inner"},i.default.createElement("span",null,r.default.score(),": "),i.default.createElement("span",{id:"score-number"},"0"))))),i.default.createElement(l.default,null,i.default.createElement(c.default,null),this.props.showFinishButton&&i.default.createElement("div",{id:"right-button-cell"},i.default.createElement("button",{type:"button",id:"rightButton",className:"share mc-share-button"},i.default.createElement("div",null,a.default.finish())))),i.default.createElement(s.default,null))},f);function f(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,d.apply(this,arguments))}h.propTypes={showFinishButton:o.default.bool.isRequired,showScore:o.default.bool.isRequired},t.default=h,e.exports=t.default},3586:function(module,exports,__webpack_require__){module.exports=function anonymous(locals,escapeFn,include,rethrow){rethrow=rethrow||function(e,t,n,o,i){var a=t.split("\n"),r=Math.max(o-3,0),l=Math.min(a.length,o+3),s=i(n),c=a.slice(r,l).map(function(e,t){var n=t+r+1;return(n==o?" >> ":"    ")+n+"| "+e}).join("\n");throw e.path=s,e.message=(s||"ejs")+":"+o+"\n"+c+"\n\n"+e.message,e},escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __line=1,__lines='<% var i18n = require(\'../locale\'); %>\n<h1 style="color: #e7e8ea; margin-bottom: 23px;" class="minecraft-big-yellow-header" id="getting-started-header"><%= i18n.playerSelectChooseCharacter() %></h1>\n\n\x3c!--<h2 id="select-character-text"><%= i18n.playerSelectChooseCharacter() %></h2>--\x3e\n\n<div id="choose-character-container">\n  <div class="minecraft-character" id="choose-alex">\n    <h1 class="minecraft-big-yellow-header">Alex</h1>\n    <div class="character-portrait" id="alex-portrait"></div>\n    <div class="choose-character-button" id="choose-alex-select"><%= i18n.selectChooseButton() %></div>\n  </div>\n  <div class="minecraft-character" id="choose-steve">\n    <h1 class="minecraft-big-yellow-header">Steve</h1>\n    <div class="character-portrait" id="steve-portrait"></div>\n    <div class="choose-character-button" id="choose-steve-select"><%= i18n.selectChooseButton() %></div>\n  </div>\n</div>\n\n<div id="close-character-select"></div>\n',__filename="src/craft/designer/dialogs/playerSelection.html.ejs";try{var __output=[],__append=__output.push.bind(__output);with(locals||{}){var i18n=__webpack_require__(2592);__append('\n<h1 style="color: #e7e8ea; margin-bottom: 23px;" class="minecraft-big-yellow-header" id="getting-started-header">'),__line=2,__append(escapeFn(i18n.playerSelectChooseCharacter())),__append('</h1>\n\n\x3c!--<h2 id="select-character-text">'),__line=4,__append(escapeFn(i18n.playerSelectChooseCharacter())),__append('</h2>--\x3e\n\n<div id="choose-character-container">\n  <div class="minecraft-character" id="choose-alex">\n    <h1 class="minecraft-big-yellow-header">Alex</h1>\n    <div class="character-portrait" id="alex-portrait"></div>\n    <div class="choose-character-button" id="choose-alex-select">'),__line=10,__append(escapeFn(i18n.selectChooseButton())),__append('</div>\n  </div>\n  <div class="minecraft-character" id="choose-steve">\n    <h1 class="minecraft-big-yellow-header">Steve</h1>\n    <div class="character-portrait" id="steve-portrait"></div>\n    <div class="choose-character-button" id="choose-steve-select">'),__line=15,__append(escapeFn(i18n.selectChooseButton())),__append('</div>\n  </div>\n</div>\n\n<div id="close-character-select"></div>\n'),__line=20}return __output.join("")}catch(e){rethrow(e,__lines,__filename,__line,escapeFn)}}},3587:function(e,t,n){"use strict";var o=n(394);e.exports={custom:{requiredBlocks:[],freePlay:!1,toolbox:(0,o.createToolbox)('<block type="craft_moveForward"></block>\n  <block type="craft_turn">\n    <title name="DIR">left</title>\n  </block>\n  <block type="craft_turn">\n    <title name="DIR">right</title>\n  </block>')}}},3588:function(e,t,n){"use strict";var o=n(394);e.exports={custom:{requiredBlocks:[],freePlay:!1,toolbox:(0,o.createToolbox)('<block type="craft_moveForward"></block>\n  <block type="craft_turn">\n    <title name="DIR">left</title>\n  </block>\n  <block type="craft_turn">\n    <title name="DIR">right</title>\n  </block>')}}},3589:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeUserCode=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},n=g(i(1)),a=g(i(7)),r=i(8),p=i(240),l=g(i(914)),s=i(51),c=g(i(1794)),u=g(i(3590)),d=g(i(3591)),h=g(i(145)),f=g(i(2691));function g(e){return e&&e.__esModule?e:{default:e}}function m(e){(new Image).src=e}var v="/blockly/media/craft/",_=new d.default(8080),y=[v+"Sliced_Parts/MC_Loading_Spinner.gif",v+"Sliced_Parts/Frame_Large_Plus_Logo.png",v+"Sliced_Parts/Pop_Up_Slice.png",v+"Sliced_Parts/X_Button.png",v+"Sliced_Parts/Button_Grey_Slice.png",v+"Sliced_Parts/MC_Button_Pressed.png",v+"Sliced_Parts/Run_Button_Up_Slice.png",v+"Sliced_Parts/Run_Button_Down_Slice.png",v+"Sliced_Parts/MC_Run_Arrow_Icon_Smaller.png",v+"Sliced_Parts/MC_Up_Arrow_Icon.png",v+"Sliced_Parts/MC_Down_Arrow_Icon.png",v+"Sliced_Parts/Reset_Button_Up_Slice.png",v+"Sliced_Parts/MC_Reset_Arrow_Icon.png",v+"Sliced_Parts/Reset_Button_Down_Slice.png",v+"Sliced_Parts/Callout_Tail.png"];var k=t.executeUserCode=function(s,e){var c=void 0;function u(e,n,o,i,a){(0,p.singleton)().highlight(e);var t=Object.keys(i),r=[];t.forEach(function(e){var t=i[e];null!==t&&r.push(e+"="+t)});var l=n;0<r.length&&(l=l+"?"+r.join("&")),s.async_command(l,function(e){var t=document.getElementById("code-connection-log");t.innerText+=n+" command executed.",null!==o&&(t.innerText+=" "+o+": "+e),t.innerText+="\n",t.scrollTop=t.scrollHeight,a(e),!0===(0,p.singleton)().isRunning()&&c.run()},o)}var t={move:function(e,t,n){u(e,"move","success",{direction:t},n)},turn:function(e,t,n){u(e,"turn","success",{direction:t},n)},place:function(e,t,n,o){u(e,"place","success",{slotNum:t,direction:n},o)},till:function(e,t,n){u(e,"till","success",{direction:t},n)},attack:function(e,t,n){u(e,"attack","success",{direction:t},n)},destroy:function(e,t,n){u(e,"destroy","success",{direction:t},n)},collect:function(e,t,n){u(e,"collect","success",{item:function(e){return e.hasOwnProperty("name")&&(e=e.name),e}(t)},n)},collectall:function(e,t){u(e,"collect","success",{item:"all"},t)},drop:function(e,t,n,o,i){u(e,"drop","success",{slotNum:t,quantity:n,direction:o},i)},dropall:function(e,t,n){u(e,"dropall","success",{direction:t},n)},detect:function(e,t,n){u(e,"detect","result",{direction:t},n)},inspect:function(e,t,n){u(e,"inspect","blockName",{direction:t},n)},inspectdata:function(e,t,n){u(e,"inspectdata","data",{direction:t},n)},detectredstone:function(e,t,n){u(e,"detectredstone","result",{direction:t},n)},getitemdetail:function(e,t,n){u(e,"getitemdetail","itemName",{slotNum:t},n)},getitemspace:function(e,t,n){u(e,"getitemspace","spaceCount",{slotNum:t},n)},getitemcount:function(e,t,n){u(e,"getitemcount","stackCount",{slotNum:t},n)},transfer:function(e,t,n,o,i){u(e,"transfer","success",{srcSlotNum:t,quantity:n,dstSlotNum:o},i)},tptoplayer:function(e,t){u(e,"tptoplayer",null,{},t)},wait:function(e,t,n){(0,p.singleton)().highlight(e),setTimeout(function(){n(),c.run()},t)},executeasother:function(e,t,n,o,i){u(e,"executeasother","success",{origin:t,position:n,command:o},i)},executedetect:function(e,t,n,o,i,a,r,l){u(e,"executedetect","success",{origin:t,position:n,detectBlock:o,detectData:i,detectPos:a,command:r},l)},timesetbyname:function(e,t,n){u(e,"timesetbyname","success",{time:t},n)},timesetbynumber:function(e,t,n){u(e,"timesetbynumber","success",{time:t},n)},weather:function(e,t,n){u(e,"weather","success",{type:t},n)},tptotarget:function(e,t,n,o){u(e,"tptargettotarget","success",{victim:t,destination:n},o)},tptopos:function(e,t,n,o){u(e,"tptargettopos","success",{victim:t,destination:n},o)},fill:function(e,t,n,o,i,a){u(e,"fill","fillCount",{from:t,to:n,tileName:o,tileData:i},a)},give:function(e,t,n,o,i){u(e,"give","itemAmount",{player:t,itemName:n.name,data:n.data,amount:o},i)},kill:function(e,t,n){u(e,"kill",null,{target:t},n)},setblock:function(e,t,n,o,i){u(e,"setblock",null,{position:t,tileName:n.name,tileData:n.data,oldBlockHandling:o},i)},summon:function(e,t,n,o){u(e,"summon","wasSpawned",{entityType:t,spawnPos:n},o)},testforblock:function(e,t,n,o){u(e,"testforblock","matches",{position:t,tileName:n.name,dataValue:n.data},o)},testforblocks:function(e,t,n,o,i,a){u(e,"testforblocks","matches",{begin:t,end:n,destination:o,mode:i},a)},clone:function(e,t,n,o,i,a,r){u(e,"clone","count",{begin:t,end:n,destination:o,maskMode:i,cloneMode:a},r)},clonefiltered:function(e,t,n,o,i,a,r){u(e,"clone","count",{begin:t,end:n,destination:o,maskMode:"filtered",cloneMode:i,tileName:a.name,tileData:a.data},r)}},n={item:function(e,t,n){return(0,p.singleton)().highlight(e),{name:t,data:n}},createBlockPos:function(e,t,n,o){return encodeURIComponent(""+o+e+" "+o+t+" "+o+n)},createBlockPosFromVec3:function(e,t){return encodeURIComponent(""+t+e.x+" "+t+e.y+" "+t+e.z)},getVec3:function(e,t,n){return{x:""+e,y:""+t,z:""+n}}};c=l.default.evalWith(e,o({},t,n),{asyncFunctionList:Object.values(t)})},b=(w.init=function(e){e.level.disableFinalStageMessage=!0,e.showInstructionsInTopPane=!0,document.body.className+=" minecraft",w.initialConfig=e,_.connectionStatusUpdate(function(e){!1===e&&w.showConnectToCodeConnectionPopup()}),(0,p.singleton)().reset=w.reset,(0,p.singleton)().runButtonClick=w.runButtonClick,(0,p.singleton)().setPageConstants(e,{isMinecraft:!0}),w.render(e)},w.render=function(e){a.default.render(n.default.createElement(r.Provider,{store:(0,s.getStore)()},n.default.createElement(c.default,{visualizationColumn:n.default.createElement(u.default,{showScore:!!e.level.useScore}),onMount:function(){(0,p.singleton)().init(o({enableShowCode:!1},e)),Object.keys(f.default).forEach(function(e){f.default[e].forEach(function(e){m(e[0])})}),y.forEach(function(e){m(e)})}})),document.getElementById(e.containerId))},w.reset=function(e){e||console.log("reset")},w.runButtonClick=function(){_.connectionStatusUpdate(function(e){if(!0===e){console.log("run");var t=document.getElementById("runButton"),n=document.getElementById("resetButton");n.style.minWidth||(n.style.minWidth=t.offsetWidth+"px"),(0,p.singleton)().toggleRunReset("reset"),Blockly.mainBlockSpace.traceOn(!0),(0,p.singleton)().attempts++;var o=Blockly.mainBlockSpace.getTopBlocks(!0),i=Blockly.Generator.blocksToCode("JavaScript",o);k(_,i)}else w.showConnectToCodeConnectionPopup()})},w);function w(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w)}b.showConnectToCodeConnectionPopup=function(){var e=document.createElement("div");e.innerHTML=i(3592)({image:(0,p.singleton)().assetUrl()});var t=(0,p.singleton)().createModalDialog({contentDiv:e,onHidden:function(){},id:"craft-popup-connect"});h.default.addClickTouchEvent(document.getElementById("download-button"),function(){window.open("https://education.minecraft.net/get-started/download","_blank").focus(),t.hide()}.bind(this)),h.default.addClickTouchEvent(document.getElementById("close-popup"),function(){t.hide()}.bind(this)),t.show()},b.showImportFromShareLinkPopup=function(e){var t=void 0,n=document.createElement("div");n.innerHTML=i(3593)();var o=(0,p.singleton)().createModalDialog({contentDiv:n,onHidden:function(){e(t)},id:"craft-popup-import"});h.default.addClickTouchEvent(document.getElementById("import-button"),function(){t=$("#share-link").val(),o.hide()}),h.default.addClickTouchEvent(document.getElementById("close-popup"),function(){o.hide()}),h.default.addClickTouchEvent(document.getElementById("cancel-button"),function(){o.hide()}),o.show()},b.showErrorMessagePopup=function(e,t){var n=document.createElement("div");n.innerHTML=i(3594)({title:e,message:t});var o=(0,p.singleton)().createModalDialog({contentDiv:n,onHidden:function(){},id:"craft-popup-error"});h.default.addClickTouchEvent(document.getElementById("close-popup"),function(){o.hide()}),o.show()},t.default=b},3590:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s(n(0)),i=s(n(1)),a=s(n(1074)),r=s(n(1116)),l=s(n(762));function s(e){return e&&e.__esModule?e:{default:e}}var c,u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,c=i.default.Component),p.prototype.render=function(){return i.default.createElement("span",null,i.default.createElement(l.default,null,i.default.createElement("div",{id:"minecraft-frame"},i.default.createElement("div",{id:"code-connection-log"}))),i.default.createElement(a.default,null),i.default.createElement(r.default,null))},p);function p(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,c.apply(this,arguments))}u.propTypes={showScore:o.default.bool.isRequired},t.default=u,e.exports=t.default},3591:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(9),a=(o=i)&&o.__esModule?o:{default:o};var r="http://localhost:",l=(s.prototype.connectionStatusUpdate=function(o,e){var t=1<arguments.length&&void 0!==e?e:200;void 0!==window.ipcRenderer?o(void 0!==window.ipcRenderer):a.default.ajax({type:"GET",url:r+this.port+"/connected",timeout:t,success:function(e){o(e)},error:function(e,t,n){o(!1)}})},s.prototype.async_command=function(o,i,t){void 0!==window.ipcRenderer?(window.ipcRenderer.sendToHost("sendToApp",{api:"basic",url:r+this.port+"/"+o}),this.callbackRef=i,this.keyRef=t):a.default.ajax({type:"GET",url:r+this.port+"/"+o,success:function(e){console.log("Command : "+o+" success result : "+e.toString()),null!==t?i(JSON.parse(e)[t]):i()},error:function(e,t,n){console.log("Command : "+o+" fail",n),i()}})},s);function s(e){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.callbackRef=null,this.keyRef=null,this.port=e,void 0!==window.ipcRenderer&&window.ipcRenderer.on("responseFromApp",function(e,t){var n=JSON.parse(t);"basic"===n.api&&(null!==o.keyRef?o.callbackRef(n[o.keyRef]):o.callbackRef())})}t.default=l,e.exports=t.default},3592:function(module,exports,__webpack_require__){module.exports=function anonymous(locals,escapeFn,include,rethrow){rethrow=rethrow||function(e,t,n,o,i){var a=t.split("\n"),r=Math.max(o-3,0),l=Math.min(a.length,o+3),s=i(n),c=a.slice(r,l).map(function(e,t){var n=t+r+1;return(n==o?" >> ":"    ")+n+"| "+e}).join("\n");throw e.path=s,e.message=(s||"ejs")+":"+o+"\n"+c+"\n\n"+e.message,e},escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __line=1,__lines='<% var i18n = require(\'../locale\'); %>\n<h1 class="minecraft-big-yellow-header" id="getting-started-header"><%= i18n.minecraftNotConnected() %></h1>\n\n<h2 id="download-text"><%= i18n.connectToCodeConnection() %></h2>\n\n<div class="download-button" id="download-button"><%= i18n.downloadButton() %></div>\n\n<div id="close-popup"></div>\n',__filename="src/craft/code-connection/dialogs/connectToCodeConnection.html.ejs";try{var __output=[],__append=__output.push.bind(__output);with(locals||{}){var i18n=__webpack_require__(2632);__append('\n<h1 class="minecraft-big-yellow-header" id="getting-started-header">'),__line=2,__append(escapeFn(i18n.minecraftNotConnected())),__append('</h1>\n\n<h2 id="download-text">'),__line=4,__append(escapeFn(i18n.connectToCodeConnection())),__append('</h2>\n\n<div class="download-button" id="download-button">'),__line=6,__append(escapeFn(i18n.downloadButton())),__append('</div>\n\n<div id="close-popup"></div>\n'),__line=9}return __output.join("")}catch(e){rethrow(e,__lines,__filename,__line,escapeFn)}}},3593:function(module,exports,__webpack_require__){module.exports=function anonymous(locals,escapeFn,include,rethrow){rethrow=rethrow||function(e,t,n,o,i){var a=t.split("\n"),r=Math.max(o-3,0),l=Math.min(a.length,o+3),s=i(n),c=a.slice(r,l).map(function(e,t){var n=t+r+1;return(n==o?" >> ":"    ")+n+"| "+e}).join("\n");throw e.path=s,e.message=(s||"ejs")+":"+o+"\n"+c+"\n\n"+e.message,e},escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __line=1,__lines='<% var i18n = require(\'../locale\'); %>\n<h1 class="minecraft-big-yellow-header" id="import-header"><%= i18n.importShareLinkHeader() %></h1>\n\n<h2><%= i18n.importShareLinkBody() %></h2>\n\n<input type="text" id="share-link" placeholder="Example: https://studio.code.org/c/999999999" />\n<div class="button" id="import-button"><%= i18n.import() %></div>\n\n<br />\n\n<div class="button" id="cancel-button"><%= i18n.cancel() %></div>\n\n<div id="close-popup"></div>\n',__filename="src/craft/code-connection/dialogs/importFromShareLink.html.ejs";try{var __output=[],__append=__output.push.bind(__output);with(locals||{}){var i18n=__webpack_require__(2632);__append('\n<h1 class="minecraft-big-yellow-header" id="import-header">'),__line=2,__append(escapeFn(i18n.importShareLinkHeader())),__append("</h1>\n\n<h2>"),__line=4,__append(escapeFn(i18n.importShareLinkBody())),__append('</h2>\n\n<input type="text" id="share-link" placeholder="Example: https://studio.code.org/c/999999999" />\n<div class="button" id="import-button">'),__line=7,__append(escapeFn(i18n.import())),__append('</div>\n\n<br />\n\n<div class="button" id="cancel-button">'),__line=11,__append(escapeFn(i18n.cancel())),__append('</div>\n\n<div id="close-popup"></div>\n'),__line=14}return __output.join("")}catch(e){rethrow(e,__lines,__filename,__line,escapeFn)}}},3594:function(module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){rethrow=rethrow||function(e,t,n,o,i){var a=t.split("\n"),r=Math.max(o-3,0),l=Math.min(a.length,o+3),s=i(n),c=a.slice(r,l).map(function(e,t){var n=t+r+1;return(n==o?" >> ":"    ")+n+"| "+e}).join("\n");throw e.path=s,e.message=(s||"ejs")+":"+o+"\n"+c+"\n\n"+e.message,e},escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __line=1,__lines='<h1 class="minecraft-big-yellow-header" id="error-message"><%= title %></h1>\n\n<h2><%= message %></h2>\n\n<div id="close-popup"></div>\n',__filename="src/craft/code-connection/dialogs/errorMessage.html.ejs";try{var __output=[],__append=__output.push.bind(__output);with(locals||{})__append('<h1 class="minecraft-big-yellow-header" id="error-message">'),__append(escapeFn(title)),__append("</h1>\n\n<h2>"),__line=3,__append(escapeFn(message)),__append('</h2>\n\n<div id="close-popup"></div>\n'),__line=6;return __output.join("")}catch(e){rethrow(e,__lines,__filename,__line,escapeFn)}}},3595:function(e,t,n){"use strict";var o=n(394);function i(e,t){return r("craft_"+e,1<arguments.length&&void 0!==t?t:"")}function a(e,t,n){return"<category name='"+e+"' "+(2<arguments.length&&void 0!==n?n:"")+">"+t+"</category>"}function r(e,t){return"<block type='"+e+"'>"+(1<arguments.length&&void 0!==t?t:"")+"</block>"}function l(e,t,n){return i("vecThree","<value name='X'><block type=\"math_number\"><title name='NUM'>"+e+"</title></block></value>\n                                <value name='Y'><block type=\"math_number\"><title name='NUM'>"+t+"</title></block></value>\n                                <value name='Z'><block type=\"math_number\"><title name='NUM'>"+n+"</title></block></value>")}e.exports={custom:{requiredBlocks:[],freePlay:!1,disable_variable_editing:!1,toolbox:(0,o.createToolbox)(a("Agent",i("move")+i("turn")+i("tptoplayer")+i("place","<value name='SLOTNUM'><block type=\"math_number\"><title name='NUM'>0</title></block></value>")+i("destroy")+i("till")+i("attack")+i("collect","<value name='ITEM'>"+i("block")+"</value>")+i("collectall")+i("drop","<value name='SLOTNUM'><block type=\"math_number\"><title name='NUM'>0</title></block></value>\n                            <value name='QUANTITY'><block type=\"math_number\"><title name='NUM'>1</title></block></value>")+i("dropall")+i("detect")+i("inspect")+i("inspectdata")+i("getitemdetail","<value name='SLOTNUM'><block type=\"math_number\"><title name='NUM'>0</title></block></value>")+i("getitemspace","<value name='SLOTNUM'><block type=\"math_number\"><title name='NUM'>0</title></block></value>")+i("getitemcount","<value name='SLOTNUM'><block type=\"math_number\"><title name='NUM'>0</title></block></value>")+i("transfer","<value name='SRCSLOTNUM'><block type=\"math_number\"><title name='NUM'>0</title></block></value>\n                                <value name='DSTSLOTNUM'><block type=\"math_number\"><title name='NUM'>1</title></block></value>\n                                <value name='QUANTITY'><block type=\"math_number\"><title name='NUM'>1</title></block></value>")+i("detectredstone"))+a("Item",i("block")+i("miscellaneous")+i("tool")+i("decoration")+i("getnameof","<value name='ITEM'>"+i("block")+"</value>")+i("getdataof","<value name='ITEM'>"+i("block")+"</value>")+i("createblock","<value name='BLOCKTYPE'>"+i("block")+"</value>\n                                     <value name='BLOCKDATA'>"+i("block")+"</value>"))+a("Blocks",i("tptotarget")+i("tptopos","<value name='VEC3'>"+l(1,1,1)+"</value>")+i("fill","<value name='ITEM'>"+i("block")+"</value>\n                            <value name='FROM_VEC3'>"+l(1,1,1)+"</value>\n                            <value name='TO_VEC3'>"+l(5,5,5)+"</value>")+i("give","<value name='ITEM'>"+i("block")+"</value>\n                            <value name='AMOUNT'><block type=\"math_number\"><title name='NUM'>10</title></block></value>")+i("kill")+i("setblock","<value name='ITEM'>"+i("block")+"</value>\n                               <value name='VEC3'>"+l(1,1,1)+"</value>")+i("summon","<value name='VEC3'>"+l(1,1,1)+"</value>")+i("testforblock","<value name='ITEM'>"+i("block")+"</value>\n                                    <value name='VEC3'>"+l(1,1,1)+"</value>")+i("testforblocks","<value name='FROM_VEC3'>"+l(1,1,1)+"</value>\n                                     <value name='TO_VEC3'>"+l(5,5,5)+"</value>\n                                     <value name='VEC3'>"+l(10,10,10)+"</value>")+i("clone","<value name='FROM_VEC3'>"+l(1,1,1)+"</value>\n                             <value name='TO_VEC3'>"+l(5,5,5)+"</value>\n                             <value name='VEC3'>"+l(10,10,10)+"</value>")+i("clonefiltered","<value name='ITEM'>"+i("block")+"</value>\n                                     <value name='FROM_VEC3'>"+l(1,1,1)+"</value>\n                                     <value name='TO_VEC3'>"+l(5,5,5)+"</value>\n                                     <value name='VEC3'>"+l(10,10,10)+"</value>")+i("executeasother","<value name='VEC3'>"+l(1,1,1)+"</value>")+i("timesetbyname")+i("timesetbynumber","<value name='TIME'><block type=\"math_number\"><title name='NUM'>1200</title></block></value>")+i("weather"))+a("Logic",r("logic_compare")+r("logic_operation")+r("logic_negate")+r("logic_boolean")+r("text"))+a("Control",r("controls_if")+r("controls_if","<mutation else='1'></mutation>")+r("controls_for")+r("controls_whileUntil")+r("controls_repeat_ext","<value name='TIMES'>"+r("math_number",'<field name="NUM">10</field>')+"</value>")+i("wait"))+a("Variables","",'custom="VARIABLE"')+a("Functions","",'custom="PROCEDURE"')+a("Math",r("math_number")+r("math_arithmetic")+i("vecThree","<value name='X'><block type=\"math_number\"><title name='NUM'>0</title></block></value>\n                                <value name='Y'><block type=\"math_number\"><title name='NUM'>0</title></block></value>\n                                <value name='Z'><block type=\"math_number\"><title name='NUM'>0</title></block></value>")+r("math_random_int","<value name='FROM'>"+r("math_number",'<field name="FROM">1</field>')+"</value><value name='TO'>"+r("math_number",'<field name="TO">10</field>')+"</value>")))}}},9:function(e,t){e.exports=$}},[[3574,0,1,2,3]]]);
